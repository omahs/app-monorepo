(self.webpackChunkweb=self.webpackChunkweb||[]).push([[22476],{975576:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},952891:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WitnessArgs=e.UncleBlockVec=e.UncleBlock=e.TransactionVec=e.Transaction=e.ScriptOpt=e.Script=e.RawTransaction=e.RawHeader=e.ProposalShortIdVec=e.ProposalShortId=e.OutPoint=e.Header=e.HashType=e.DepType=e.CellbaseWitness=e.CellOutputVec=e.CellOutput=e.CellInputVec=e.CellInput=e.CellDepVec=e.CellDep=e.BytesVec=e.BytesOptVec=e.BytesOpt=e.Bytes=e.Byte32Vec=e.Byte32=e.BlockV1=e.Block=e.BaseHeader=void 0,e.WitnessArgsOf=O,e.createFixedHexBytesCodec=_,e.deTransformHeaderCodecType=et,e.deTransformTransactionCodecType=Z,e.transformHeaderCodecType=tt,e.transformTransactionCodecType=Q;var n=r(412397),i=r(356997);function o(t){return{...t,unpack:e=>i.BI.from(t.unpack(e)).toHexString()}}const a=o(n.number.Uint8),s=o(n.number.Uint32LE),u=o(n.number.Uint64LE),c=o(n.number.Uint128LE),{byteVecOf:l,option:p,table:f,vector:d,struct:h}=n.molecule,{bytify:g,hexify:y}=n.bytes;function _(t){return(0,n.createFixedBytesCodec)({byteLength:t,pack:t=>g(t),unpack:t=>y(t)})}const m=l({pack:g,unpack:y});e.Bytes=m;const b=p(m);e.BytesOpt=b;const v=d(m);e.BytesVec=v;const w=d(b);e.BytesOptVec=w;const S=_(32);e.Byte32=S;const k=d(S);function O(t){return f({lock:p(l(t.lock)),inputType:p(l(t.inputType)),outputType:p(l(t.outputType))},["lock","inputType","outputType"])}e.Byte32Vec=k;const C=(0,n.createBytesCodec)({pack:g,unpack:y}),E=O({lock:C,inputType:C,outputType:C});e.WitnessArgs=E;const x=(0,n.createFixedBytesCodec)({byteLength:1,pack:t=>{if("type"===t)return n.number.Uint8.pack(1);if("data"===t)return n.number.Uint8.pack(0);if("data1"===t)return n.number.Uint8.pack(2);if("data2"===t)return n.number.Uint8.pack(4);throw new Error(`Invalid hash type: ${t}`)},unpack:t=>{const e=n.number.Uint8.unpack(t);if(1===e)return"type";if(0===e)return"data";if(2===e)return"data1";if(4===e)return"data2";throw new Error(`Invalid hash type: ${e}`)}});e.HashType=x;const I=(0,n.createFixedBytesCodec)({byteLength:1,pack:t=>{if("code"===t)return a.pack(0);if("depGroup"===t)return a.pack(1);throw new Error(`Invalid dep type: ${t}`)},unpack:t=>{const e=n.number.Uint8.unpack(t);if(0===e)return"code";if(1===e)return"depGroup";throw new Error(`Invalid dep type: ${e}`)}});e.DepType=I;const P=f({codeHash:S,hashType:x,args:m},["codeHash","hashType","args"]);e.Script=P;const T=p(P);e.ScriptOpt=T;const A=h({txHash:S,index:s},["txHash","index"]);e.OutPoint=A;const B=h({since:u,previousOutput:A},["since","previousOutput"]);e.CellInput=B;const H=d(B);e.CellInputVec=H;const D=f({capacity:u,lock:P,type:T},["capacity","lock","type"]);e.CellOutput=D;const j=d(D);e.CellOutputVec=j;const L=h({outPoint:A,depType:I},["outPoint","depType"]);e.CellDep=L;const M=d(L);e.CellDepVec=M;const R=f({version:s,cellDeps:M,headerDeps:k,inputs:H,outputs:j,outputsData:v},["version","cellDeps","headerDeps","inputs","outputs","outputsData"]);e.RawTransaction=R;const N=f({raw:R,witnesses:v},["raw","witnesses"]),z=(0,n.createBytesCodec)({pack:t=>N.pack(Q(t)),unpack:t=>Z(N.unpack(t))});e.Transaction=z;const F=d(z);e.TransactionVec=F;const U=h({version:s,compactTarget:s,timestamp:u,number:u,epoch:u,parentHash:S,transactionsRoot:S,proposalsHash:S,extraHash:S,dao:S},["version","compactTarget","timestamp","number","epoch","parentHash","transactionsRoot","proposalsHash","extraHash","dao"]);e.RawHeader=U;const q=h({raw:U,nonce:c},["raw","nonce"]);e.BaseHeader=q;const $=(0,n.createBytesCodec)({pack:t=>q.pack(tt(t)),unpack:t=>et(q.unpack(t))});e.Header=$;const W=_(10);e.ProposalShortId=W;const K=d(W);e.ProposalShortIdVec=K;const V=f({header:$,proposals:K},["header","proposals"]);e.UncleBlock=V;const Y=d(V);e.UncleBlockVec=Y;const G=f({header:$,uncles:Y,transactions:F,proposals:K},["header","uncles","transactions","proposals"]);e.Block=G;const X=f({header:$,uncles:Y,transactions:F,proposals:K,extension:m},["header","uncles","transactions","proposals","extension"]);e.BlockV1=X;const J=f({lock:P,message:m},["lock","message"]);function Q(t){return{raw:{version:t.version,cellDeps:t.cellDeps,headerDeps:t.headerDeps,inputs:t.inputs,outputs:t.outputs,outputsData:t.outputsData},witnesses:t.witnesses}}function Z(t){return{cellDeps:t.raw.cellDeps.map((t=>({outPoint:{txHash:t.outPoint.txHash,index:t.outPoint.index},depType:t.depType}))),headerDeps:t.raw.headerDeps,inputs:t.raw.inputs.map((t=>({previousOutput:{txHash:t.previousOutput.txHash,index:t.previousOutput.index},since:t.since}))),outputs:t.raw.outputs.map((t=>({capacity:t.capacity,lock:t.lock,type:t.type}))),outputsData:t.raw.outputsData,version:t.raw.version,witnesses:t.witnesses}}function tt(t){return{raw:{timestamp:t.timestamp,number:t.number,epoch:t.epoch,compactTarget:Number(t.compactTarget),dao:t.dao,parentHash:t.parentHash,proposalsHash:t.proposalsHash,transactionsRoot:t.transactionsRoot,extraHash:t.extraHash,version:t.version},nonce:t.nonce}}function et(t){return{timestamp:t.raw.timestamp,number:t.raw.number,epoch:t.raw.epoch,compactTarget:t.raw.compactTarget,dao:t.raw.dao,parentHash:t.raw.parentHash,proposalsHash:t.raw.proposalsHash,transactionsRoot:t.raw.transactionsRoot,extraHash:t.raw.extraHash,version:t.raw.version,nonce:t.nonce,hash:""}}e.CellbaseWitness=J},372752:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCellMatchQueryOptions=function(t,{lock:e,type:r,argsLen:a=-1,data:s="any",fromBlock:u,toBlock:c}){let l=null,p=null;e&&!o(e)?l={script:e,argsLen:a}:e&&(l=e,e.argsLen||(l.argsLen=a));r&&"empty"===r?p=r:r&&"object"===typeof r&&!o(r)?p={script:r,argsLen:a}:r&&"object"===typeof r&&o(r)&&(p=r,r.argsLen||(p.argsLen=a));if(l&&l.script&&-1===l.argsLen&&!new n.ScriptValue(t.cellOutput.lock,{validate:!1}).equals(new n.ScriptValue(l.script,{validate:!1})))return!1;if(l&&l.script&&"any"===l.argsLen){const e=t.cellOutput.lock;if(e.codeHash!==l.script.codeHash||e.hashType!==l.script.hashType||!e.args.startsWith(l.script.args))return!1}if(l&&l.script&&"number"===typeof l.argsLen&&l.argsLen>=0){const e=2*l.argsLen+2,r=l.script.args.length,n=Math.min(e,r),i=t.cellOutput.lock;if(i.args.length!==e)return!1;if(i.codeHash!==l.script.codeHash||i.hashType!==l.script.hashType||i.args.slice(0,n)!==l.script.args.slice(0,n))return!1}if(p&&"empty"===p&&t.cellOutput.type)return!1;if(p&&"object"===typeof p&&(!t.cellOutput.type||!new n.ScriptValue(t.cellOutput.type,{validate:!1}).equals(new n.ScriptValue(p.script,{validate:!1}))))return!1;if(s&&"any"!==s&&t.data!==s)return!1;if(u&&t.blockNumber&&i.BI.from(t.blockNumber).lt(i.BI.from(u)))return!1;if(c&&t.blockNumber&&i.BI.from(t.blockNumber).gt(i.BI.from(c)))return!1;return!0},e.isScriptWrapper=o;var n=r(943487),i=r(356997);function o(t){return null!==t&&void 0!==t.script}},214231:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={values:!0,utils:!0,since:!0,helpers:!0,indexer:!0,logger:!0,blockchain:!0};e.values=e.utils=e.since=e.logger=e.indexer=e.helpers=e.blockchain=void 0;var i=h(r(943487));e.values=i;var o=h(r(599759));e.utils=o;var a=h(r(634792));e.since=a;var s=h(r(372752));e.helpers=s;var u=h(r(170612));e.indexer=u,Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===u[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))}));var c=h(r(778983));e.logger=c;var l=h(r(952891));e.blockchain=l;var p=r(208781);Object.keys(p).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===p[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}}))}));var f=r(975576);function d(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(d=function(t){return t?r:e})(t)}function h(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=d(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}Object.keys(f).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===f[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}}))}))},170612:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.TransactionCollector=e.Indexer=void 0;var n=r(587543),i=r(599759),o=r(372752);e.Indexer=class{};class a{constructor(t,{lock:e,type:r,argsLen:a=-1,fromBlock:s,toBlock:u,order:c="asc",skip:l}={},{skipMissing:p=!1,includeStatus:f=!0}={}){if(!e&&(!r||"empty"===r))throw new Error("Either lock or type script must be provided!");if(e&&!(0,o.isScriptWrapper)(e)?(n.validators.ValidateScript(e),this.lock={script:e,ioType:"both",argsLen:a}):e&&e.script&&(n.validators.ValidateScript(e.script),this.lock=e,e.argsLen||(this.lock.argsLen=a),e.ioType||(this.lock.ioType="both")),"empty"===r?this.type=r:r&&!(0,o.isScriptWrapper)(r)?(n.validators.ValidateScript(r),this.type={script:r,ioType:"both",argsLen:a}):r&&r.script&&(n.validators.ValidateScript(r.script),this.type=r,r.argsLen||(this.type.argsLen=a),r.ioType||(this.type.ioType="both")),s&&(0,i.assertHexadecimal)("fromBlock",s),u&&(0,i.assertHexadecimal)("toBlock",u),"asc"!==c&&"desc"!==c)throw new Error("Order must be either asc or desc!");this.indexer=t,this.skipMissing=p,this.includeStatus=f,this.fromBlock=s,this.toBlock=u,this.order=c,this.skip=l,this.rpc=t.rpc}async getTransactionHashes(){throw new Error("Not implement!")}async count(){return(await this.getTransactionHashes()).length}async*collect(){const t=await this.getTransactionHashes();for(const e of t){const t=await this.rpc.get_transaction(e);if(!this.skipMissing&&!t)throw new Error(`Transaction ${e} is missing!`);this.includeStatus?yield t:yield t.transaction}}}e.TransactionCollector=a;var s={TransactionCollector:a};e.default=s},778983:(t,e)=>{"use strict";function r(t,e){const r=`[${t}] ${e}`;return"error"===t||"warn"===t?console.warn(r):void console.log(`[${t}] ${e}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.defaultLogger=r,e.deprecated=function(t){r("deprecated",t)}},208781:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},634792:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateAbsoluteEpochSince=s,e.generateHeaderEpoch=u,e.generateSince=o,e.maximumAbsoluteEpochSince=function(...t){const e=t.map((t=>c(t))),r=Math.max(...e.map((t=>t.number))),i=e.filter((t=>t.number===r));let o=i[0];for(let a=1;a<i.length;++a){const t=i[a];n.BI.from(t.index).mul(o.length).gte(n.BI.from(o.index).mul(t.length))&&(o=t)}return s(o)},e.parseAbsoluteEpochSince=c,e.parseEpoch=a,e.parseSince=function(t){const e=i(t);return"epochNumber"===e.type?e:{...e,value:e.value.toBigInt()}},e.parseSinceCompatible=i,e.validateAbsoluteEpochSince=l,e.validateSince=function(t,e,r){const{relative:o,type:s,value:u}=i(t);if(o){if("epochNumber"===s){const t=a(e.epoch),i=a(r.epoch),o={number:n.BI.from(u.number).add(i.number),index:n.BI.from(u.index).mul(i.length).add(n.BI.from(i.index).mul(u.length)),length:n.BI.from(u.length).mul(i.length)};return 0===u.length&&0!==i.length?(o.index=n.BI.from(i.index),o.length=n.BI.from(i.length)):0===i.length&&0!==u.length&&(o.index=n.BI.from(u.index),o.length=n.BI.from(u.length)),!n.BI.from(o.length).eq(0)&&n.BI.from(o.index).gte(o.length)&&(o.number=o.index.div(o.length).add(o.number),o.index=o.index.mod(o.length)),n.BI.from(o.number).lt(t.number)||n.BI.from(o.number).eq(t.number)&&n.BI.from(o.index).mul(t.length).lte(n.BI.from(t.index).mul(o.length))}if("blockNumber"===s)return n.BI.from(u).add(r.blockNumber).lte(e.blockNumber);if("blockTimestamp"===s){if(!e.median_timestamp||!r.median_timestamp)throw new Error("Must provide median_timestamp!");return n.BI.from(u).mul(1e3).add(r.median_timestamp).lte(e.median_timestamp)}}else{if("epochNumber"===s)return l(t,e.epoch);if("blockNumber"===s)return n.BI.from(u).lte(e.blockNumber);if("blockTimestamp"===s){if(!e.median_timestamp)throw new Error("Must provide tip median_timestamp!");return n.BI.from(u).mul(1e3).lte(e.median_timestamp)}}return!1};var n=r(356997);function i(t){const e=n.BI.from(t),r=e.shr(56),i=r.shr(5).and("0b11");let o,a;if(i.eq(0))o="blockNumber",a=e.and("0xFFFFFFFFFFFFFF");else if(i.eq(1))o="epochNumber",a={length:e.shr(40).and(65535).toNumber(),index:e.shr(24).and(65535).toNumber(),number:e.and(16777215).toNumber()};else{if(!i.eq(2))throw new Error("Invalid metric flag!");o="blockTimestamp",a=e.and("0xFFFFFFFFFFFFFF")}return{relative:!r.and("0x80").eq(0),type:o,value:a}}function o({relative:t,type:e,value:r}){let i,o=n.BI.from(0);return t&&(o=o.add(128)),"epochNumber"===e?o=o.add(32):"blockTimestamp"===e&&(o=o.add(64)),i=(0,n.isBIish)(r)?n.BI.from(r):"object"===typeof r?u(r):n.BI.from(r),p(o.shl(56).add(i))}function a(t){const e=n.BI.from(t);return{length:e.shr(40).and(65535).toNumber(),index:e.shr(24).and(65535).toNumber(),number:e.and(16777215).toNumber()}}function s({length:t,index:e,number:r}){return o({relative:!1,type:"epochNumber",value:{length:t,index:e,number:r}})}function u({length:t,index:e,number:r}){return p(n.BI.from(t).shl(40).add(n.BI.from(e).shl(24)).add(r))}function c(t){const{relative:e,type:r,value:n}=i(t);if(!1!==e||"epochNumber"!==r)throw new Error("Since format error!");return n}function l(t,e){const r=i(t).value,o=a(e);return n.BI.from(r.number).lt(o.number)||n.BI.from(r.number).eq(o.number)&&n.BI.from(r.index).mul(o.length).lte(n.BI.from(o.index).mul(r.length))}function p(t){return"0x"+t.toString(16)}},599759:(t,e,r)=>{"use strict";var n=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.CKBHasher=void 0,e.assertHexString=function(t,e){if(!/^0x([0-9a-fA-F][0-9a-fA-F])*$/.test(e))throw new Error(`${t} must be a hex string!`)},e.assertHexadecimal=k,e.ckbHash=y,e.computeScriptHash=function(t){return y(c.Script.pack(t))},e.deepCamel=E,e.deepCamelizeTransaction=function(t){return x(E(t))},e.generateTypeIdScript=function(t,e="0x0"){c.CellInput.pack(t),k("outputIndex",e);const r=function(t,e){const r=c.CellInput.pack(t),n=s.bytes.hexify(s.number.Uint64LE.pack(e)),i=new g;return i.update(r),i.update(n),i.digestHex()}(t,e);return{codeHash:O,hashType:"type",args:r}},e.hashCode=function(t){return(0,a.xxHash32)(t,0)},e.isDeepEqual=function(t,e){return(0,o.default)(t,e)},e.readBigUInt128LE=function(t){return S(t).toBigInt()},e.readBigUInt128LECompatible=S,e.readBigUInt64LE=function(t){return m(t).toBigInt()},e.readBigUInt64LECompatible=m,e.toBigUInt128LE=function(t){return w(t)},e.toBigUInt128LECompatible=w,e.toBigUInt64LE=function(t){return _(t)},e.toBigUInt64LECompatible=_;var i=p(r(35391)),o=p(r(633958)),a=r(281713),s=r(412397),u=r(356997),c=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=l(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(952891));function l(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(l=function(t){return t?r:e})(t)}function p(t){return t&&t.__esModule?t:{default:t}}const{bytify:f,hexify:d,bytifyRawString:h}=s.bytes;class g{constructor(t={}){const{outLength:e=32}=t;this.outLength=e,this.hasher=(0,i.default)(e,void 0,void 0,h("ckb-default-hash"))}update(t){return this.hasher.update(f(t)),this}digestHex(){const t=new Uint8Array(this.outLength);return this.hasher.digest(t),d(t.buffer)}}function y(t){const e=new g;return e.update(s.bytes.bytify(t)),e.digestHex()}function _(t){t=u.BI.from(t);const e=n.alloc(8);return e.writeUInt32LE(t.and("0xffffffff").toNumber(),0),t=t.shr(32),e.writeUInt32LE(t.and("0xffffffff").toNumber(),4),`0x${e.toString("hex")}`}function m(t){const e=n.from(t.slice(2),"hex");return u.BI.from(e.readUInt32LE()).add(u.BI.from(e.readUInt32LE(4)).shl(32))}e.CKBHasher=g;const b=u.BI.from(0),v=u.BI.from("340282366920938463463374607431768211455");function w(t){if((t=u.BI.from(t)).lt(b))throw new Error(`u128 ${t} too small`);if(t.gt(v))throw new Error(`u128 ${t} too large`);const e=n.alloc(16);return e.writeUInt32LE(t.and(4294967295).toNumber(),0),t=t.shr(32),e.writeUInt32LE(t.and(4294967295).toNumber(),4),t=t.shr(32),e.writeUInt32LE(t.and(4294967295).toNumber(),8),t=t.shr(32),e.writeUInt32LE(t.and(4294967295).toNumber(),12),`0x${e.toString("hex")}`}function S(t){if(t.length<34||!t.startsWith("0x"))throw new Error("leHex format error");const e=n.from(t.slice(2,34),"hex");return u.BI.from(e.readUInt32LE(0)).shl(0).add(u.BI.from(e.readUInt32LE(4)).shl(32)).add(u.BI.from(e.readUInt32LE(8)).shl(64)).add(u.BI.from(e.readUInt32LE(12)).shl(96))}function k(t,e){if(!/^0x(0|[0-9a-fA-F]+)$/.test(e))throw new Error(`${t} must be a hexadecimal!`)}const O="0x00000000000000000000000000000000000000000000000000545950455f4944";function C(t){return t.replace(/([-_][a-z])/gi,(t=>t.toUpperCase().replace("-","").replace("_","")))}function E(t){if("[object Array]"===Object.prototype.toString.call(t))return 0===t.length?t:t.map((t=>E(t)));const e={};if("[object Object]"===Object.prototype.toString.call(t)){for(const r in t){const n=t[r];"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?e[C(r)]=E(n):e[C(r)]=n}return e}return t}function x(t){if("[object Array]"===Object.prototype.toString.call(t))return 0===t.length?t:t.map((t=>x(t)));const e={};if("[object Object]"===Object.prototype.toString.call(t)){for(const r in t){const n=t[r];"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?e[r]=x(n):e[r]="dep_group"===n?"depGroup":n}return e}return t}},943487:(t,e,r)=>{"use strict";var n=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionValue=e.ScriptValue=e.RawTransactionValue=e.OutPointValue=void 0;var i=r(281713),o=r(599759),a=r(412397),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=u(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(952891));function u(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(u=function(t){return t?r:e})(t)}const{hexify:c}=a.bytes;class l{constructor(t){this.buffer=t}equals(t){return c(this.buffer)===c(t.buffer)}hashCode(){return(0,i.xxHash32)(n.from(this.buffer),0)}hash(){return(0,o.ckbHash)(this.buffer)}}e.ScriptValue=class extends l{constructor(t,e={}){super(s.Script.pack(t))}};e.OutPointValue=class extends l{constructor(t,e={}){super(s.OutPoint.pack(t))}};e.RawTransactionValue=class extends l{constructor(t,e={}){super(s.RawTransaction.pack(t))}};e.TransactionValue=class extends l{constructor(t,e={}){super(s.Transaction.pack(t))}}},356997:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ckbDecimals=e.BI=void 0,e.formatUnit=function(t,e){const r=f(e);return function(t,e){if(!d(e))throw new Error("decimal size must be a non-negative integer");const r="1"+Array(e).fill("0").join("");t=a.from(t);const n=t.isNegative();n&&(t=t.mul(p));const i=t.div(r).toString();let o=i;if(r.length>1){let e=t.mod(r).toString();for(;e.length<r.length-1;)e="0"+e;e=e.match(/^([0-9]*[1-9]|0)(0*)/)[1],o+="."+e}n&&(o="-"+o);return o}(t,r)},e.isBIish=o,e.parseUnit=function(t,e){const r=f(e);return function(t,e){if(!d(e))throw new Error("decimal size must be a non-negative integer");if(!t.match(/^-?\d+(\.\d{1,})?$/))throw new Error("invalid decimal string");const r="1"+Array(e).fill("0").join(""),n="-"===t.substring(0,1);n&&(t=t.substring(1));let i,o;const s=t.split(".");if(1===s.length)i=s[0],o="0";else{if(2!==s.length)throw new Error("too many decimal points (should not happen)");i=s[0],o=s[1]}for(;i.length>0&&"0"===i[0];)i=i.substring(1);""===i&&(i="0");for(;o.length>0&&"0"===o[o.length-1];)o=o.substring(0,o.length-1);if(o.length>r.length-1)throw new Error("decimal part exceeds max decimals");""===o&&(o="0");for(;o.length<r.length-1;)o+="0";const u=a.from(i),c=a.from(o);let l=u.mul(r).add(c);n&&(l=l.mul(p));return l}(t,r)},e.toJSBI=u;var n,i=(n=r(191484))&&n.__esModule?n:{default:n};function o(t){return null!==t&&("number"===typeof t&&t%1===0||"string"===typeof t&&(!!t.match(/^0x(0|[0-9a-fA-F]+)$/)||!!t.match(/^-?[0-9]+$/))||"bigint"===typeof t||a.isBI(t))}class a{constructor(t){this.jsbi=t,this._isBI=!0}add(t){return s(i.default.add(this.jsbi,u(t)))}sub(t){return s(i.default.subtract(this.jsbi,u(t)))}div(t){return s(i.default.divide(this.jsbi,u(t)))}mul(t){return s(i.default.multiply(this.jsbi,u(t)))}mod(t){return s(i.default.remainder(this.jsbi,u(t)))}abs(){return i.default.greaterThanOrEqual(this.jsbi,u(0))?s(this.jsbi):s(i.default.unaryMinus(this.jsbi))}pow(t){return s(i.default.exponentiate(this.jsbi,u(t)))}and(t){return s(i.default.bitwiseAnd(this.jsbi,u(t)))}or(t){return s(i.default.bitwiseOr(this.jsbi,u(t)))}xor(t){return s(i.default.bitwiseXor(this.jsbi,u(t)))}not(){return s(i.default.bitwiseNot(this.jsbi))}mask(t){const e=u(t);if(i.default.lessThan(e,u(0))||i.default.lessThan(this.jsbi,u(0)))throw new Error("mask works only with positive numbers");const r=u(this.jsbi.toString(2).length);if(i.default.lessThanOrEqual(r,e))return s(this.jsbi);{const t=i.default.leftShift(i.default.signedRightShift(this.jsbi,e),e);return s(i.default.bitwiseXor(this.jsbi,t))}}shl(t){return s(i.default.leftShift(this.jsbi,u(t)))}shr(t){return s(i.default.signedRightShift(this.jsbi,u(t)))}eq(t){return i.default.equal(this.jsbi,u(t))}lt(t){return i.default.lessThan(this.jsbi,u(t))}lte(t){return i.default.lessThanOrEqual(this.jsbi,u(t))}gt(t){return i.default.greaterThan(this.jsbi,u(t))}gte(t){return i.default.greaterThanOrEqual(this.jsbi,u(t))}isNegative(){return i.default.lessThan(this.jsbi,u(0))}isZero(){return i.default.equal(this.jsbi,u(0))}toNumber(){return i.default.toNumber(this.jsbi)}toBigInt(){try{return BigInt(this.jsbi.toString(10))}catch(t){throw new Error("this platform does not support BigInt")}}toString(t){return t=t||10,this.jsbi.toString(t)}toHexString(){return i.default.lessThan(this.jsbi,u(0))?"-0x"+i.default.unaryMinus(this.jsbi).toString(16):"0x"+this.jsbi.toString(16)}static from(t){if(t instanceof a)return t;if(o(t))return s(u(t));if(t instanceof i.default)return s(u(t.toString()));throw new Error(`invalid type: ${t} can't be converted into BI`)}static isBI(t){return function(t){return null!=t&&"object"===typeof t}(t)&&!!t._isBI}}function s(t){return new a(t)}function u(t){return"number"===typeof t||"string"===typeof t?i.default.BigInt(t):i.default.BigInt(t.toString())}e.BI=a;const c=["shannon","ckb"],l=8;e.ckbDecimals=l;const p=a.from(-1);function f(t){let e=0;if("string"===typeof t){if(-1===c.indexOf(t))throw new Error(`invalid unit name, supported names are ${c.join(", ")}`);"ckb"===t&&(e=l)}else{if(!d(t))throw new Error("unit of integer must be a non-negative integer");e=t}return e}function d(t){return Number.isInteger(t)&&t>=0}},922641:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertQueryOptionToLumosSearchKey=a,e.filterByLumosQueryOptions=function(t,e){const r=a(e);let n=t.filter((t=>s(t,r)));e.argsLen&&"any"!==e.argsLen&&-1!==e.argsLen&&(n=n.filter((t=>i.bytes.bytify(t.cellOutput.lock.args).length===e.argsLen)));if(e.data&&"any"!==e.data)if(p(e.data)&&"exact"===e.data.searchMode){const t=e.data;n=n.filter((e=>i.bytes.equal(i.bytes.bytify(e.data),i.bytes.bytify(t.data))))}else if(p(e.data)&&"prefix"===e.data.searchMode){const t=e.data;n=n.filter((e=>{const r=i.bytes.bytify(t.data),n=i.bytes.bytify(e.data).slice(0,r.length);return i.bytes.equal(r,n)}))}else n=n.filter((t=>{const r=i.bytes.bytify(e.data),n=i.bytes.bytify(t.data).slice(0,r.length);return i.bytes.equal(r,n)}));return n},e.filterByLumosSearchKey=s,e.instanceOfDataWithSearchMode=p,e.instanceOfScriptWrapper=l,e.unwrapScriptWrapper=e.unwrapDataWrapper=void 0;var n=r(214231),i=r(412397),o=r(356997);function a(t){let e,r,n;const i=t.lock,o=t.type;if(i&&(e=l(i)?i.script:i),o&&"empty"!==o&&(r=l(o)?o.script:o),e)n={script:e,scriptType:"lock",scriptSearchMode:l(i)&&i.searchMode||"prefix",filter:{}},r&&(n.filter.script=r);else{if(!r)throw new Error("query.lock and query.type can't be both empty");n={script:r,scriptType:"type",scriptSearchMode:l(o)&&o.searchMode||"prefix",filter:{}}}const{outputDataLenRange:a,outputCapacityRange:s,scriptLenRange:u}=t;return n.filter.outputDataLenRange=a,n.filter.outputCapacityRange=s,n.filter.scriptLenRange=u,"empty"===o&&(n.filter.scriptLenRange=["0x0","0x1"]),n}function s(t,e){const r="exact"===e.scriptSearchMode,{cellOutput:a}=t,{scriptType:s,script:l,filter:p}=e;if(r){if("lock"===s){if(!i.bytes.equal(n.blockchain.Script.pack(a.lock),n.blockchain.Script.pack(l)))return!1}else if(!a.type||!i.bytes.equal(n.blockchain.Script.pack(a.type),n.blockchain.Script.pack(l)))return!1}else if("lock"===s){if(!u(a.lock,l))return!1}else if(!u(a.type,l))return!1;if(!p)return!0;if("lock"===s){if(p.script&&!u(a.type,p.script))return!1;if(p.scriptLenRange&&!c(a.type,p.scriptLenRange))return!1}else{if(p.script&&!u(a.lock,p.script))return!1;if(p.scriptLenRange&&!c(a.lock,p.scriptLenRange))return!1}const{outputCapacityRange:f,outputDataLenRange:d}=p;if(f){const t=o.BI.from(a.capacity),e=o.BI.from(f[0]),r=o.BI.from(f[1]);if(t.lt(e)||t.gte(r))return!1}if(d){const e=o.BI.from(i.bytes.bytify(t.data).length),r=o.BI.from(d[0]),n=o.BI.from(d[1]);if(e.lt(r)||e.gte(n))return!1}return!0}function u(t,e){if(!t)return!1;if(!i.bytes.equal(e.codeHash,t.codeHash))return!1;const r=i.bytes.bytify(e.args),n=i.bytes.bytify(t.args).slice(0,r.length);return!!i.bytes.equal(r,n)&&t.hashType===e.hashType}function c(t,e){const r=t?o.BI.from(i.bytes.concat(t.codeHash,t.args).length+1):o.BI.from(0),n=o.BI.from(e[0]),a=o.BI.from(e[1]);return!r.lt(n)&&!r.gte(a)}function l(t){return"object"===typeof t&&null!=t&&"script"in t}function p(t){return"object"===typeof t&&null!=t&&"data"in t}e.unwrapScriptWrapper=t=>l(t)?t.script:t;e.unwrapDataWrapper=t=>p(t)?t.data:t},558954:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CKBCellCollector=void 0;var n,i=r(214231),o=r(587543),a=r(607879),s=(n=r(496279))&&n.__esModule?n:{default:n},u=r(922641);e.CKBCellCollector=class{constructor(t,e,r){this.terminableCellFetcher=t,this.otherQueryOptions=r;const n={lock:void 0,type:void 0,argsLen:-1,data:"any",fromBlock:void 0,toBlock:void 0,order:"asc",skip:void 0,outputDataLenRange:void 0,outputCapacityRange:void 0,bufferSize:void 0};this.queries=(Array.isArray(e)?e:[e]).map((t=>({...n,...t}))),this.queries.forEach((t=>{this.validateQueryOption(t)})),this.convertQueryOptionToSearchKey()}validateQueryOption(t){if(!t.lock&&(!t.type||"empty"===t.type))throw new Error("Either lock or type script must be provided!");if(t.lock&&((0,u.instanceOfScriptWrapper)(t.lock)?(0,u.instanceOfScriptWrapper)(t.lock)&&o.validators.ValidateScript(t.lock.script):o.validators.ValidateScript(t.lock)),t.type&&"empty"!==t.type&&("object"!==typeof t.type||(0,u.instanceOfScriptWrapper)(t.type)?"object"===typeof t.type&&(0,u.instanceOfScriptWrapper)(t.type)&&o.validators.ValidateScript(t.type.script):o.validators.ValidateScript(t.type)),t.fromBlock&&i.utils.assertHexadecimal("fromBlock",t.fromBlock),t.toBlock&&i.utils.assertHexadecimal("toBlock",t.toBlock),"asc"!==t.order&&"desc"!==t.order)throw new Error("Order must be either asc or desc!");if(t.outputCapacityRange&&(i.utils.assertHexadecimal("outputCapacityRange[0]",t.outputCapacityRange[0]),i.utils.assertHexadecimal("outputCapacityRange[1]",t.outputCapacityRange[1])),t.outputDataLenRange&&(i.utils.assertHexadecimal("outputDataLenRange[0]",t.outputDataLenRange[0]),i.utils.assertHexadecimal("outputDataLenRange[1]",t.outputDataLenRange[1])),t.scriptLenRange&&(i.utils.assertHexadecimal("scriptLenRange[0]",t.scriptLenRange[0]),i.utils.assertHexadecimal("scriptLenRange[1]",t.scriptLenRange[1])),t.outputDataLenRange&&t.data&&"any"!==t.data){const e=(0,a.getHexStringBytes)((0,u.unwrapDataWrapper)(t.data));if(e<Number(t.outputDataLenRange[0])||e>=Number(t.outputDataLenRange[1]))throw new Error("data length not match outputDataLenRange")}if(t.skip&&"number"!==typeof t.skip)throw new Error("skip must be a number!");if(t.bufferSize&&"number"!==typeof t.bufferSize)throw new Error("bufferSize must be a number!")}convertQueryOptionToSearchKey(){this.queries.forEach((t=>{const e=t.lock;if(e&&(0,u.instanceOfScriptWrapper)(e)&&(o.validators.ValidateScript(e.script),t.lock=e.script),t.type&&"empty"!==t.type&&"object"===typeof t.type&&(0,u.instanceOfScriptWrapper)(t.type)&&(o.validators.ValidateScript(t.type.script),t.type=t.type.script),!t.outputDataLenRange&&t.data&&"any"!==t.data){const e=(0,a.getHexStringBytes)((0,u.unwrapDataWrapper)(t.data));t.outputDataLenRange=["0x"+e.toString(16),"0x"+(e+1).toString(16)]}t.scriptLenRange||"empty"!==t.type||(t.scriptLenRange=["0x0","0x1"])}))}async getLiveCell(t,e){const r={sizeLimit:t.bufferSize,order:t.order,lastCursor:e};return await this.terminableCellFetcher.getCells((0,a.generateSearchKey)(t),void 0,r)}async count(){let t=0;for await(const e of this.collect())t++;return t}async request(t,e){const r=await(0,s.default)(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(200!==r.status)throw new Error(`indexer request failed with HTTP code ${r.status}`);const n=await r.json();if(void 0!==n.error)throw new Error(`indexer request rpc failed with error: ${JSON.stringify(n.error)}`);return n}async getLiveCellWithBlockHash(t,e){if(!this.otherQueryOptions)throw new Error("CKB Rpc URL must provide");const r=await this.getLiveCell(t,e);if(0===r.objects.length)return r;const n=r.objects.map(((t,e)=>({id:e,jsonrpc:"2.0",method:"get_block_hash",params:[t.blockNumber]}))),i=await this.request(this.otherQueryOptions.ckbRpcUrl,n);return r.objects=r.objects.map(((t,e)=>{const r=i.find((t=>t.id===e));return{...t,blockHash:r&&r.result}})),r}async*collect(){const t=new Set;for(const n of this.queries)for await(const i of this.collectBySingleQuery(n)){var e,r;const n=`${null===(e=i.outPoint)||void 0===e?void 0:e.txHash}-${null===(r=i.outPoint)||void 0===r?void 0:r.index}`;t.has(n)||(t.add(n),yield i)}}async*collectBySingleQuery(t){const e=this.otherQueryOptions&&"withBlockHash"in this.otherQueryOptions&&this.otherQueryOptions.withBlockHash;let r;const n=async()=>{const n=await(e?this.getLiveCellWithBlockHash(t,r):this.getLiveCell(t,r));return r=n.lastCursor,n.objects};let i=await n();if(i=(0,u.filterByLumosQueryOptions)(i,t),0===i.length)return;let o=n(),a=0,s=0;for(;;)if(t.skip&&s<t.skip?s++:yield i[a],a++,a===i.length){if(a=0,i=await o,0===i.length)break;o=n()}}}},999330:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CellCollector",{enumerable:!0,get:function(){return n.CKBCellCollector}}),Object.defineProperty(e,"Indexer",{enumerable:!0,get:function(){return i.CkbIndexer}}),Object.defineProperty(e,"RPC",{enumerable:!0,get:function(){return a.RPC}}),Object.defineProperty(e,"TerminableCellAdapter",{enumerable:!0,get:function(){return i.TerminableCellAdapter}}),Object.defineProperty(e,"TransactionCollector",{enumerable:!0,get:function(){return o.CKBIndexerTransactionCollector}});var n=r(558954),i=r(990373),o=r(823255),a=r(996582)},990373:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TerminableCellAdapter=e.CkbIndexer=void 0;var n=r(214231),i=r(607879),o=r(558954),a=r(22699),s=r(633079),u=r(356997),c=r(996582),l=r(39337),p=r(587543),f=r(922641);function d(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const h=()=>({stop:!1,push:!0});function g(t,e){console.log(`[${t}] ${e}`)}class y{constructor(t,e){d(this,"medianTimeEmitters",[]),d(this,"emitters",[]),d(this,"isSubscribeRunning",!1),this.ckbIndexerUrl=t,this.ckbRpcUrl=e,this.uri=e||t,this.ckbIndexerUri=t}getCkbRpc(){return new l.CKBRPC(this.uri)}getIndexerRpc(){if(this.uri===this.ckbIndexerUri){const t=this.getCkbRpc();return{...t,getTip:t.getIndexerTip}}return new c.RPC(this.ckbIndexerUri)}async tip(){return await this.getIndexerRpc().getTip()}asyncSleep(t){return new Promise((e=>setTimeout(e,t)))}async waitForSync(t=0){const e=parseInt((await this.getCkbRpc().getTipHeader()).number,16);for(;;){if(parseInt((await this.tip()).blockNumber,16)+t>=e)return;await this.asyncSleep(1e3)}}collector(t,e){return new o.CKBCellCollector(this,t,e)}async getCells(t,e=h,r={}){return new _(this.getIndexerRpc()).getCells(t,e,r)}async getTransactions(t,e={}){let r=[],n=e.lastCursor;const i=e.sizeLimit||100,o=e.order||"asc";for(;;){const e=await this.getIndexerRpc().getTransactions(t,o,`0x${i.toString(16)}`,n),a=e.objects;if(n=e.lastCursor,r=r.concat(a),a.length<=i)break}return{objects:r,lastCursor:n}}running(){return!0}start(){g("warn","deprecated: no need to start the ckb-indexer manually")}startForever(){g("warn","deprecated: no need to startForever the ckb-indexer manually")}stop(){g("warn","deprecated: no need to stop the ckb-indexer manually")}subscribe(t){if(this.isSubscribeRunning=!0,this.scheduleLoop(),t.lock&&t.type)throw new Error("The notification machanism only supports you subscribing for one script once so far!");null===t.toBlock&&null===t.skip||g("warn","The passing fields such as toBlock and skip are ignored in subscribe() method.");const e=new s.IndexerEmitter;if(e.argsLen=t.argsLen,e.outputData=t.data&&(0,f.unwrapDataWrapper)(t.data),t.fromBlock&&n.utils.assertHexadecimal("fromBlock",t.fromBlock),e.fromBlock=t.fromBlock?u.BI.from(t.fromBlock):u.BI.from(0),t.lock)p.validators.ValidateScript(t.lock),e.lock=t.lock;else{if(!t.type||"empty"===t.type)throw new Error("Either lock or type script must be provided!");p.validators.ValidateScript(t.type),e.type=t.type}return this.emitters.push(e),e}loop(){this.isSubscribeRunning&&this.poll().then((t=>{this.scheduleLoop(t)})).catch((t=>{g("error",`Error occurs: ${t} ${t.stack}, stopping indexer!`),this.isSubscribeRunning=!1}))}scheduleLoop(t=1){setTimeout((()=>{this.loop()}),t)}async poll(){let t=1;const e=await this.tip(),{blockNumber:r,blockHash:n}=e;if("0x0"===r){const t=await this.getCkbRpc().getBlockByNumber(r);await this.publishAppendBlockEvents(t)}const i=u.BI.from(r).add(1),o=await this.getCkbRpc().getBlockByNumber(`0x${i.toString(16)}`);if(o)if(o.header.parentHash===n)await this.publishAppendBlockEvents(o);else{const t=await this.getCkbRpc().getBlockByNumber(r);await this.publishAppendBlockEvents(t)}else{const e=await this.getCkbRpc().getBlockByNumber(r);await this.publishAppendBlockEvents(e),t=3e3}return t}async publishAppendBlockEvents(t){for(const[e,r]of t.transactions.entries()){const n=t.header.number;if(e>0){const t=r.inputs.map((t=>t.previousOutput.txHash));(await(0,i.requestBatchTransactionWithStatus)(this.uri,t).then((t=>t.map(((t,e)=>{const n=r.inputs[e].previousOutput.index;return{output:t.transaction.outputs[parseInt(n)],outputData:t.transaction.outputsData[parseInt(n)]}}))))).forEach((({output:t,outputData:e})=>{this.filterEvents(t,n,e)}))}for(const[t,e]of r.outputs.entries()){const i=r.outputsData[t];this.filterEvents(e,n,i)}}await this.emitMedianTimeEvents()}filterEvents(t,e,r){for(const n of this.emitters)void 0!==n.lock&&this.checkFilterOptions(n,e,r,n.lock,t.lock)&&n.emit("changed");if(null!==t.type)for(const n of this.emitters)void 0!==n.type&&this.checkFilterOptions(n,e,r,n.type,t.type)&&n.emit("changed")}checkFilterOptions(t,e,r,n,i){const o=!t.fromBlock||u.BI.from(t.fromBlock).lte(e),a="any"===t.outputData||!t.outputData||t.outputData===r,s=!i||n.codeHash===i.codeHash&&n.hashType===i.hashType&&this.checkArgs(t.argsLen,n.args,i.args);return o&&a&&s}checkArgs(t,e,r){return-1===t||!t&&0!==t?e===r:("number"===typeof t&&r.length===2*t+2||"any"===t)&&r.substring(0,e.length)===e}async emitMedianTimeEvents(){if(0===this.medianTimeEmitters.length)return;const t=(await this.getCkbRpc().getBlockchainInfo()).medianTime;for(const e of this.medianTimeEmitters)e.emit("changed",t)}subscribeMedianTime(){this.isSubscribeRunning=!0,this.scheduleLoop();const t=new a.EventEmitter;return this.medianTimeEmitters.push(t),t}}e.CkbIndexer=y,d(y,"version","0.4.1");class _{constructor(t){this.getCellsableRpc=t}async getCells(t,e=h,r={}){const n=[];let i=r.lastCursor;const o=r.sizeLimit||100,a=r.order||"asc";for(;;){const r=await this.getCellsableRpc.getCells(t,a,`0x${o.toString(16)}`,i),s=r.objects;i=r.lastCursor;for(const t of s){const r={cellOutput:t.output,data:t.outputData,outPoint:t.outPoint?t.outPoint:void 0,blockNumber:t.blockNumber},{stop:o,push:a}=e(0,r);if(a&&n.push(r),o)return{objects:n,lastCursor:i}}if(s.length<=o)break}return{objects:n,lastCursor:i}}}e.TerminableCellAdapter=_},842591:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toSearchKey=e.toSearchFilter=e.toScript=e.toGetTransactionsSearchKey=e.toGetCellsSearchKey=void 0;const r=t=>({code_hash:t.codeHash,hash_type:t.hashType,args:t.args});e.toScript=r;const n=t=>({script:t.script?r(t.script):t.script,output_data_len_range:t.outputDataLenRange,output_capacity_range:t.outputCapacityRange,block_range:t.blockRange,script_len_range:t.scriptLenRange});e.toSearchFilter=n;const i=t=>({script:r(t.script),script_type:t.scriptType,filter:t.filter?n(t.filter):t.filter,script_search_mode:t.scriptSearchMode?t.scriptSearchMode:"prefix"});e.toSearchKey=i;e.toGetCellsSearchKey=t=>({...i(t),with_data:t.withData});e.toGetTransactionsSearchKey=t=>({...i(t),group_by_transaction:t.groupByTransaction})},556161:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toTip=e.toSearchKey=e.toSearchFilter=e.toScript=e.toOutPoint=e.toCellOutPut=void 0;e.toTip=t=>({blockHash:t.block_hash,blockNumber:t.block_number});const r=t=>({codeHash:t.code_hash,hashType:t.hash_type,args:t.args});e.toScript=r;e.toOutPoint=t=>({txHash:t.tx_hash,index:t.index});e.toCellOutPut=t=>({...t,lock:r(t.lock),type:t.type?r(t.type):void 0});const n=t=>({script:t.script?r(t.script):t.script,outputDataLenRange:t.output_data_len_range,outputCapacityRange:t.output_capacity_range,scriptLenRange:t.script_len_range,blockRange:t.block_range});e.toSearchFilter=n;e.toSearchKey=t=>({script:r(t.script),scriptType:t.script_type,filter:t.filter?n(t.filter):t.filter,scriptSearchMode:t.script_search_mode})},996582:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RPC=void 0;var n,i=r(214231),o=(n=r(496279))&&n.__esModule?n:{default:n},a=r(842591);e.RPC=class{constructor(t){this.uri=t}async getTip(){return i.utils.deepCamel(await s(this.uri,"get_tip"))}async getCells(t,e,r,n){const o=[(0,a.toGetCellsSearchKey)(t),e,r,n];return i.utils.deepCamel(await s(this.uri,"get_cells",o))}async getTransactions(t,e,r,n){const o=[(0,a.toGetTransactionsSearchKey)(t),e,r,n];return i.utils.deepCamel(await s(this.uri,"get_transactions",o))}async getIndexerInfo(){return i.utils.deepCamel(await s(this.uri,"get_indexer_info"))}};const s=async(t,e,r)=>{const n=await(0,o.default)(t,{method:"POST",body:JSON.stringify({id:0,jsonrpc:"2.0",method:e,params:r}),headers:{"Content-Type":"application/json"}});if(200!==n.status)throw new Error(`indexer request failed with HTTP code ${n.status}`);const i=await n.json();if(void 0!==i.error)throw new Error(`indexer request rpc failed with error: ${JSON.stringify(i.error)}`);return i.result}},607879:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHexStringBytes=e.generateSearchKey=void 0,e.requestBatch=f,e.requestBatchTransactionWithStatus=async function(t,e){if(0===e.length)return[];const r=e.map(((t,e)=>({id:e,jsonrpc:"2.0",method:"get_transaction",params:[t]})));return(await f(t,r)).map((t=>l.ResultFormatter.toTransactionWithStatus(t.result)))};var n,i=r(214231),o=(n=r(496279))&&n.__esModule?n:{default:n},a=r(356997),s=r(842591),u=r(556161),c=r(922641),l=r(39337);e.generateSearchKey=t=>{let e;const r={};let n,i="prefix";if(t.lock){const i=(0,c.unwrapScriptWrapper)(t.lock);if(e=(0,s.toScript)(i),n="lock",t.type&&"string"!==typeof t.type){const e=(0,c.unwrapScriptWrapper)(t.type);r.script=(0,s.toScript)(e)}}else if(t.type&&"string"!==typeof t.type){const r=(0,c.unwrapScriptWrapper)(t.type);e=(0,s.toScript)(r),n="type"}let o=null;if(t.fromBlock&&t.toBlock&&(o=[t.fromBlock,`0x${a.BI.from(t.toBlock).add(1).toString(16)}`]),o&&(r.block_range=o),t.outputDataLenRange&&(r.output_data_len_range=t.outputDataLenRange),t.outputCapacityRange&&(r.output_capacity_range=t.outputCapacityRange),t.scriptLenRange&&(r.script_len_range=t.scriptLenRange),t.scriptSearchMode&&(i=t.scriptSearchMode),!e)throw new Error("Either lock or type script must be provided!");if(!n)throw new Error("script_type must be provided");return(0,u.toSearchKey)({script:e,script_type:n,filter:r,script_search_mode:i})};e.getHexStringBytes=t=>(i.utils.assertHexString("",t),Math.ceil(t.substr(2).length/2));let p=0;async function f(t,e){if(!e.length)return[];const r=await(0,o.default)(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.map((t=>({id:p++,...t}))))});if(200!==r.status)throw new Error(`Indexer request failed with HTTP code ${r.status}`);const n=await r.json();if(void 0!==n.error)throw new Error(`indexer request rpc failed with error: ${JSON.stringify(n.error)}`);return n}},823255:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CKBIndexerTransactionCollector=void 0;var n=r(214231),i=r(922641),o=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(607879));function a(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(a=function(t){return t?r:e})(t)}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class u extends n.indexer.TransactionCollector{constructor(t,e,r,n){super(t,e,n),s(this,"getTransactionListFromRpc",(async t=>{const e=t.objects.map((t=>t.txHash));return await o.requestBatchTransactionWithStatus(this.CKBRpcUrl,e).then((e=>e.map(((e,r)=>{if(!this.filterOptions.skipMissing&&!e.transaction)throw new Error(`Transaction ${t.objects[r].txHash} is missing!`);return e}))))})),s(this,"isLockArgsLenMatched",((t,e)=>!e||("any"===e||(-1===e||o.getHexStringBytes(t)===e)))),s(this,"isCellScriptArgsValid",(t=>{if(this.queries.lock){const e=(0,i.instanceOfScriptWrapper)(this.queries.lock)?this.queries.lock.argsLen:this.queries.argsLen;if(!this.isLockArgsLenMatched(t.lock.args,e))return!1}if(this.queries.type&&"empty"!==this.queries.type){var e;const r=(0,i.instanceOfScriptWrapper)(this.queries.type)?this.queries.type.argsLen:this.queries.argsLen;if(!this.isLockArgsLenMatched(null===(e=t.type)||void 0===e?void 0:e.args,r))return!1}return!this.queries.type||"empty"!==this.queries.type||!t.type})),s(this,"filterByIoType",((t,e)=>"both"===e?t:"input"===e||"output"===e?t.filter((t=>t.ioType===e||"both"===t.ioType)):t)),s(this,"filterByTypeIoTypeAndLockIoType",((t,e)=>{let r=t;return(0,i.instanceOfScriptWrapper)(e.lock)&&e.lock.ioType&&(r=this.filterByIoType(r,e.lock.ioType)),(0,i.instanceOfScriptWrapper)(e.type)&&e.type.ioType&&(r=this.filterByIoType(r,e.type.ioType)),r})),this.indexer=t,this.queries=e,this.CKBRpcUrl=r,this.options=n;this.filterOptions={skipMissing:!1,includeStatus:!0,...this.options}}static asBaseTransactionCollector(t){return class extends n.indexer.TransactionCollector{constructor(e,r,n){return super(e,r,n),new u(e,r,t,n)}}}async fetchIndexerTransaction(t,e){const r={sizeLimit:t.bufferSize,order:t.order};e&&(r.lastCursor=e);let n={objects:[],lastCursor:""};return(0,i.instanceOfScriptWrapper)(t.lock)&&(0,i.instanceOfScriptWrapper)(t.type)?(n=await this.getTransactionByLockAndTypeIndependent(r),e=n.lastCursor):(n=await this.indexer.getTransactions(o.generateSearchKey(t),r),e=n.lastCursor),n.objects=this.filterByTypeIoTypeAndLockIoType(n.objects,t),n}getResolvedTransactionRequestPayload(t,e){const r=[];return t.forEach(((t,n)=>{const i=e.objects[n];if("input"===i.ioType){const e=t.transaction.inputs[Number(i.ioIndex)].previousOutput;r.push(e.txHash)}})),r}getResolvedCell(t,e,r){if("input"!==r.ioType)return t.transaction.outputs[Number(r.ioIndex)];{const n=t.transaction.inputs[Number(r.ioIndex)].previousOutput,i=e.find((t=>t.transaction.hash===n.txHash));if(!i)throw new Error("Impossible: can NOT find resolved transaction!");return i.transaction.outputs[Number(n.index)]}}filterTransaction(t,e,r){return t.filter(((t,n)=>{const i=this.getResolvedCell(t,e,r.objects[n]);return this.isCellScriptArgsValid(i)})).map((t=>({transaction:t.transaction,txStatus:t.txStatus,cycles:t.cycles,timeAddedToPool:t.timeAddedToPool})))}async getTransactions(t){const e=await this.fetchIndexerTransaction(this.queries,t);if(t=e.lastCursor,0===e.objects.length)return{objects:[],lastCursor:t};const r=await this.getTransactionListFromRpc(e),n=this.getResolvedTransactionRequestPayload(r,e),i=await o.requestBatchTransactionWithStatus(this.CKBRpcUrl,n);return{objects:this.filterTransaction(r,i,e),lastCursor:t}}async getTransactionByLockAndTypeIndependent(t){const e={...t},r={...t};if(t.lastCursor){const[n,i]=t.lastCursor.split("-");r.lastCursor=n,e.lastCursor=i}const n={...this.queries,type:void 0},i=await this.indexer.getTransactions(o.generateSearchKey(n),e),a={...this.queries,lock:void 0},s=await this.indexer.getTransactions(o.generateSearchKey(a),r);return{objects:((t,e)=>{const r=[];return t.forEach((t=>{const n=e.find((e=>e.txHash===t.txHash));if(n){const e="output"===t.ioType?t:n;r.push({...e,ioType:"both"})}})),r})(s.objects,i.objects),lastCursor:i.lastCursor+"-"+s.lastCursor}}async count(){let t;const e=async()=>{const e=await this.getTransactions(t);return t=e.lastCursor,e.objects};let r=0,n=await e();if(0===n.length)return 0;let i=e(),o=0,a=0;for(;;)if(this.queries.skip&&a<this.queries.skip?a++:r+=1,o++,o===n.length){if(o=0,n=await i,0===n.length)break;i=e()}return r}async getTransactionHashes(){let t;const e=async()=>{const e=await this.getTransactions(t);return t=e.lastCursor,e.objects},r=[];let n=await e();if(0===n.length)return[];let i=e(),o=0,a=0;for(;;)if(this.queries.skip&&a<this.queries.skip?a++:n[o].transaction.hash&&r.push(n[o].transaction.hash),o++,o===n.length){if(o=0,n=await i,0===n.length)break;i=e()}return r}async*collect(){let t;const e=async()=>{const e=await this.getTransactions(t);return t=e.lastCursor,e.objects};let r=await e();if(0===r.length)return;let n=e(),i=0,o=0;for(;;)if(this.queries.skip&&o<this.queries.skip?o++:this.filterOptions.includeStatus?yield r[i]:yield r[i].transaction,i++,i===r.length){if(i=0,r=await n,0===r.length)break;n=e()}}}e.CKBIndexerTransactionCollector=u},633079:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndexerEmitter=void 0;var n=r(22699);class i extends n.EventEmitter{}e.IndexerEmitter=i},459460:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBytesCodec=o,e.createFixedBytesCodec=function(t){const e=t.byteLength;return{__isFixedCodec__:!0,byteLength:e,...o({pack:r=>{const i=t.pack(r);return(0,n.assertBufferLength)(i,e),i},unpack:r=>((0,n.assertBufferLength)(r,e),t.unpack(r))})}},e.isFixedCodec=function(t){return(0,n.isObjectLike)(t)&&!!t.__isFixedCodec__};var n=r(915445),i=r(432670);function o(t){return{pack:e=>t.pack(e),unpack:e=>t.unpack((0,i.bytify)(e))}}},133686:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WitnessArgs=e.BytesVec=e.BytesOpt=e.Bytes=e.Byte32Vec=e.Byte32=void 0,e.WitnessArgsOf=f,e.createFixedHexBytesCodec=a;var n=r(459460),i=r(432670),o=r(847702);function a(t){return(0,n.createFixedBytesCodec)({byteLength:t,pack:t=>(0,i.bytify)(t),unpack:t=>(0,i.hexify)(t)})}const s=(0,o.byteVecOf)({pack:i.bytify,unpack:i.hexify});e.Bytes=s;const u=(0,o.option)(s);e.BytesOpt=u;const c=(0,o.vector)(s);e.BytesVec=c;const l=a(32);e.Byte32=l;const p=(0,o.vector)(l);function f(t){return(0,o.table)({lock:(0,o.option)((0,o.byteVecOf)(t.lock)),input_type:(0,o.option)((0,o.byteVecOf)(t.input_type)),output_type:(0,o.option)((0,o.byteVecOf)(t.output_type))},["lock","input_type","output_type"])}e.Byte32Vec=p;const d=(0,n.createBytesCodec)({pack:i.bytify,unpack:i.hexify}),h=f({lock:d,input_type:d,output_type:d});e.WitnessArgs=h},432670:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytify=c,e.bytifyRawString=function(t){(0,n.assertUtf8String)(t);const e=new ArrayBuffer(t.length),r=new DataView(e);for(let n=0;n<t.length;n++){const e=t.charCodeAt(n);r.setUint8(n,e)}return new Uint8Array(e)},e.concat=function(...t){const e=t.map(c),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);let i=0;return e.forEach((t=>{n.set(t,i),i+=t.length})),n},e.equal=function(t,e){const r=c(t),n=c(e);return function(t,e){if(t.length!==e.length)return!1;for(let r=t.length;-1<r;r-=1)if(t[r]!==e[r])return!1;return!0}(r,n)},e.hexify=function(t){let e="";const r=c(t);for(let n=0;n<r.length;n++)e+=l[r[n]];return"0x"+e};var n=r(915445);const i="0".charCodeAt(0),o="9".charCodeAt(0),a="A".charCodeAt(0),s="F".charCodeAt(0),u="a".charCodeAt(0);function c(t){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return Uint8Array.from(t);if("string"===typeof t)return function(t){(0,n.assertHexString)(t);const e=Uint8Array.from({length:t.length/2-1});for(let r=2,n=0;r<t.length;r+=2,n++){const c=t.charCodeAt(r),l=t.charCodeAt(r+1),p=c<=o?c-i:c<=s?c-a+10:c-u+10,f=l<=o?l-i:l<=s?l-a+10:l-u+10;e[n]=p<<4|f}return e}(t);if(Array.isArray(t))return function(t){for(let e=0;e<t.length;e++){const r=t[e];if(r<0||r>255||!Number.isInteger(r))throw new Error("invalid ArrayLike, all elements must be 0-255")}return Uint8Array.from(t)}(t);throw new Error(`Cannot convert ${t}`)}const l=Array.from({length:256}).map(((t,e)=>e.toString(16).padStart(2,"0")))},284394:(t,e)=>{"use strict";function r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.CodecExecuteError=e.CodecBaseParseError=e.CODEC_OPTIONAL_PATH=void 0,e.isCodecExecuteError=function(t){return t instanceof Error&&t.name===o};const n="__lc_option__";e.CODEC_OPTIONAL_PATH=n;class i extends Error{constructor(t,e){super(t),this.expectedType=e}}e.CodecBaseParseError=i;const o="CodecExecuteError";class a extends Error{constructor(t){super(),r(this,"name",o),r(this,"keys",[]),this.origin=t}updateKey(t){this.keys.push(t),this.message=this.getPackErrorMessage()}getPackErrorMessage(){var t;const e=this.keys.reduceRight(((t,e,r)=>t+(e=e===n?0===r?"?":"?.":"number"===typeof e?`[${e}]`:`.${e}`)),"input");return`Expect type ${this.origin.expectedType} at ${e} but got error: ${this.origin.message}\n    ${null===(t=this.origin.stack)||void 0===t?void 0:t.replace(/Error:.+?\n/,"")}\n    `}}e.CodecExecuteError=a},65681:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createArrayCodec",{enumerable:!0,get:function(){return n.createArrayCodec}}),Object.defineProperty(e,"createNullableCodec",{enumerable:!0,get:function(){return n.createNullableCodec}}),Object.defineProperty(e,"createObjectCodec",{enumerable:!0,get:function(){return n.createObjectCodec}}),Object.defineProperty(e,"enhancePack",{enumerable:!0,get:function(){return n.enhancePack}});var n=r(482186)},482186:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createArrayCodec=function(t){return{pack:e=>e.map(((e,r)=>(0,n.trackCodeExecuteError)(r,(()=>t.pack(e))))),unpack:e=>e.map((e=>t.unpack(e)))}},e.createNullableCodec=function(t){return{pack:e=>null==e?e:(0,n.trackCodeExecuteError)(i.CODEC_OPTIONAL_PATH,(()=>t.pack(e))),unpack:e=>null==e?e:t.unpack(e)}},e.createObjectCodec=function(t){const e=Object.entries(t);return{pack:t=>{const r={};return e.forEach((([e,i])=>{Object.assign(r,{[e]:(0,n.trackCodeExecuteError)(e,(()=>i.pack(t[e])))})})),r},unpack:t=>{const r={};return e.forEach((([e,n])=>{Object.assign(r,{[e]:n.unpack(t[e])})})),r}}},e.enhancePack=function(t,e,r){return{pack:r=>e(t.pack(r)),unpack:e=>t.unpack(r(e))}};var n=r(915445),i=r(284394)},412397:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={createBytesCodec:!0,createFixedBytesCodec:!0,isFixedCodec:!0,bytes:!0,number:!0,molecule:!0};e.bytes=void 0,Object.defineProperty(e,"createBytesCodec",{enumerable:!0,get:function(){return i.createBytesCodec}}),Object.defineProperty(e,"createFixedBytesCodec",{enumerable:!0,get:function(){return i.createFixedBytesCodec}}),Object.defineProperty(e,"isFixedCodec",{enumerable:!0,get:function(){return i.isFixedCodec}}),e.number=e.molecule=void 0;var i=r(459460),o=r(65681);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}));var a=l(r(432670));e.bytes=a;var s=l(r(637353));e.number=s;var u=l(r(847702));function c(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(c=function(t){return t?r:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=c(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}e.molecule=u},864110:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.byteArrayOf=s,e.byteOf=function(t){return s({...t,byteLength:1})},e.byteVecOf=function(t){return(0,o.createBytesCodec)({pack(e){const r=t.pack(e),n=a.Uint32LE.pack(r.byteLength);return(0,i.concat)(n,r)},unpack(e){(0,n.assertMinBufferLength)(e,4);const r=a.Uint32LE.unpack(e.slice(0,4));return(0,n.assertBufferLength)(e.slice(4),r),t.unpack(e.slice(4))}})};var n=r(915445),i=r(432670),o=r(459460),a=r(637353);function s(t){const e=t.byteLength;return(0,o.createFixedBytesCodec)({byteLength:e,pack:e=>t.pack(e),unpack:e=>t.unpack(e)})}},847702:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"array",{enumerable:!0,get:function(){return i.array}}),Object.defineProperty(e,"byteArrayOf",{enumerable:!0,get:function(){return n.byteArrayOf}}),Object.defineProperty(e,"byteOf",{enumerable:!0,get:function(){return n.byteOf}}),Object.defineProperty(e,"byteVecOf",{enumerable:!0,get:function(){return n.byteVecOf}}),Object.defineProperty(e,"option",{enumerable:!0,get:function(){return i.option}}),Object.defineProperty(e,"struct",{enumerable:!0,get:function(){return i.struct}}),Object.defineProperty(e,"table",{enumerable:!0,get:function(){return i.table}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return i.union}}),Object.defineProperty(e,"vector",{enumerable:!0,get:function(){return i.vector}});var n=r(864110),i=r(458211)},458211:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=u,e.dynvec=f,e.fixvec=p,e.option=function(t){return(0,n.createBytesCodec)({pack(e){const r=(0,s.createNullableCodec)(t);return void 0!==e&&null!==e?r.pack(e):Uint8Array.from([])},unpack(e){if(0!==e.byteLength)return t.unpack(e)}})},e.struct=function(t,e){l(t,e);const r=(0,s.createObjectCodec)(t);return(0,n.createFixedBytesCodec)({byteLength:e.reduce(((e,r)=>e+t[r].byteLength),0),pack(t){const n=r.pack(t);return e.reduce(((t,e)=>(0,o.concat)(t,n[e])),Uint8Array.from([]))},unpack(r){const n={};let i=0;return e.forEach((e=>{const o=t[e],a=r.slice(i,i+o.byteLength);Object.assign(n,{[e]:o.unpack(a)}),i+=o.byteLength})),n}})},e.table=function(t,e){return l(t,e),(0,n.createBytesCodec)({pack(r){const n=4+4*e.length,a=(0,s.createObjectCodec)(t).pack(r),u=e.reduce(((t,e)=>{const r=a[e],n=i.Uint32LE.pack(t.offset);return{header:(0,o.concat)(t.header,n),body:(0,o.concat)(t.body,r),offset:t.offset+r.byteLength}}),{header:new ArrayBuffer(0),body:new ArrayBuffer(0),offset:n}),c=i.Uint32LE.pack(u.header.byteLength+u.body.byteLength+4);return(0,o.concat)(c,u.header,u.body)},unpack(r){const n=i.Uint32LE.unpack(r.slice(0,4));if(n!==r.byteLength)throw new Error(`Invalid buffer size, read from header: ${n}, actual: ${r.byteLength}`);if(n<=4||0===e.length)return{};{const o=e.map(((t,e)=>i.Uint32LE.unpack(r.slice(4+4*e,8+4*e))));o.push(n);const a={};for(let n=0;n<o.length-1;n++){const i=o[n],s=o[n+1],u=e[n],c=t[u],l=r.slice(i,s);Object.assign(a,{[u]:c.unpack(l)})}return a}}})},e.union=function(t,e){if(l(t,Array.isArray(e)?e:Object.keys(e)),!Array.isArray(e)){const t=Object.values(e);if(t.length!==new Set(t).size)throw new Error(`Duplicated id in union: ${t.join(", ")}`)}return(0,n.createBytesCodec)({pack(r){const n=Object.keys(t),s=r.type,u=`Union(${n.join(" | ")})`;if("string"!==typeof s)throw new a.CodecBaseParseError("Invalid type in union, type must be a string",u);const c=Array.isArray(e)?e.indexOf(s):e[s];if(c<0)throw new a.CodecBaseParseError(`Unknown union type: ${String(r.type)}`,u);const l=i.Uint32LE.pack(c),p=t[s].pack(r.value);return(0,o.concat)(l,p)},unpack(r){const n=i.Uint32LE.unpack(r.slice(0,4)),o=(()=>{if(Array.isArray(e))return e[n];const t=Object.entries(e).find((([,t])=>t===n));return null===t||void 0===t?void 0:t[0]})();if(!o)throw new Error(`Unknown union field id: ${n}, only ${e} are allowed`);return{type:o,value:t[o].unpack(r.slice(4))}}})},e.vector=function(t){if((0,n.isFixedCodec)(t))return p(t);return f(t)};var n=r(459460),i=r(637353),o=r(432670),a=r(284394),s=r(65681);function u(t,e){const r=(0,s.createArrayCodec)(t);return(0,n.createFixedBytesCodec)({byteLength:t.byteLength*e,pack(t){const e=r.pack(t);return(0,o.concat)(...e)},unpack(e){const r=[],n=t.byteLength;for(let i=0;i<e.byteLength;i+=n)r.push(t.unpack(e.slice(i,i+n)));return r}})}function c(t,e){return t.filter((t=>!e.includes(t)))}function l(t,e){const r=Object.keys(t),n=c(r,e),i=c(e,r);if(n.length>0||i.length>0)throw new Error(`Invalid shape: missing fields ${n.join(", ")} or shape ${i.join(", ")}`)}function p(t){return(0,n.createBytesCodec)({pack(e){const r=(0,s.createArrayCodec)(t);return(0,o.concat)(i.Uint32LE.pack(e.length),r.pack(e).reduce(((t,e)=>(0,o.concat)(t,e)),new ArrayBuffer(0)))},unpack(e){if(e.byteLength<4)throw new Error(`fixvec: buffer is too short, expected at least 4 bytes, got ${e.byteLength}`);const r=i.Uint32LE.unpack(e.slice(0,4));return u(t,r).unpack(e.slice(4))}})}function f(t){return(0,n.createBytesCodec)({pack(e){const r=(0,s.createArrayCodec)(t).pack(e).reduce(((t,e)=>{const r=i.Uint32LE.pack(t.offset);return{header:(0,o.concat)(t.header,r),body:(0,o.concat)(t.body,e),offset:t.offset+e.byteLength}}),{header:new ArrayBuffer(0),body:new ArrayBuffer(0),offset:4+4*e.length}),n=i.Uint32LE.pack(r.header.byteLength+r.body.byteLength+4);return(0,o.concat)(n,r.header,r.body)},unpack(e){const r=i.Uint32LE.unpack(e.slice(0,4));if(r!==e.byteLength)throw new Error(`Invalid buffer size, read from header: ${r}, actual: ${e.byteLength}`);if(r<=4)return[];{const n=i.Uint32LE.unpack(e.slice(4,8)),o=new Array((n-4)/4).fill(1).map(((t,r)=>i.Uint32LE.unpack(e.slice(4+4*r,8+4*r))));o.push(r);const a=[];for(let r=0;r<o.length-1;r++){const n=o[r],i=o[r+1],s=e.slice(n,i);a.push(t.unpack(s))}return a}}})}},637353:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(703376);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))},703376:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BI",{enumerable:!0,get:function(){return n.BI}}),Object.defineProperty(e,"BIish",{enumerable:!0,get:function(){return n.BIish}}),e.Uint8=e.Uint64LE=e.Uint64BE=e.Uint64=e.Uint512LE=e.Uint512BE=e.Uint512=e.Uint32LE=e.Uint32BE=e.Uint32=e.Uint256LE=e.Uint256BE=e.Uint256=e.Uint16LE=e.Uint16BE=e.Uint16=e.Uint128LE=e.Uint128BE=e.Uint128=void 0;var n=r(356997),i=r(459460),o=r(284394);function a(t,e=!1){const r=s(t,e);return{__isFixedCodec__:!0,byteLength:t,pack:t=>r.pack(t),unpack:t=>r.unpack(t).toNumber()}}const s=(t,e=!1)=>{const r=n.BI.from(1).shl(8*t).sub(1);return(0,i.createFixedBytesCodec)({byteLength:t,pack(i){let a=e?"LE":"BE";t<=1&&(a="");const s=`Uint${8*t}${a}`;if("number"===typeof i&&!Number.isSafeInteger(i))throw new o.CodecBaseParseError(`${i} is not a safe integer`,s);let u=n.BI.from(i);!function(t,e,r,i){if((t=n.BI.from(t)).lt(e)||t.gt(r))throw new o.CodecBaseParseError(`Value must be between ${e.toString()} and ${r.toString()}, but got ${t.toString()}`,i)}(u,0,r,s);const c=new DataView(new ArrayBuffer(t));for(let r=0;r<t;r++)e?c.setUint8(r,u.and(255).toNumber()):c.setUint8(t-r-1,u.and(255).toNumber()),u=u.shr(8);return new Uint8Array(c.buffer)},unpack:r=>{const i=new DataView(Uint8Array.from(r).buffer);let o=n.BI.from(0);for(let a=0;a<t;a++)o=e?o.or(n.BI.from(i.getUint8(a)).shl(8*a)):o.shl(8).or(i.getUint8(a));return o}})},u=a(1);e.Uint8=u;const c=a(2,!0);e.Uint16LE=c;const l=a(2);e.Uint16BE=l;const p=c;e.Uint16=p;const f=a(4,!0);e.Uint32LE=f;const d=a(4);e.Uint32BE=d;const h=f;e.Uint32=h;const g=s(8,!0);e.Uint64LE=g;const y=s(8);e.Uint64BE=y;const _=g;e.Uint64=_;const m=s(16,!0);e.Uint128LE=m;const b=s(16);e.Uint128BE=b;const v=m;e.Uint128=v;const w=s(32,!0);e.Uint256LE=w;const S=s(32);e.Uint256BE=S;const k=w;e.Uint256=k;const O=s(64,!0);e.Uint512LE=O;const C=s(64);e.Uint512BE=C;const E=O;e.Uint512=E},915445:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertBufferLength=function(t,e){if(t.byteLength!==e)throw new Error(`Invalid buffer length: ${t.byteLength}, should be ${e}`)},e.assertHexDecimal=function(t,e){if(l(t),2===t.length)throw new Error("Invalid hex decimal length, should be at least 1 character, the '0x' is incorrect, should be '0x0'");const r=t.length;if("number"===typeof e&&r>2*e+2)throw new Error(`Invalid hex decimal length, should be less than ${e} bytes, got ${r/2-1} bytes`);p(t)},e.assertHexString=function(t,e){l(t);const r=t.length;if(r%2)throw new Error("Invalid hex string length, must be even!");if("number"===typeof e&&r!==2*e+2)throw new Error("Invalid hex string length, not match with byteLength!");p(t)},e.assertMinBufferLength=function(t,e){if(t.byteLength<e)throw new Error(`Invalid buffer length: ${t.byteLength}, should be at least ${e}`)},e.assertUtf8String=function(t){for(let e=0;e<t.length;e++){if(t.charCodeAt(e)>255)throw new Error("Invalid UTF-8 raw string!")}},e.isObjectLike=function(t){return!!t&&"object"===typeof t},e.trackCodeExecuteError=function(t,e){try{return e()}catch(r){const e=(0,n.isCodecExecuteError)(r)?r:new n.CodecExecuteError(r);throw e.updateKey(t),e}};var n=r(284394);const i="0".charCodeAt(0),o="9".charCodeAt(0),a="A".charCodeAt(0),s="F".charCodeAt(0),u="a".charCodeAt(0),c="f".charCodeAt(0);function l(t){if(!t||!t.startsWith("0x"))throw new Error("Invalid hex string")}function p(t){const e=t.length;for(let r=2;r<e;r++){const e=t[r].charCodeAt(0);if(!(e>=i&&e<=o||e>=u&&e<=c||e>=a&&e<=s))throw new Error(`Invalid hex character ${t[r]} in the string ${t}`)}}},408425:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CellCollector=void 0,e.checkLimit=_,e.default=void 0,e.injectCapacity=b,e.prepareSigningEntries=v,e.setupInputCell=y,e.setupOutputCell=m,e.withdraw=w;var n=r(214231),i=r(412397),o=r(486532),a=r(587472),s=r(727623),u=r(356997),c=r(491686),l=r(78102),p=r(562);const{ScriptValue:f}=n.values,{CKBHasher:d,ckbHash:h}=n.utils,g=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,o.getConfig)(),this.fromScript=(0,c.parseFromInfo)(t,{config:r}).fromScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,l.isAcpScript)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function y(t,e,r,{config:a,defaultWitness:s="0x",since:u}={}){a=a||(0,o.getConfig)();const c=e.cellOutput.lock;if(!(0,l.isAcpScript)(c,a))throw new Error("Not anyone-can-pay input!");t=t.update("inputs",(t=>t.push(e))),u&&(t=t.update("inputSinces",(e=>e.set(t.get("inputs").size-1,u)))),t=t.update("witnesses",(t=>t.push(s)));const p={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=(t=t.update("outputs",(t=>t.push(p)))).update("fixedEntries",(e=>e.push({field:"outputs",index:t.get("outputs").size-1})));const d=a.SCRIPTS.ANYONE_CAN_PAY;if(!d)throw new Error("ANYONE_CAN_PAY script not defined in config!");const h={txHash:d.TX_HASH,index:d.INDEX},g=(t=(0,l.addCellDep)(t,{outPoint:h,depType:d.DEP_TYPE})).get("inputs").findIndex((t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(c,{validate:!1}))));if(-1!==g){for(;g>=t.get("witnesses").size;)t=t.update("witnesses",(t=>t.push("0x")));let e=t.get("witnesses").get(g);const r={lock:l.SECP_SIGNATURE_PLACEHOLDER};if("0x"!==e){const t=n.blockchain.WitnessArgs.unpack(i.bytes.bytify(e)),o=t.lock;if(o&&r.lock&&!i.bytes.equal(o,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const a=t.inputType;a&&(r.inputType=a);const s=t.outputType;s&&(r.outputType=s)}e=i.bytes.hexify(n.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",(t=>t.set(g,e)))}return t}function _(t,e){const r=u.BI.from(e);let n,i;if(t.length>=46&&(n=u.BI.from(10).pow("0x"+t.slice(44,46))),t.length>=44){const e=u.BI.from(10).pow("0x"+t.slice(42,44)),r=u.BI.from(10).pow(8);i=e.mul(r)}if(i&&n){if(r.lt(i))throw new Error(`capacity(${e}) less than toAddress minimal capacity limit(${i}), and amount less then toAddress minimal amount limit(${n})! If you want to transfer sudt, maybe sudt.transfer can help you.`)}else if(i&&r.lt(i))throw new Error(`capacity(${e}) less than toAddress minimal capacity limit(${i})!`)}async function m(t,e,{config:r}={}){r=r||(0,o.getConfig)();const n=e.cellOutput.lock,i=u.BI.from(e.cellOutput.capacity);_(n.args,i.toString());const s=t.get("cellProvider");if(!s)throw new Error("Cell Provider is missing!");const c=(0,a.generateAddress)(n,{config:r}),p=new g(c,s,{config:r}),f=(await p.collect().next()).value;let d=i;if(f&&(d=i.add(f.cellOutput.capacity),t=(t=t.update("inputs",(t=>t.push(f)))).update("witnesses",(t=>t.push("0x")))),e.cellOutput.capacity="0x"+d.toString(16),t=t.update("outputs",(t=>t.push(e))),f){const e=r.SCRIPTS.ANYONE_CAN_PAY;if(!e)throw new Error("ANYONE_CAN_PAY script not defined in config!");const n={txHash:e.TX_HASH,index:e.INDEX};t=(0,l.addCellDep)(t,{outPoint:n,depType:e.DEP_TYPE})}return t}async function b(t,e,r,n,{config:i}={}){if(i=i||(0,o.getConfig)(),r>=e.get("outputs").size)throw new Error("Invalid output index!");let c=u.BI.from(n);if(!i.SCRIPTS.ANYONE_CAN_PAY)throw new Error("Provided config does not have ANYONE_CAN_PAY script setup!");const l=t.fromScript,p=e.get("fixedEntries").filter((({field:t})=>"outputs"===t)).maxBy((({index:t})=>t));let d=p?p.index+1:0;for(;d<e.get("outputs").size&&c.gt(0);d++){const t=e.get("outputs").get(d);if(new f(t.cellOutput.lock,{validate:!1}).equals(new f(l,{validate:!1}))){const e=u.BI.from(t.cellOutput.capacity),r=e.sub((0,a.minimalCellCapacityCompatible)(t)),n=c.gte(r)?r:c;c=c.sub(n),t.cellOutput.capacity="0x"+e.sub(n).toString(16)}}e=e.update("outputs",(t=>t.filter((t=>!u.BI.from(t.cellOutput.capacity).eq(0)))));const h=t=>`${t.outPoint.txHash}_${t.outPoint.index}`;if(c.gt(0)){const r={cellOutput:{capacity:"0x0",lock:l,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let n=u.BI.from(0);const o=u.BI.from((0,a.minimalCellCapacityCompatible)(r));let p=(0,s.Set)();for(const t of e.get("inputs"))p=p.add(h(t));for await(const a of t.collect()){if(p.has(h(a)))continue;const t=(e=await y(e,a,0,{config:i})).get("outputs").size-1,s=(e=e.update("outputs",(e=>e.remove(t)))).get("fixedEntries").findIndex((e=>"outputs"===e.field&&e.index===t));s>=0&&(e=e.update("fixedEntries",(t=>t.remove(s))));const l=u.BI.from(a.cellOutput.capacity);let f=l;if(f.gt(c)&&(f=c),c=c.sub(f),n=n.add(l.sub(f)),c.eq(0)&&n.gte(o))break;r.cellOutput.capacity="0x"+n.toString(16),e=e.update("outputs",(t=>t.push(r)))}if(c.gt(0)||n<o)throw new Error("Not enough capacity in from address!");r.cellOutput.capacity="0x"+n.toString(16),e=e.update("outputs",(t=>t.push(r)))}return e}function v(t,{config:e}={}){const r="ANYONE_CAN_PAY",i=(e=e||(0,o.getConfig)()).SCRIPTS[r];if(!i)throw new Error(`Provided config does not have ${r} script setup!`);let c=(0,s.Set)();const g=(0,a.createTransactionFromSkeleton)(t),y=h(n.blockchain.RawTransaction.pack(g)),_=t.get("inputs"),m=t.get("witnesses");let b=t.get("signingEntries");for(let o=0;o<_.size;o++){const e=_.get(o);if(i.CODE_HASH===e.cellOutput.lock.codeHash&&i.HASH_TYPE===e.cellOutput.lock.hashType&&!c.has(e.cellOutput.lock.args)){c=c.add(e.cellOutput.lock.args);const r=t.get("outputs").filter((t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(e.cellOutput.lock,{validate:!1})))),i=r.map((t=>u.BI.from(t.cellOutput.capacity))).reduce(((t,e)=>t.add(e)),u.BI.from(0)),a=r.filter((t=>"0x"!==t.data)).map((t=>(0,p.unpackAmount)(t.data))).reduce(((t,e)=>t.add(e)),u.BI.from(0)),s=_.filter((t=>new f(t.cellOutput.lock,{validate:!1}).equals(new f(e.cellOutput.lock,{validate:!1})))),h=s.map((t=>u.BI.from(t.cellOutput.capacity))).reduce(((t,e)=>t.add(e)),u.BI.from(0)),g=s.filter((t=>"0x"!==t.data)).map((t=>u.BI.from((0,p.unpackAmount)(t.data)))).reduce(((t,e)=>t.add(e)),u.BI.from(0));if(h.lte(i)&&g.lte(a))continue;const v=new n.values.ScriptValue(e.cellOutput.lock,{validate:!1}),w=new d;if(w.update(y),o>=m.size)throw new Error(`The first witness in the script group starting at input index ${o} does not exist, maybe some other part has invalidly tampered the transaction?`);(0,l.hashWitness)(w,m.get(o));for(let t=o+1;t<_.size&&t<m.size;t++){const e=_.get(t);v.equals(new n.values.ScriptValue(e.cellOutput.lock,{validate:!1}))&&(0,l.hashWitness)(w,m.get(t))}for(let t=_.size;t<m.size;t++)(0,l.hashWitness)(w,m.get(t));const S={type:"witness_args_lock",index:o,message:w.digestHex()};b=b.push(S)}}return t=t.set("signingEntries",b)}async function w(t,e,r,n,{config:i}={}){if(i=i||(0,o.getConfig)(),!(0,l.isAcpScript)(e.cellOutput.lock,i))throw new Error("fromInput is not a ANYONE_CAN_PAY cell!");const s=u.BI.from(n),c=u.BI.from(e.cellOutput.capacity),p=u.BI.from((0,a.minimalCellCapacityCompatible)(e));if(!(s.gte(0)&&s.lte(c.sub(p))||s.eq(c)))throw new Error(`capacity must be in [0, ${c.sub(p)}] or ${c} !`);const f=(0,a.parseAddress)(r,{config:i}),d={cellOutput:{capacity:"0x"+n.toString(16),lock:f,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};if((0,l.isAcpScript)(f,i)){_(f.args,n);const e=t.get("cellProvider");if(!e)throw new Error("Cell Provider is missing!");const o=new g(r,e,{config:i}),a=(await o.collect().next()).value;if(!a)throw new Error("toAddress ANYONE_CAN_PAY input not found!");const u=s.add(a.cellOutput.capacity);d.cellOutput.capacity="0x"+u.toString(16),t=(t=t.update("inputs",(t=>t.push(a)))).update("witnesses",(t=>t.push("0x")))}t=t.update("outputs",(t=>t.push(d)));const h=(t=await y(t,e,(0,a.generateAddress)(e.cellOutput.lock,{config:i}),{config:i})).get("outputs").size-1,m=(t=t.update("outputs",(t=>t.remove(h)))).get("fixedEntries").findIndex((t=>"outputs"===t.field&&t.index===h));return m>=0&&(t=t.update("fixedEntries",(t=>t.remove(m)))),s.eq(c)||(t=t.update("outputs",(t=>t.push({cellOutput:{capacity:"0x"+c.sub(n).toString(16),lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data})))),t}e.CellCollector=g;var S={CellCollector:g,setupInputCell:y,setupOutputCell:m,injectCapacity:b,prepareSigningEntries:v,withdraw:w};e.default=S},614466:(t,e,r)=>{"use strict";var n=r(348834).Buffer;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.injectCapacity=O,e.payFee=C,e.payFeeByFeeRate=A,e.prepareSigningEntries=E,e.registerCustomLockScriptInfos=w,e.setupInputCell=T,e.transfer=k;var i=r(587472),o=_(r(635489)),a=r(491686),s=_(r(152957)),u=r(486532),c=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=y(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(61049)),l=r(214231),p=_(r(408425)),f=r(727623),d=r(78102),h=r(356997),g=_(r(860173));function y(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(y=function(t){return t?r:e})(t)}function _(t){return t&&t.__esModule?t:{default:t}}const{ScriptValue:m}=l.values;function b(t,e){console.log(`[${t}] ${e}`)}const v={configHashCode:0,_predefinedInfos:[],_customInfos:[],get infos(){return[...this._predefinedInfos,...this._customInfos]}};function w(t){v._customInfos=t}function S({config:t}={}){t=t||(0,u.getConfig)();const e=()=>{var e,r,n,i;const a=null===(e=t)||void 0===e?void 0:e.SCRIPTS.SECP256K1_BLAKE160,u=null===(r=t)||void 0===r?void 0:r.SCRIPTS.SECP256K1_BLAKE160_MULTISIG,c=null===(n=t)||void 0===n?void 0:n.SCRIPTS.ANYONE_CAN_PAY,l=null===(i=t)||void 0===i?void 0:i.SCRIPTS.OMNILOCK,f=[];return a?f.push({codeHash:a.CODE_HASH,hashType:a.HASH_TYPE,lockScriptInfo:s.default}):b("warn","SECP256K1_BLAKE160 script info not found in config!"),u?f.push({codeHash:u.CODE_HASH,hashType:u.HASH_TYPE,lockScriptInfo:o.default}):b("warn","SECP256K1_BLAKE160_MULTISIG script info not found in config!"),c?f.push({codeHash:c.CODE_HASH,hashType:c.HASH_TYPE,lockScriptInfo:p.default}):b("warn","ANYONE_CAN_PAY script info not found in config!"),l?f.push({codeHash:l.CODE_HASH,hashType:l.HASH_TYPE,lockScriptInfo:g.default}):b("warn","OMNILOCK script info not found in config!"),f},r=l.utils.hashCode(n.from(JSON.stringify(t)));0===v.infos.length?(v._predefinedInfos=e(),v.configHashCode=r):r!==v.configHashCode&&(b("warn","`config` changed, regenerate lockScriptInfos!"),v._predefinedInfos=e(),v.configHashCode=r)}async function k(t,e,r,n,o,a,{config:s,useLocktimeCellsFirst:l=!0,LocktimePoolCellCollector:p=c.CellCollector}={}){var f;s=s||(0,u.getConfig)();const d=h.BI.from(n);if(!r)throw new Error("You must provide a to address!");const g=(0,i.parseAddress)(r,{config:s}),y={cellOutput:{capacity:"0x"+d.toString(16),lock:g,type:void 0},data:"0x"};S({config:s});const _=v.infos.find((t=>t.codeHash===g.codeHash&&t.hashType===g.hashType));return t=_&&null!==(f=_.lockScriptInfo)&&void 0!==f&&f.setupOutputCell?await _.lockScriptInfo.setupOutputCell(t,y,{config:s}):t.update("outputs",(t=>t.push(y))),t=await O(t,e,d.toString(),o,a,{config:s,useLocktimeCellsFirst:l,LocktimePoolCellCollector:p})}async function O(t,e,r,n,o,{config:s,useLocktimeCellsFirst:l=!0,LocktimePoolCellCollector:p=c.CellCollector,enableDeductCapacity:f=!0}={}){s=s||(0,u.getConfig)();let d=h.BI.from(r);if(0===e.length)throw new Error("No from info provided!");const g={cellOutput:{capacity:"0x0",lock:(0,a.parseFromInfo)(n||e[0],{config:s}).fromScript,type:void 0},data:"0x"},y=h.BI.from((0,i.minimalCellCapacityCompatible)(g));let _=h.BI.from(0);if(l){if(o){const r=await c.default.injectCapacityWithoutChangeCompatible(t,e,d.toString(),o,y.toString(),{config:s,LocktimeCellCollector:p,enableDeductCapacity:f});t=r.txSkeleton,d=h.BI.from(r.capacity),_=h.BI.from(r.changeCapacity)}if(d.gt(0)){const r=await x(t,e,d,y,{config:s,enableDeductCapacity:f});t=r.txSkeleton,d=r.capacity,_=r.changeCapacity}else if(d.eq(0)&&_.gt(0)&&_.lt(y)){const r=await x(t,e,y.sub(_),h.BI.from(0),{config:s,enableDeductCapacity:f});t=r.txSkeleton,d=r.capacity,_=r.changeCapacity}}else{const r=await x(t,e,d,y,{config:s,enableDeductCapacity:f});if(t=r.txSkeleton,d=r.capacity,_=r.changeCapacity,o)if(d.gt(0)){const r=await c.default.injectCapacityWithoutChangeCompatible(t,e,d.toString(),o,y.toString(),{config:s,LocktimeCellCollector:p,enableDeductCapacity:f});t=r.txSkeleton,d=h.BI.from(r.capacity),_=h.BI.from(r.changeCapacity)}else if(d.eq(0)&&_.gt(0)&&_.lt(y)){const r=await c.default.injectCapacityWithoutChangeCompatible(t,e,y.sub(_).toString(),o,0,{config:s,LocktimeCellCollector:p,enableDeductCapacity:f});t=r.txSkeleton,d=h.BI.from(r.capacity),_=h.BI.from(r.changeCapacity)}}if(d.gt(0))throw new Error("Not enough capacity in from infos!");if(_.gt(0)&&_.lt(y))throw new Error("Not enough capacity in from infos for change!");return _.gt(0)&&(g.cellOutput.capacity="0x"+_.toString(16),t=t.update("outputs",(t=>t.push(g)))),t}async function C(t,e,r,n,{config:i,useLocktimeCellsFirst:o=!0,enableDeductCapacity:a=!0}={}){return O(t,e,r,void 0,n,{config:i,useLocktimeCellsFirst:o,enableDeductCapacity:a})}function E(t,{config:e}={}){S({config:e=e||(0,u.getConfig)()});for(const r of v.infos)t=r.lockScriptInfo.prepareSigningEntries(t,{config:e});return t}async function x(t,e,r,n,{config:i,enableDeductCapacity:o=!0}={}){i=i||(0,u.getConfig)();let s=h.BI.from(r);const c=t.get("cellProvider");if(!c)throw new Error("Cell Provider is missing!");const l=t=>{var e,r;return`${null===(e=t.outPoint)||void 0===e?void 0:e.txHash}_${null===(r=t.outPoint)||void 0===r?void 0:r.index}`};let p=(0,f.Set)();for(const a of t.get("inputs"))p=p.add(l(a));const d=e.map((t=>(0,a.parseFromInfo)(t,{config:i}).fromScript));for(const a of d)o&&s.gt(0)&&([t,s]=I(t,a,s));S({config:i});let g=h.BI.from(0);if(s.gt(0))t:for(const a of e){const e=v.infos.map((t=>new t.lockScriptInfo.CellCollector(a,c,{config:i})));for(const r of e)for await(const e of r.collect()){const r=l(e);if(p.has(r))continue;p=p.add(r);const o=await P(t,e,a,{config:i,needCapacity:s});t=o.txSkeleton;const u=h.BI.from(o.availableCapacity);let c=u;if(c.gt(s)&&(c=s),s=s.sub(c),g=g.add(u.sub(c)),s.eq(0)&&(g.eq(0)||g.gt(n)))break t}}return{txSkeleton:t,capacity:s,changeCapacity:g}}function I(t,e,r){let n=h.BI.from(r);const o=t.get("fixedEntries").filter((({field:t})=>"outputs"===t)).maxBy((({index:t})=>t));let a=o?o.index+1:0;for(;a<t.get("outputs").size&&n.gt(0);a++){const o=t.get("outputs").get(a);if(o&&new m(o.cellOutput.lock,{validate:!1}).equals(new m(e,{validate:!1}))){const e=JSON.parse(JSON.stringify(o)),s=h.BI.from(e.cellOutput.capacity),u=s;let c;n.gte(u)?c=u:(c=s.sub((0,i.minimalCellCapacityCompatible)(e)),c.gt(r)&&(c=r)),n=n.sub(c),e.cellOutput.capacity="0x"+s.sub(c).toString(16),t=t.update("outputs",(t=>t.update(a,(()=>e))))}}return[t=t.update("outputs",(t=>t.filter((t=>h.BI.from(t.cellOutput.capacity).toString()!==h.BI.from(0).toString())))),n]}async function P(t,e,r,{config:n,since:o,defaultWitness:a="0x",needCapacity:s}={}){n=n||(0,u.getConfig)();const c=(t=await T(t,e,r,{config:n,since:o,defaultWitness:a})).get("outputs").size-1,l=t.get("outputs").get(c);if(!l)throw new Error("Impossible: can not find last output");const p=h.BI.from(l.cellOutput.capacity),f=t.get("fixedEntries").findIndex((t=>"outputs"===t.field&&t.index===c)),g=e.cellOutput.lock;let y=h.BI.from(0);if(n.SCRIPTS.ANYONE_CAN_PAY&&(0,d.isAcpScript)(g,n)){const e=!!(r&&"object"===typeof r&&"destroyable"in r&&r.destroyable),n=s?h.BI.from(s):p;if(e)y=p,t=t.update("outputs",(t=>t.remove(c))),f>=0&&(t=t.update("fixedEntries",(t=>t.remove(f))));else{const e=h.BI.from((0,i.minimalCellCapacityCompatible)(l)),r=p.sub(e),o=JSON.parse(JSON.stringify(l));let a=e;y=r,n.lt(r)&&(a=p.sub(n),y=n),o.cellOutput.capacity="0x"+a.toString(16),t=t.update("outputs",(t=>t.update(c,(()=>o))))}}else{var _;if(f<0)y=h.BI.from(null===(_=t.get("outputs").get(c))||void 0===_?void 0:_.cellOutput.capacity),t=t.update("outputs",(t=>t.remove(c)))}return{txSkeleton:t,availableCapacity:y}}async function T(t,e,r,{config:n,since:i,defaultWitness:o}={}){S({config:n=n||(0,u.getConfig)()});const a=e.cellOutput.lock,s=v.infos.find((t=>t.codeHash===a.codeHash&&t.hashType===a.hashType));if(!s)throw new Error("No LockScriptInfo found for setupInputCell!");return s.lockScriptInfo.setupInputCell(t,e,r,{config:n,since:i,defaultWitness:o})}async function A(t,e,r,n,{config:i,useLocktimeCellsFirst:o=!0,enableDeductCapacity:a=!0}={}){let s=0,u=t,c=H(u);for(;c>s;){s=c;const l=B(s,r);u=await C(t,e,l,n,{config:i,useLocktimeCellsFirst:o,enableDeductCapacity:a}),c=H(u)}return u}function B(t,e){const r=h.BI.from(1e3),n=h.BI.from(t).mul(e),i=n.div(r);return i.mul(r).lt(n)?i.add(1):h.BI.from(i)}function H(t){return D((0,i.createTransactionFromSkeleton)(t))}function D(t){return l.blockchain.Transaction.pack(t).byteLength+4}var j={transfer:k,payFee:C,prepareSigningEntries:E,injectCapacity:O,setupInputCell:T,registerCustomLockScriptInfos:w,payFeeByFeeRate:A,__tests__:{_commonTransfer:async function(t,e,r,n,{config:i,enableDeductCapacity:o=!0}={}){const a=await x(t,e,r,n,{config:i,enableDeductCapacity:o});return{txSkeleton:a.txSkeleton,capacity:BigInt(a.capacity.toString()),changeCapacity:BigInt(a.changeCapacity.toString())}},resetLockScriptInfos:function(){v.configHashCode=0,v._predefinedInfos=[],v._customInfos=[]},getLockScriptInfos:function(){return v},generateLockScriptInfos:S,getTransactionSizeByTx:D,getTransactionSize:H,calculateFee:function(t,e){const r=B(t,e);return BigInt(r.toString())},calculateFeeCompatible:B}};e.default=j},851691:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CellCollector=void 0,e.calculateDaoEarliestSince=O,e.calculateDaoEarliestSinceCompatible=C,e.calculateMaximumWithdraw=P,e.calculateMaximumWithdrawCompatible=T,e.default=void 0,e.deposit=v,e.extractDaoDataCompatible=I,e.listDaoCells=b,e.unlock=k;var n=r(587472),i=r(214231),o=r(412397),a=r(486532),s=h(r(152957)),u=h(r(635489)),c=r(491686),l=r(78102),p=r(356997),f=r(39337),d=h(r(614466));function h(t){return t&&t.__esModule?t:{default:t}}const{parseSince:g}=i.since,y="0x0000000000000000",_=p.BI.from(180);class m{constructor(t,e,r,{config:n}={}){if(!e)throw new Error("Cell Provider is missing!");n=n||(0,a.getConfig)();const i=(0,c.parseFromInfo)(t,{config:n}).fromScript,o=(0,l.generateDaoScript)(n),s="deposit"===r?y:"any";this.cellType=r,this.cellCollector=e.collector({lock:i,type:o,data:s})}async*collect(){for await(const t of this.cellCollector.collect())"withdraw"===this.cellType&&t.data===y||(yield t)}}async function*b(t,e,r,{config:n}={}){const i=new m(e,t,r,{config:n});for await(const o of i.collect())yield o}async function v(t,e,r,i,{config:f,enableNonSystemScript:h=!1}={}){const _=(f=f||(0,a.getConfig)()).SCRIPTS.DAO;if(!_)throw new Error("Provided config does not have DAO script setup!");if(function(t,e){let r;if("string"===typeof t){const i=(0,n.parseAddress)(t,{config:e}).args;58===i.length&&(r=o.number.Uint64LE.unpack("0x"+i.slice(42)).toHexString())}else"R"in t&&(r=t.since);if(null!=r){const{relative:t,type:e}=g(r);if(t||"epochNumber"!==e)throw new Error("Can't deposit a dao cell with multisig locktime which not using absolute-epoch-number format!")}}(e,f),t=x(t,f),!r)throw new Error("You must provide a to address!");const m=(0,n.parseAddress)(r,{config:f}),b={codeHash:_.CODE_HASH,hashType:_.HASH_TYPE,args:"0x"},v=(t=t.update("outputs",(t=>t.push({cellOutput:{capacity:"0x"+p.BI.from(i).toString(16),lock:m,type:b},data:y,outPoint:void 0,blockHash:void 0})))).get("outputs").size-1;if(t=t.update("fixedEntries",(t=>t.push({field:"outputs",index:v}))),"string"===typeof e){const r=(0,n.parseAddress)(e,{config:f});(0,l.isSecp256k1Blake160Script)(r,f)?t=await s.default.injectCapacity(t,v,e,{config:f}):(0,l.isSecp256k1Blake160MultisigScript)(r,f)?t=await u.default.injectCapacity(t,v,e,{config:f}):h&&(t=await d.default.injectCapacity(t,[e],i,(0,n.encodeToAddress)((0,c.parseFromInfo)(e).fromScript,{config:f}),void 0,{config:f}))}else e&&((0,c.isMultisigFromInfo)(e)?t=await u.default.injectCapacity(t,v,e,{config:f}):h&&(t=await d.default.injectCapacity(t,[e],i,(0,n.encodeToAddress)((0,c.parseFromInfo)(e).fromScript,{config:f}),void 0,{config:f})));return t}function w(t){const e=p.BI.from(t);return{length:e.shr(40).and(4095),index:e.shr(24).and(4095),number:e.and(16777215)}}function S({length:t,index:e,number:r}){const n=p.BI.from(t),i=p.BI.from(e),o=p.BI.from(r);return p.BI.from(32).shl(56).add(n.shl(40)).add(i.shl(24)).add(o)}async function k(t,e,r,c,d,{config:h,RpcClient:g=f.RPC}={}){if(E(h=h||(0,a.getConfig)()),t=x(t,h),!h.SCRIPTS.DAO)throw new Error("Provided config does not have DAO script setup!");const m=t.get("cellProvider");if(!m)throw new Error("Cell provider is missing!");const b=new g(m.uri),v=e.cellOutput.type,k=h.SCRIPTS.DAO;if(!v||v.codeHash!==k.CODE_HASH||v.hashType!==k.HASH_TYPE||e.data!==y)throw new Error("depositInput is not a DAO deposit cell.");const O=r.cellOutput.type;if(!O||O.codeHash!==k.CODE_HASH||O.hashType!==k.HASH_TYPE||r.data===y)throw new Error("withdrawInput is not a DAO withdraw cell.");const C=await b.getHeader(e.blockHash),I=w(C.epoch),P=await b.getHeader(r.blockHash),A=w(P.epoch),B=A.index.mul(I.length),H=I.index.mul(A.length);let D=A.number.sub(I.number);B.gt(H)&&(D=D.add(1));const j=D.add(_).sub(1).div(_).mul(_),L=S({number:p.BI.from(I.number.add(j)),index:p.BI.from(I.index),length:p.BI.from(I.length)}),M="0x"+T(r,C.dao,P.dao).toString(16),R=(0,n.parseAddress)(c,{config:h});t=t.update("outputs",(t=>t.push({cellOutput:{capacity:M,lock:R,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0})));const N="0x"+L.toString(16);for(;t.get("witnesses").size<t.get("inputs").size-1;)t=t.update("witnesses",(t=>t.push("0x")));const z=(t=t.update("headerDeps",(t=>t.push(e.blockHash,r.blockHash)))).get("headerDeps").size-2,F={inputType:o.bytes.hexify(o.number.Uint64LE.pack(z))},U=o.bytes.hexify(i.blockchain.WitnessArgs.pack(F)),q=r.cellOutput.lock;(0,l.isSecp256k1Blake160Script)(q,h)?t=await s.default.setupInputCell(t,r,void 0,{config:h,since:N,defaultWitness:U}):(0,l.isSecp256k1Blake160MultisigScript)(q,h)&&(t=await u.default.setupInputCell(t,r,d||(0,n.generateAddress)(q,{config:h}),{config:h,since:N,defaultWitness:U}));const $=t.get("outputs").size-1;return t=(t=t.update("outputs",(t=>t.remove($)))).update("fixedEntries",(e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"outputs",index:t.get("outputs").size-1},{field:"witnesses",index:t.get("witnesses").size-1},{field:"headerDeps",index:t.get("headerDeps").size-2})))}function O(t,e){const r=C(t,e);return BigInt(r.toString())}function C(t,e){const r=w(t),n=w(e),i=n.index.mul(r.length),o=r.index.mul(n.length);let a=n.number.sub(r.number);i.gt(o)&&(a=a.add(1));const s=a.add(_).sub(1).div(_).mul(_);return S({number:p.BI.from(r.number.add(s)),index:p.BI.from(r.index),length:p.BI.from(r.length)})}function E(t){if(!t.SCRIPTS.DAO)throw new Error("Provided config does not have DAO script setup!")}function x(t,e){const r=e.SCRIPTS.DAO;return(0,l.addCellDep)(t,{outPoint:{txHash:r.TX_HASH,index:r.INDEX},depType:r.DEP_TYPE})}function I(t){if(!/^(0x)?([0-9a-fA-F]){64}$/.test(t))throw new Error("Invalid dao format!");const e=t.startsWith("0x")?t.slice(2):t;return["c","ar","s","u"].map(((t,r)=>({[t]:o.number.Uint64LE.unpack("0x"+e.slice(16*r,16*(r+1)))}))).reduce(((t,e)=>({...t,...e})),{})}function P(t,e,r){return T(t,e,r).toBigInt()}function T(t,e,r){const i=p.BI.from(I(e).ar),o=p.BI.from(I(r).ar),a=p.BI.from((0,n.minimalCellCapacityCompatible)(t));return p.BI.from(t.cellOutput.capacity).sub(a).mul(o).div(i).add(a)}e.CellCollector=m;var A={deposit:v,withdraw:async function(t,e,r,{config:i,enableNonSystemScript:c=!1}={}){if(E(i=i||(0,a.getConfig)()),(t=x(t,i)).get("inputs").size!==t.get("outputs").size)throw new Error("Input size must equals to output size in txSkeleton!");if(!i.SCRIPTS.DAO)throw new Error("Provided config does not have DAO script setup!");if(!t.get("cellProvider"))throw new Error("Cell provider is missing!");const p=e.cellOutput.type,f=i.SCRIPTS.DAO;if(!p||p.codeHash!==f.CODE_HASH||p.hashType!==f.HASH_TYPE||e.data!==y)throw new Error("fromInput is not a DAO deposit cell.");const h=e.cellOutput.lock;(0,l.isSecp256k1Blake160Script)(h,i)?t=await s.default.setupInputCell(t,e,void 0,{config:i}):(0,l.isSecp256k1Blake160MultisigScript)(h,i)?t=await u.default.setupInputCell(t,e,r||(0,n.generateAddress)(h,{config:i}),{config:i}):c&&(t=await d.default.setupInputCell(t,e,r||(0,n.encodeToAddress)(h,{config:i}),{config:i}));const g=t.get("outputs").size-1,_=t.get("outputs").get(g),m=JSON.parse(JSON.stringify(_));if(!e.blockNumber)throw new Error("fromInput has no blockNumber!");return m.data=o.bytes.hexify(o.number.Uint64.pack(e.blockNumber)),t=(t=(t=t.update("outputs",(t=>t.update(g,(()=>m))))).update("headerDeps",(t=>t.push(e.blockHash)))).update("fixedEntries",(e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"outputs",index:t.get("outputs").size-1})))},unlock:k,calculateMaximumWithdraw:P,calculateMaximumWithdrawCompatible:T,calculateDaoEarliestSince:O,calculateDaoEarliestSinceCompatible:C,CellCollector:m,listDaoCells:b};e.default=A},746869:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareScriptBinaryWithOnChainData=k,e.default=void 0,e.generateDeployWithDataTx=v,e.generateDeployWithTypeIdTx=w,e.generateUpgradeTypeIdDataTx=S;var n=r(214231),i=r(412397),o=r(486532),a=r(587472),s=r(727623),u=r(491686),c=r(356997);const{ScriptValue:l}=n.values;function p(t){let e="0x";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function f(t,e){const r=(0,a.minimalCellCapacityCompatible)(e);return e.cellOutput.capacity=`0x${r.toString(16)}`,t=t.update("outputs",(t=>t.push(e)))}function d(t,e){t=t.update("cellDeps",(t=>t.clear()));const r=(e=e||(0,o.getConfig)()).SCRIPTS.SECP256K1_BLAKE160,n=e.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!r||!n)throw new Error("Provided config does not have SECP256K1_BLAKE160 or SECP256K1_BLAKE160_MULTISIG script setup!");return t=t.update("cellDeps",(t=>t.push({outPoint:{txHash:r.TX_HASH,index:r.INDEX},depType:r.DEP_TYPE},{outPoint:{txHash:n.TX_HASH,index:n.INDEX},depType:n.DEP_TYPE})))}async function h(t,e,r,p){const f=t.get("inputs").map((t=>c.BI.from(t.cellOutput.capacity))).reduce(((t,e)=>t.add(e)),c.BI.from(0)),d=t.get("outputs").map((t=>c.BI.from(t.cellOutput.capacity))).reduce(((t,e)=>t.add(e)),c.BI.from(0)).sub(f);return t=await async function(t,e,r,{config:p,feeRate:f}){p=p||(0,o.getConfig)();const d=f||1e3;let h=c.BI.from(r);const{fromScript:g,multisigScript:_}=(0,u.parseFromInfo)(e,{config:p});h=h.add(c.BI.from(10).pow(8));let m=c.BI.from(10).pow(8);const b={cellOutput:{capacity:"0x0",lock:g,type:void 0},data:"0x"},v=c.BI.from((0,a.minimalCellCapacityCompatible)(b)).add(c.BI.from(10).pow(8));h.lt(0)&&(m=m.sub(h),h=c.BI.from(0));if(h.gt(0)||m.lt(v)){const e=t.get("cellProvider");if(!e)throw new Error("Cell provider is missing!");const r=e.collector({lock:g,type:"empty",data:"0x"});let n=(0,s.Set)();for(const i of t.get("inputs"))n=n.add(`${i.outPoint.txHash}_${i.outPoint.index}`);for await(const i of r.collect()){if(n.has(`${i.outPoint.txHash}_${i.outPoint.index}`))continue;t=(t=t.update("inputs",(t=>t.push(i)))).update("witnesses",(t=>t.push("0x")));const e=c.BI.from(i.cellOutput.capacity);let r=e;if(r.gt(h)&&(r=h),h=h.sub(r),m=m.add(e).sub(r),h.eq(0)&&(m.eq(0)||m.gte(v)))break}}m.gt(0)&&(b.cellOutput.capacity="0x"+m.toString(16),t=t.update("outputs",(t=>t.push(b))));if(h.gt(0)||m.lt(v))throw new Error("Not enough capacity in from address!");const w=t.get("inputs").findIndex((t=>new l(t.cellOutput.lock,{validate:!1}).equals(new l(g,{validate:!1}))));if(-1!==w){for(;w>=t.get("witnesses").size;)t=t.update("witnesses",(t=>t.push("0x")));let r,o=t.get("witnesses").get(w);const a="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";if(r="string"!==typeof e?{lock:"0x"+_.slice(2)+a.slice(2).repeat(e.M)}:{lock:a},"0x"!==o){const t=n.blockchain.WitnessArgs.unpack(i.bytes.bytify(o)),e=t.lock;if(e&&r.lock&&!i.bytes.equal(e,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const a=t.inputType;a&&(r.inputType=a);const s=t.outputType;s&&(r.outputType=s)}o=i.bytes.hexify(n.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",(t=>t.set(w,o)))}const S=y(t,d);m=m.sub(S),t=t.update("outputs",(t=>t.pop())),m.gt(0)&&(b.cellOutput.capacity="0x"+m.toString(16),t=t.update("outputs",(t=>t.push(b))));return t}(t,e,c.BI.from(d),{config:r,feeRate:p}),t}function g(t){return function(t){const e=n.blockchain.Transaction.pack(t);return e.byteLength+4}((0,a.createTransactionFromSkeleton)(t))}function y(t,e){const r=g(t);return c.BI.from(function(t,e){const r=c.BI.from(1e3),n=c.BI.from(t).mul(e),i=n.div(r);return i.mul(r).lt(n)?i.add(1):c.BI.from(i)}(r,e))}function _(t){const e=(0,a.createTransactionFromSkeleton)(t);return n.utils.ckbHash(n.blockchain.RawTransaction.pack(e))}function m(t,e){const r=t.outputs.get(e);if(void 0==r)throw new Error("Invalid txSkeleton or outputIndex");return void 0!==r.cellOutput.type?function(t,e){const r=t.outputs.get(e).cellOutput.type;return{CODE_HASH:n.utils.computeScriptHash(r),HASH_TYPE:"type",TX_HASH:_(t),INDEX:"0x0",DEP_TYPE:"code"}}(t,e):function(t,e){const r=t.outputs.get(e).data;return{CODE_HASH:n.utils.ckbHash(i.bytes.bytify(r)),HASH_TYPE:"data2",TX_HASH:_(t),INDEX:"0x0",DEP_TYPE:"code"}}(t,e)}function b(t,{config:e}={}){if(e=e||(0,o.getConfig)(),"string"===typeof t){if("SECP256K1_BLAKE160"!==o.helpers.nameOfScript((0,a.parseAddress)(t,{config:e}),e.SCRIPTS))throw new Error("only SECP256K1_BLAKE160 or SECP256K1_MULTISIG is supported")}else if(!function(t){return"object"===typeof t&&"M"in t&&"R"in t&&Array.isArray(t.publicKeyHashes)}(t))throw new Error("only SECP256K1_BLAKE160 or SECP256K1_MULTISIG is supported")}async function v(t){b(t.fromInfo,{config:t.config});let e=(0,a.TransactionSkeleton)({cellProvider:t.cellProvider});const{fromScript:r}=(0,u.parseFromInfo)(t.fromInfo,{config:t.config});e=f(e,{cellOutput:{capacity:"0x0",lock:r},data:p(t.scriptBinary)}),e=d(e,t.config),e=await h(e,t.fromInfo,t.config,t.feeRate);return{txSkeleton:e,scriptConfig:m(e,0)}}async function w(t){b(t.fromInfo,{config:t.config});let e=(0,a.TransactionSkeleton)({cellProvider:t.cellProvider});const{fromScript:r}=(0,u.parseFromInfo)(t.fromInfo,{config:t.config}),[i]=await async function(t,e){const r=e.collector({lock:t,type:"empty",data:"0x"}),n=[];for await(const i of r.collect())n.push(i);return n}(r,t.cellProvider);if(!i)throw new Error("fromAddress has no live ckb");const o=n.utils.generateTypeIdScript({previousOutput:i.outPoint,since:"0x0"},"0x0");e=f(e,{cellOutput:{capacity:"0x0",lock:r,type:o},data:p(t.scriptBinary)}),e=d(e,t.config),e=await h(e,t.fromInfo,t.config,t.feeRate);return{txSkeleton:e,scriptConfig:m(e,0),typeId:o}}async function S(t){b(t.fromInfo,{config:t.config});let e=(0,a.TransactionSkeleton)({cellProvider:t.cellProvider});const{fromScript:r}=(0,u.parseFromInfo)(t.fromInfo,{config:t.config}),n=t.cellProvider.collector({type:t.typeId}),i=[];for await(const a of n.collect())i.push(a);if(1!==i.length)throw new Error("the typeid maybe wrong");const o=i[0];e=e.update("inputs",(t=>t.push(o)));e=f(e,{cellOutput:{capacity:"0x0",lock:r,type:t.typeId},data:p(t.scriptBinary)}),e=d(e,t.config),e=await h(e,t.fromInfo,t.config,t.feeRate);return{txSkeleton:e,scriptConfig:m(e,0)}}async function k(t,e,r){const o=function(t){const e=t.valueOf();return(new n.utils.CKBHasher).update(e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)).digestHex()}(t),a=await async function(t,e){const r=t.txHash,o=parseInt(t.index,10),a=await e.getTransaction(r);if(!a)throw new Error(`TxHash(${r}) is not found`);const s=a.transaction.outputsData[o];if(!s)throw new Error("cannot find output data");return(new n.utils.CKBHasher).update(i.bytes.bytify(s)).digestHex()}(e,r);return o===a}var O={generateDeployWithDataTx:v,generateDeployWithTypeIdTx:w,generateUpgradeTypeIdDataTx:S,compareScriptBinaryWithOnChainData:k,__tests__:{calculateTxFee:y}};e.default=O},491686:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isMultisigFromInfo=function(t){if(!t||"object"!==typeof t)return!1;const e=t;return"number"===typeof(null===e||void 0===e?void 0:e.R)&&"number"===typeof(null===e||void 0===e?void 0:e.M)&&Array.isArray(null===e||void 0===e?void 0:e.publicKeyHashes)},e.multisigArgs=c,e.parseFromInfo=function(t,{config:e}={}){let r,n,a,s;if(e=e||(0,o.getConfig)(),"string"===typeof t)r=(0,i.parseAddress)(t,{config:e});else if("R"in t){const i=e.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!i)throw new Error("Provided config does not have SECP256K1_BLAKE16_MULTISIG script setup!");n=u(t);const o=c(n,t.since);r={codeHash:i.CODE_HASH,hashType:i.HASH_TYPE,args:o}}else if("address"in t){const n=e.SCRIPTS.ANYONE_CAN_PAY;if(!n)throw new Error("Provided config does not have ANYONE_CAN_PAY script setup!");const o=t.address;if(r=(0,i.parseAddress)(o,{config:e}),a=t.destroyable,r.codeHash!==n.CODE_HASH||r.hashType!==n.HASH_TYPE)throw new Error("fromInfo.address is not ANYONE_CAN_PAY address!")}else{if(!("script"in t))throw new Error("Invalid fromInfo format!");r=t.script,s=t.customData}return{fromScript:r,multisigScript:n,destroyable:a,customData:s}},e.serializeMultisigScript=u;var n=r(214231),i=r(587472),o=r(486532),a=r(412397);const{CKBHasher:s}=n.utils;function u({R:t,M:e,publicKeyHashes:r}){if(t<0||t>255)throw new Error("`R` should be less than 256!");if(e<0||e>255)throw new Error("`M` should be less than 256!");return"0x00"+("00"+t.toString(16)).slice(-2)+("00"+e.toString(16)).slice(-2)+("00"+r.length.toString(16)).slice(-2)+r.map((t=>t.slice(2))).join("")}function c(t,e){let r="0x";return null!=e&&(r=a.bytes.hexify(a.number.Uint64LE.pack(e))),(new s).update(t).digestHex().slice(0,42)+r.slice(2)}},78102:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SECP_SIGNATURE_PLACEHOLDER=e.OMNILOCK_SIGNATURE_PLACEHOLDER=void 0,e.addCellDep=f,e.default=void 0,e.ensureScript=C,e.generateDaoScript=d,e.hashWitness=k,e.isAcpAddress=S,e.isAcpScript=w,e.isDaoScript=b,e.isOmnilockAddress=function(t,e){return y((0,o.parseAddress)(t,{config:e}),e)},e.isOmnilockScript=y,e.isSecp256k1Blake160Address=g,e.isSecp256k1Blake160MultisigAddress=m,e.isSecp256k1Blake160MultisigScript=_,e.isSecp256k1Blake160Script=h,e.isSudtScript=v,e.prepareSigningEntries=O;var n=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=c(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(860173)),i=r(727623),o=r(587472),a=r(412397),s=r(214231),u=r(356997);function c(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(c=function(t){return t?r:e})(t)}const{CKBHasher:l,ckbHash:p}=s.utils;function f(t,e){return t.get("cellDeps").find((t=>t.depType===e.depType&&new s.values.OutPointValue(t.outPoint,{validate:!1}).equals(new s.values.OutPointValue(e.outPoint,{validate:!1}))))||(t=t.update("cellDeps",(t=>t.push({outPoint:e.outPoint,depType:e.depType})))),t}function d(t){const e=t.SCRIPTS.DAO;return{codeHash:e.CODE_HASH,hashType:e.HASH_TYPE,args:"0x"}}function h(t,e){const r=e.SCRIPTS.SECP256K1_BLAKE160;return t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function g(t,e){return h((0,o.parseAddress)(t,{config:e}),e)}function y(t,e){const r=e.SCRIPTS.OMNILOCK;return t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function _(t,e){const r=e.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;return t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function m(t,e){return _((0,o.parseAddress)(t,{config:e}),e)}function b(t,e){const r=e.SCRIPTS.DAO;return!!t&&t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function v(t,e){const r=e.SCRIPTS.SUDT;if(!r)throw new Error("SUDT script not defined in config!");return!!t&&t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function w(t,e){const r=e.SCRIPTS.ANYONE_CAN_PAY;if(!r)throw new Error("ANYONE_CAN_PAY script not defined in config!");return!!t&&t.codeHash===r.CODE_HASH&&t.hashType===r.HASH_TYPE}function S(t,e){return w((0,o.parseAddress)(t,{config:e}),e)}function k(t,e){const r=new ArrayBuffer(8),n=new DataView(r),i=u.BI.from(a.bytes.bytify(e).length).toString(16);i.length<=8&&(n.setUint32(0,Number("0x"+i),!0),n.setUint32(4,Number("0x00000000"),!0)),i.length>8&&i.length<=16&&(n.setUint32(0,Number("0x"+i.slice(-8)),!0),n.setUint32(4,Number("0x"+i.slice(0,-8)),!0)),t.update(r),t.update(e)}function O(t,e,r){const n=e.SCRIPTS[r];if(!n)throw new Error(`Provided config does not have ${r} script setup!`);let a=(0,i.Set)();const u=(0,o.createTransactionFromSkeleton)(t),c=p(s.blockchain.RawTransaction.pack(u)),f=t.get("inputs"),d=t.get("witnesses");let h=t.get("signingEntries");for(let i=0;i<f.size;i++){const t=f.get(i);if(n.CODE_HASH===t.cellOutput.lock.codeHash&&n.HASH_TYPE===t.cellOutput.lock.hashType&&!a.has(t.cellOutput.lock.args)){a=a.add(t.cellOutput.lock.args);const e=new s.values.ScriptValue(t.cellOutput.lock,{validate:!1}),r=new l;if(r.update(c),i>=d.size)throw new Error(`The first witness in the script group starting at input index ${i} does not exist, maybe some other part has invalidly tampered the transaction?`);k(r,d.get(i));for(let t=i+1;t<f.size&&t<d.size;t++){const n=f.get(t);e.equals(new s.values.ScriptValue(n.cellOutput.lock,{validate:!1}))&&k(r,d.get(t))}for(let t=f.size;t<d.size;t++)k(r,d.get(t));const n={type:"witness_args_lock",index:i,message:r.digestHex()};h=h.push(n)}}return t=t.set("signingEntries",h)}function C(t,e,r){const n=e.SCRIPTS[r];if(!n)throw new Error(`Provided config does not have ${r} script setup!`);if(n.CODE_HASH!==t.codeHash||n.HASH_TYPE!==t.hashType)throw new Error(`Provided script is not ${r} script!`)}const E="0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";e.SECP_SIGNATURE_PLACEHOLDER=E;const x=`0x${"00".repeat(n.OmnilockWitnessLock.pack({signature:E}).byteLength)}`;e.OMNILOCK_SIGNATURE_PLACEHOLDER=x;var I={addCellDep:f,generateDaoScript:d,isSecp256k1Blake160Script:h,isSecp256k1Blake160MultisigScript:_,isDaoScript:b,isSudtScript:v,prepareSigningEntries:O,isSecp256k1Blake160Address:g,isSecp256k1Blake160MultisigAddress:m,ensureScript:C,isAcpScript:w,isAcpAddress:S};e.default=I},30655:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"anyoneCanPay",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"common",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"createP2PKHMessageGroup",{enumerable:!0,get:function(){return p.createP2PKHMessageGroup}}),Object.defineProperty(e,"dao",{enumerable:!0,get:function(){return a.default}}),e.default=void 0,Object.defineProperty(e,"deploy",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"locktimePool",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"omnilock",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"parseFromInfo",{enumerable:!0,get:function(){return o.parseFromInfo}}),Object.defineProperty(e,"secp256k1Blake160",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"secp256k1Blake160Multisig",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"sudt",{enumerable:!0,get:function(){return c.default}});var n=h(r(152957)),i=h(r(635489)),o=r(491686),a=h(r(851691)),s=h(r(61049)),u=h(r(614466)),c=h(r(562)),l=h(r(408425)),p=r(894578),f=h(r(746869)),d=h(r(860173));function h(t){return t&&t.__esModule?t:{default:t}}var g={secp256k1Blake160:n.default,secp256k1Blake160Multisig:i.default,dao:a.default,locktimePool:s.default,common:u.default,sudt:c.default,anyoneCanPay:l.default};e.default=g},61049:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CellCollector=void 0,e.injectCapacity=P,e.payFee=x,e.prepareSigningEntries=I,e.setupInputCell=A,e.transfer=k,e.transferCompatible=O;var n,i=r(587472),o=r(412397),a=r(491686),s=(n=r(152957))&&n.__esModule?n:{default:n},u=r(851691),c=r(214231),l=r(78102),p=r(727623),f=r(486532),d=r(30655),h=r(634792),g=r(356997),y=r(39337);const{ScriptValue:_}=c.values,{parseEpoch:m,maximumAbsoluteEpochSince:b,generateAbsoluteEpochSince:v,validateSince:w}=c.since,S=class{constructor(t,e,{config:r,queryOptions:n={},tipHeader:i,NodeRPC:o=y.RPC}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,f.getConfig)();const s=(0,a.parseFromInfo)(t,{config:r}),u=s.fromScript;this.multisigScript=s.multisigScript,this.fromScript=u,this.config=r,this.tipHeader=i,i&&(this.tipSinceValidationInfo={blockNumber:i.number,epoch:i.epoch,median_timestamp:""}),this.rpc=new o(e.uri),n={...n,lock:this.fromScript};let c=(0,p.List)([]);if((0,l.isSecp256k1Blake160MultisigScript)(u,r)){const t={codeHash:u.codeHash,hashType:u.hashType,args:u.args.slice(0,42)};c=c.push(e.collector({lock:t,argsLen:n.argsLen||28,type:n.type||"empty",data:n.data||"0x"})),n.type||n.data&&"any"!==n.data||(c=c.push(e.collector({lock:t,type:(0,l.generateDaoScript)(r),data:"any"})),c=c.push(e.collector({lock:t,argsLen:28,type:(0,l.generateDaoScript)(r),data:"any"})))}else(0,l.isSecp256k1Blake160Script)(u,r)&&(n.type||n.data&&"any"!==n.data||(c=c.push(e.collector({lock:u,type:(0,l.generateDaoScript)(r),data:"any"}))));this.cellCollectors=c}async*collect(){for(const t of this.cellCollectors)for await(const e of t.collect()){const t=e.cellOutput.lock;let r,n,i,o,a;if(58===t.args.length){const n=await this.rpc.getHeader(e.blockHash);r="0x"+B(t.args).toString(16),a={epoch:n.epoch,blockNumber:n.number,median_timestamp:""}}if((0,l.isDaoScript)(e.cellOutput.type,this.config)){if("0x0000000000000000"===e.data)continue;const t=await this.rpc.getTransaction(e.outPoint.txHash);o=t.txStatus.blockHash;const a=t.transaction.inputs[+e.outPoint.index].previousOutput;i=(await this.rpc.getTransaction(a.txHash)).txStatus.blockHash;const s=await this.rpc.getHeader(i),c=await this.rpc.getHeader(o);let l="0x"+(0,u.calculateDaoEarliestSinceCompatible)(s.epoch,c.epoch).toString(16);n=(0,u.calculateMaximumWithdrawCompatible)(e,s.dao,c.dao);const p=m(c.epoch),f={number:p.number+4,length:p.length,index:p.index};if(l=b(l,v(f)),r){const t=(0,h.parseSinceCompatible)(r);if(!1!==t.relative||"epochNumber"!==t.type)continue;try{r=b(l,r)}catch{r=l}}else r=l}if("blockTimestamp"===(0,h.parseSinceCompatible)(r).type||this.tipHeader&&!w(r,this.tipSinceValidationInfo,a))continue;const s={...e,since:r,depositBlockHash:i,withdrawBlockHash:o,sinceValidationInfo:a};s.cellOutput.capacity="0x"+(n||g.BI.from(e.cellOutput.capacity)).toString(16),yield s}}};async function k(t,e,r,n,i,{config:o,requireToAddress:a=!0,assertAmountEnough:s=!0,LocktimeCellCollector:u=S}={}){const c=await O(t,e,r,n,i,{config:o,requireToAddress:a,assertAmountEnough:s,LocktimeCellCollector:u});let l,p;return c instanceof Array?(l=c[0],p=BigInt(c[1].toString()),[l,p]):(l=c,l)}async function O(t,e,r,n,i,{config:o,requireToAddress:a=!0,assertAmountEnough:s=!0,LocktimeCellCollector:u=S}={}){let c=g.BI.from(n);for(const[l,p]of e.entries()){const e=await C(t,p,0===l?r:void 0,c,i,{config:o,requireToAddress:0===l&&a,assertAmountEnough:!1,LocktimeCellCollector:u});if(t=e[0],c=e[1],c.eq(0))return s?t:[t,g.BI.from(c)]}if(s)throw new Error("Not enough capacity in from addresses!");return[t,g.BI.from(c)]}async function C(t,e,r,n,s,{config:u,requireToAddress:d=!0,assertAmountEnough:h=!0,LocktimeCellCollector:y=S,changeAddress:m}){u=u||(0,f.getConfig)();const{fromScript:b}=(0,a.parseFromInfo)(e,{config:u});if(!(0,l.isSecp256k1Blake160MultisigScript)(b,u)&&!(0,l.isSecp256k1Blake160Script)(b,u))throw new Error("fromInfo not supported!");if(d&&!r)throw new Error("You must provide a to address!");let v=g.BI.from(n||0);if(r){const e=(0,i.parseAddress)(r,{config:u});t=t.update("outputs",(t=>t.push({cellOutput:{capacity:"0x"+v.toString(16),lock:e,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0})))}const w=t.get("fixedEntries").filter((({field:t})=>"outputs"===t)).maxBy((({index:t})=>t));let k=w?w.index+1:0;for(;k<t.get("outputs").size&&v.gt(0);++k){const e=t.get("outputs").get(k);if(new _(e.cellOutput.lock,{validate:!1}).equals(new _(b,{validate:!1}))){const r=g.BI.from(e.cellOutput.capacity);let n;v.gte(r)?n=r:(n=r.sub((0,i.minimalCellCapacityCompatible)(e)),n.gt(v)&&(n=v)),v=v.sub(n);const o=JSON.parse(JSON.stringify(e));o.cellOutput.capacity="0x"+r.sub(n).toString(16),t=t.update("outputs",(t=>t.update(k,(()=>o))))}}if(t=t.update("outputs",(t=>t.filter((t=>!g.BI.from(t.cellOutput.capacity).eq(0))))),v.gt(0)){const r=t.get("cellProvider");if(!r)throw new Error("cell provider is missing!");const n={cellOutput:{capacity:"0x0",lock:m?(0,i.parseAddress)(m,{config:u}):b,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let a=g.BI.from(0),f=(0,p.Set)();for(const e of t.get("inputs"))f=f.add(`${e.outPoint.txHash}_${e.outPoint.index}`);const d=new y(e,r,{config:u,tipHeader:s});for await(const s of d.collect()){const r=s;if(f.has(`${r.outPoint.txHash}_${r.outPoint.index}`))continue;let p;if((0,l.isSecp256k1Blake160MultisigScript)(b,u)){const t=r.cellOutput.lock.args;p=58===t.length?g.BI.from(B(t)):void 0}let d="0x";if((0,l.isDaoScript)(r.cellOutput.type,u)){const e=u.SCRIPTS.DAO,n=(t=(t=(0,l.addCellDep)(t,{depType:e.DEP_TYPE,outPoint:{txHash:e.TX_HASH,index:e.INDEX}})).update("headerDeps",(t=>t.push(r.depositBlockHash,r.withdrawBlockHash)))).get("headerDeps").size-2,i={inputType:o.bytes.hexify(o.number.Uint64.pack(n))};d=o.bytes.hexify(c.blockchain.WitnessArgs.pack(i))}t=await T(t,r,(0,l.isSecp256k1Blake160MultisigScript)(b,u)?Object.assign({},e,{since:p}):e,{config:u,defaultWitness:d,since:r.since});const h=g.BI.from(r.cellOutput.capacity);let y=h;if(y.gt(v)&&(y=v),v=v.sub(y),a=a.add(h).sub(y),(0,l.isDaoScript)(r.cellOutput.type,u)&&(t=t.update("fixedEntries",(e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"witnesses",index:t.get("witnesses").size-1},{field:"headerDeps",index:t.get("headerDeps").size-2})))),v.eq(0)&&(a.eq(0)||a.gt((0,i.minimalCellCapacityCompatible)(n))))break}a.gt(0)&&(n.cellOutput.capacity="0x"+a.toString(16),t=t.update("outputs",(t=>t.push(n))))}if(!h)return[t,v];if(v.gt(0))throw new Error("Not enough capacity in from address!");return t}async function E(t,e,r,n,s,{config:u,LocktimeCellCollector:d=S,enableDeductCapacity:h=!0}){u=u||(0,f.getConfig)();let y=g.BI.from(r);const m=g.BI.from(s);if(h)for(const o of e){const e=(0,a.parseFromInfo)(o,{config:u}).fromScript;if(!(0,l.isSecp256k1Blake160MultisigScript)(e,u)&&!(0,l.isSecp256k1Blake160Script)(e,u))continue;const r=t.get("fixedEntries").filter((({field:t})=>"outputs"===t)).maxBy((({index:t})=>t));let n=r?r.index+1:0;for(;n<t.get("outputs").size&&y.gt(0);++n){const r=t.get("outputs").get(n);if(new _(r.cellOutput.lock,{validate:!1}).equals(new _(e,{validate:!1}))){const e=JSON.parse(JSON.stringify(r)),o=g.BI.from(e.cellOutput.capacity);let a;y.gte(o)?a=o:(a=o.sub((0,i.minimalCellCapacityCompatible)(e)),a.gt(y)&&(a=y)),y=y.sub(a),e.cellOutput.capacity="0x"+o.sub(a).toString(16),t=t.update("outputs",(t=>t.update(n,(()=>e))))}}t=t.update("outputs",(t=>t.filter((t=>!g.BI.from(t.cellOutput.capacity).eq(0)))))}let b=g.BI.from(0);if(y.gt(0)){const r=t.get("cellProvider");if(!r)throw new Error("cell provider is missing!");const i=t=>`${t.outPoint.txHash}_${t.outPoint.index}`;let s=(0,p.Set)();for(const e of t.get("inputs"))s=s.add(i(e));for(const p of e){const e=(0,a.parseFromInfo)(p,{config:u}).fromScript,f=new d(p,r,{config:u,tipHeader:n});for await(const r of f.collect()){const n=r;if(s.has(i(n)))continue;let a,f="0x";if((0,l.isDaoScript)(n.cellOutput.type,u)){const e=u.SCRIPTS.DAO,r=(t=(t=(0,l.addCellDep)(t,{depType:e.DEP_TYPE,outPoint:{txHash:e.TX_HASH,index:e.INDEX}})).update("headerDeps",(t=>t.push(n.depositBlockHash,n.withdrawBlockHash)))).get("headerDeps").size-2,i={inputType:o.bytes.hexify(o.number.Uint64.pack(r))};f=o.bytes.hexify(c.blockchain.WitnessArgs.pack(i))}if((0,l.isSecp256k1Blake160MultisigScript)(e,u)){const t=n.cellOutput.lock.args;a=58===t.length?g.BI.from(B(t)):void 0}t=await T(t,n,Object.assign({},p,{since:a}),{config:u,defaultWitness:f,since:n.since});const d=g.BI.from(n.cellOutput.capacity);let h=d;if(h.gt(y)&&(h=y),y=y.sub(h),b=b.add(d).sub(h),(0,l.isDaoScript)(n.cellOutput.type,u)&&(t=t.update("fixedEntries",(e=>e.push({field:"inputs",index:t.get("inputs").size-1},{field:"witnesses",index:t.get("witnesses").size-1},{field:"headerDeps",index:t.get("headerDeps").size-2})))),y.eq(0)&&(b.eq(0)||b.gt(m)))break}}}return{txSkeleton:t,capacity:g.BI.from(y.toString()),changeCapacity:g.BI.from(b.toString())}}async function x(t,e,r,n,{config:i,LocktimeCellCollector:o=S}={}){return O(t,e,void 0,r,n,{config:i,requireToAddress:!1,LocktimeCellCollector:o})}function I(t,{config:e}={}){return e=e||(0,f.getConfig)(),t=(0,l.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160"),t=(0,l.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160_MULTISIG")}async function P(t,e,r,n,{config:i,LocktimeCellCollector:o=S}={}){if(i=i||(0,f.getConfig)(),e>=t.get("outputs").size)throw new Error("Invalid output index!");const a=g.BI.from(t.get("outputs").get(e).cellOutput.capacity);return O(t,r,void 0,g.BI.from(a),n,{config:i,requireToAddress:!1,LocktimeCellCollector:o})}async function T(t,e,r,{config:n,since:i,defaultWitness:o="0x"}={}){return n=n||(0,f.getConfig)(),t=(t=await A(t,e,r,{config:n,since:i,defaultWitness:o})).update("outputs",(t=>t.remove(t.size-1)))}async function A(t,e,r,{config:n,since:i,defaultWitness:o="0x"}={}){n=n||(0,f.getConfig)();const a=e.cellOutput.lock;if((0,l.isSecp256k1Blake160Script)(a,n))return s.default.setupInputCell(t,e,r,{config:n,defaultWitness:o,since:i});if((0,l.isSecp256k1Blake160MultisigScript)(a,n))return d.secp256k1Blake160Multisig.setupInputCell(t,e,r,{config:n,defaultWitness:o,since:i});throw new Error("Not supported input lock!")}function B(t){if(58!==t.length)throw new Error("Invalid multisig with since args!");return o.number.Uint64LE.unpack("0x"+t.slice(42))}e.CellCollector=S;var H={CellCollector:S,transfer:k,transferCompatible:O,payFee:x,prepareSigningEntries:I,injectCapacity:P,setupInputCell:A,injectCapacityWithoutChange:async function(t,e,r,n,i,{config:o,LocktimeCellCollector:a=S,enableDeductCapacity:s=!0}){const u=await E(t,e,r,n,i,{config:o,LocktimeCellCollector:a,enableDeductCapacity:s});return{txSkeleton:u.txSkeleton,capacity:u.capacity.toBigInt(),changeCapacity:u.changeCapacity.toBigInt()}},injectCapacityWithoutChangeCompatible:E};e.default=H},314225:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeAddress=function(t){try{if(t.startsWith("bc1q"))return o.bech32.fromWords(o.bech32.decode(t).words.slice(1));if(t.startsWith("1"))return a.default.decode(t).slice(1,21);if(t.startsWith("3"))return a.default.decode(t).slice(1,21)}catch{if(t.startsWith("bc1p"))throw new Error("Taproot address is not supported yet.")}throw new Error(`Unsupported bitcoin address ${t}, only 1...(P2PKH) 3...(P2SH), and bc1...(Bech32) are supported.`)},e.signMessage=async function(t,e,r){const n=(()=>{if(r)return r;if("undefined"!==typeof window){if("unisat"in window)return window.unisat;if("okxwallet"in window&&"bitcoin"in window.okxwallet)return window.okxwallet.bitcoin}throw new Error("No provider found, make sure you have installed UniSat Wallet")})(),o=await n.requestAccounts(),a=i.bytes.hexify(t).slice(2),u=await n.signMessage(`${s}${a}`,e),c=i.bytes.bytify(function(t){const e=atob(t);let r="";for(let n=0;n<e.length;n++){const t=e.charCodeAt(n).toString(16);r+=2===t.length?t:"0"+t}return"0x"+r}(u)),l=o[0];if(l.startsWith("bc1q"))c[0]=39+(c[0]-27)%4;else if(l.startsWith("3"))c[0]=35+(c[0]-27)%4;else{if(!l.startsWith("1"))throw new Error(`Unsupported bitcoin address ${l}, only 1...(P2PKH) 3...(P2SH), and bc1...(Bech32) are supported.`);c[0]=31+(c[0]-27)%4}return i.bytes.hexify(c)};var n,i=r(412397),o=r(266534),a=(n=r(667232))&&n.__esModule?n:{default:n};const s="CKB (Bitcoin Layer) transaction: 0x"},860173:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bitcoin=e.OmnilockWitnessLock=e.CellCollector=void 0,e.createOmnilockScript=g,e.default=void 0,e.prepareSigningEntries=E,e.setupInputCell=C;var n=r(412397),i=r(214231),o=r(486532),a=r(78102),s=r(491686),u=r(847702),c=r(133686),l=r(432670),p=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=f(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(314225));function f(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(f=function(t){return t?r:e})(t)}e.bitcoin=p;const{ScriptValue:d}=i.values;var h=function(t){return t[t.IdentityFlagsCkb=0]="IdentityFlagsCkb",t[t.IdentityFlagsEthereum=1]="IdentityFlagsEthereum",t[t.IdentityFlagsEos=2]="IdentityFlagsEos",t[t.IdentityFlagsTron=3]="IdentityFlagsTron",t[t.IdentityFlagsBitcoin=4]="IdentityFlagsBitcoin",t[t.IdentityFlagsDogecoin=5]="IdentityFlagsDogecoin",t[t.IdentityCkbMultisig=6]="IdentityCkbMultisig",t[t.IdentityFlagsEthereumDisplaying=18]="IdentityFlagsEthereumDisplaying",t[t.IdentityFlagsOwnerLock=252]="IdentityFlagsOwnerLock",t[t.IdentityFlagsExec=253]="IdentityFlagsExec",t[t.IdentityFlagsDl=254]="IdentityFlagsDl",t}(h||{});function g(t,e){const r=((null===e||void 0===e?void 0:e.config)||(0,o.getConfig)()).SCRIPTS.OMNILOCK;if(!r)throw new Error("OMNILOCK script config not found.");const i=[0],a=(()=>{const e=t.auth.flag;switch(e){case"ETHEREUM":return n.bytes.hexify(n.bytes.concat([h.IdentityFlagsEthereum],t.auth.content,i));case"SECP256K1_BLAKE160":return n.bytes.hexify(n.bytes.concat([h.IdentityFlagsCkb],t.auth.content,i));case"BITCOIN":return n.bytes.hexify(n.bytes.concat([h.IdentityFlagsBitcoin],p.decodeAddress(t.auth.content),i));default:throw new Error(`Not supported flag: ${e}.`)}})();return{codeHash:r.CODE_HASH,hashType:r.HASH_TYPE,args:a}}const y={pack:l.bytify,unpack:l.hexify},_=(0,c.createFixedHexBytesCodec)(21),m=(0,u.byteVecOf)(y),b=(0,u.table)({mask:(0,u.byteOf)(y),proof:m},["mask","proof"]),v=(0,u.vector)(b),w=(0,u.table)({identity:_,proofs:v},["identity","proofs"]),S=(0,u.option)(w),k=(0,u.table)({signature:c.BytesOpt,omni_identity:S,preimage:c.BytesOpt},["signature","omni_identity","preimage"]);e.OmnilockWitnessLock=k;const O=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,o.getConfig)(),this.fromScript=(0,s.parseFromInfo)(t,{config:r}).fromScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,a.isOmnilockScript)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function C(t,e,r,{config:s,defaultWitness:u="0x",since:c}={}){s=s||(0,o.getConfig)();const l=e.cellOutput.lock;if(!(0,a.isOmnilockScript)(l,s))throw new Error("Not OMNILOCK input!");t=t.update("inputs",(t=>t.push(e)));const p={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",(t=>t.push(p))),c&&(t=t.update("inputSinces",(e=>e.set(t.get("inputs").size-1,c)))),t=t.update("witnesses",(t=>t.push(u)));const f=s.SCRIPTS.OMNILOCK,h=s.SCRIPTS.SECP256K1_BLAKE160;if(!f)throw new Error("OMNILOCK script not defined in config!");if(!h)throw new Error("SECP256K1_BLAKE160 script not defined in config!");const g={txHash:f.TX_HASH,index:f.INDEX},y={txHash:h.TX_HASH,index:h.INDEX};t=(0,a.addCellDep)(t,{outPoint:g,depType:f.DEP_TYPE});const _=(t=(0,a.addCellDep)(t,{outPoint:y,depType:h.DEP_TYPE})).get("inputs").findIndex((t=>new d(t.cellOutput.lock,{validate:!1}).equals(new d(l,{validate:!1}))));if(-1!==_){for(;_>=t.get("witnesses").size;)t=t.update("witnesses",(t=>t.push("0x")));let e=t.get("witnesses").get(_);const r={lock:a.OMNILOCK_SIGNATURE_PLACEHOLDER};e=n.bytes.hexify(i.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",(t=>t.set(_,e)))}return t}function E(t,{config:e}={}){return e=e||(0,o.getConfig)(),(0,a.prepareSigningEntries)(t,e,"OMNILOCK")}e.CellCollector=O;var x={prepareSigningEntries:E,setupInputCell:C,CellCollector:O,OmnilockWitnessLock:k,createOmnilockScript:g};e.default=x},894578:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createP2PKHMessageGroup=function(t,e,{hasher:r=s}={}){const c=function(t,e){const r=new Set;for(const o of e){const t=n.utils.ckbHash(n.blockchain.Script.pack(o));r.add(t)}const i=new Map;for(let o=0;o<t.length;o++){const e=n.utils.ckbHash(n.blockchain.Script.pack(t[o].cellOutput.lock));r.has(e)&&(void 0===i.get(e)&&i.set(e,[]),i.get(e).push(o))}return i}(t.inputs.toArray(),e),l=function(t){const e=(0,i.createTransactionFromSkeleton)(t),r={cellDeps:e.cellDeps,headerDeps:e.headerDeps,inputs:e.inputs,outputs:e.outputs,outputsData:e.outputsData,version:e.version};return n.utils.ckbHash(n.blockchain.RawTransaction.pack(r))}(t);if(e.length>1&&!(r instanceof Function))throw new Error("Must provide hasher producer when you have multiple locks to group.");const p=[];for(const n of c.keys()){const e=u(r),i=c.get(n),s=i[0],f=t.witnesses.get(s);if(void 0===f)throw new Error("Please fill witnesses with 0 first!");e.update(o.bytes.bytify(l));const d=new ArrayBuffer(8),h=new DataView(d),g=a.BI.from(o.bytes.bytify(f).length).toString(16);g.length<=8&&(h.setUint32(0,Number("0x"+g),!0),h.setUint32(4,Number("0x00000000"),!0)),g.length>8&&g.length<=16&&(h.setUint32(0,Number("0x"+g.slice(-8)),!0),h.setUint32(4,Number("0x"+g.slice(0,-8)),!0)),e.update(new Uint8Array(d)),e.update(o.bytes.bytify(f));for(let r=1;r<i.length;r++){const n=t.witnesses.get(i[r]);e.update(new Uint8Array(d)),e.update(o.bytes.bytify(n))}for(let r=t.inputs.toArray().length;r<t.witnesses.toArray().length;r++){const n=t.witnesses.get(r);e.update(new Uint8Array(d)),e.update(o.bytes.bytify(n))}const y=e.digest(),_={index:s,lock:t.inputs.get(s).cellOutput.lock,message:"0x"+Array.prototype.map.call(y,(t=>("00"+t.toString(16)).slice(-2))).join("")};p.push(_)}return p};var n=r(214231),i=r(587472),o=r(412397),a=r(356997);const s=()=>{const t=new n.utils.CKBHasher;return{update:e=>t.update(e.buffer),digest:()=>o.bytes.bytify(t.digestHex())}};function u(t){return t instanceof Function?t():t}},152957:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CellCollector=void 0,e.injectCapacity=_,e.payFee=y,e.prepareSigningEntries=m,e.setupInputCell=d,e.transfer=h,e.transferCompatible=g;var n=r(727623),i=r(587472),o=r(412397),a=r(214231),s=r(486532),u=r(78102),c=r(491686),l=r(356997);const{ScriptValue:p}=a.values,f=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,s.getConfig)(),this.fromScript=(0,c.parseFromInfo)(t,{config:r}).fromScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,u.isSecp256k1Blake160Script)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function d(t,e,r,{config:n,defaultWitness:i="0x",since:c}={}){n=n||(0,s.getConfig)();const l=e.cellOutput.lock;if(!(0,u.isSecp256k1Blake160Script)(l,n))throw new Error("Not SECP256K1_BLAKE160 input!");t=t.update("inputs",(t=>t.push(e)));const f={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",(t=>t.push(f))),c&&(t=t.update("inputSinces",(e=>e.set(t.get("inputs").size-1,c)))),t=t.update("witnesses",(t=>t.push(i)));const d=n.SCRIPTS.SECP256K1_BLAKE160;if(!d)throw new Error("SECP256K1_BLAKE160 script not defined in config!");const h={txHash:d.TX_HASH,index:d.INDEX},g=(t=(0,u.addCellDep)(t,{outPoint:h,depType:d.DEP_TYPE})).get("inputs").findIndex((t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(l,{validate:!1}))));if(-1!==g){for(;g>=t.get("witnesses").size;)t=t.update("witnesses",(t=>t.push("0x")));let e=t.get("witnesses").get(g);const r={lock:u.SECP_SIGNATURE_PLACEHOLDER};if("0x"!==e){const t=a.blockchain.WitnessArgs.unpack(o.bytes.bytify(e)),n=t.lock;if(n&&r.lock&&!o.bytes.equal(n,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const i=t.inputType;i&&(r.inputType=i);const s=t.outputType;s&&(r.outputType=s)}e=o.bytes.hexify(a.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",(t=>t.set(g,e)))}return t}async function h(t,e,r,n,{config:i,requireToAddress:o=!0,assertAmountEnough:a=!0}={}){const s=await g(t,e,r,n,{config:i,requireToAddress:o,assertAmountEnough:a});let u,c;return s instanceof Array?(u=s[0],c=BigInt(s[1].toString()),[u,c]):(u=s,u)}async function g(t,e,r,c,{config:f,requireToAddress:d=!0,assertAmountEnough:h=!0}={}){const g=(f=f||(0,s.getConfig)()).SCRIPTS.SECP256K1_BLAKE160;if(!g)throw new Error("Provided config does not have SECP256K1_BLAKE160 script setup!");const y={txHash:g.TX_HASH,index:g.INDEX};t=(0,u.addCellDep)(t,{outPoint:y,depType:g.DEP_TYPE});const _=(0,i.parseAddress)(e,{config:f});if((0,u.ensureScript)(_,f,"SECP256K1_BLAKE160"),d&&!r)throw new Error("You must provide a to address!");let m=l.BI.from(c);if(r){const e=(0,i.parseAddress)(r,{config:f});t=t.update("outputs",(t=>t.push({cellOutput:{capacity:"0x"+m.toString(16),lock:e,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0})))}const b=t.get("fixedEntries").filter((({field:t})=>"outputs"===t)).maxBy((({index:t})=>t));let v=b?b.index+1:0;for(;v<t.get("outputs").size&&m.gt(0);v++){const e=t.get("outputs").get(v);if(new p(e.cellOutput.lock,{validate:!1}).equals(new p(_,{validate:!1}))){const t=l.BI.from(e.cellOutput.capacity);let r;m.gte(t)?r=t:(r=t.sub((0,i.minimalCellCapacityCompatible)(e)),r.gt(m)&&(r=m)),m=m.sub(r),e.cellOutput.capacity="0x"+t.sub(r).toString(16)}}if(t=t.update("outputs",(t=>t.filter((t=>!l.BI.from(t.cellOutput.capacity).eq(0))))),m.gt(0)){const e=t.get("cellProvider");if(!e)throw new Error("Cell provider is missing!");const r=e.collector({lock:_}),o={cellOutput:{capacity:"0x0",lock:_,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let a=l.BI.from(0),s=(0,n.Set)();for(const n of t.get("inputs"))s=s.add(`${n.outPoint.txHash}_${n.outPoint.index}`);for await(const n of r.collect()){if(s.has(`${n.outPoint.txHash}_${n.outPoint.index}`))continue;t=(t=t.update("inputs",(t=>t.push(n)))).update("witnesses",(t=>t.push("0x")));const e=l.BI.from(n.cellOutput.capacity);let r=e;if(r.gt(m)&&(r=m),m=m.sub(r),a=a.add(e).sub(r),m.eq(0)&&(a.eq(0)||a.gt((0,i.minimalCellCapacityCompatible)(o))))break}a.gt(0)&&(o.cellOutput.capacity="0x"+a.toString(16),t=t.update("outputs",(t=>t.push(o))))}if(m.gt(0)&&h)throw new Error("Not enough capacity in from address!");const w=t.get("inputs").findIndex((t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(_,{validate:!1}))));if(-1!==w){for(;w>=t.get("witnesses").size;)t=t.update("witnesses",(t=>t.push("0x")));let e=t.get("witnesses").get(w);const r={lock:u.SECP_SIGNATURE_PLACEHOLDER};if("0x"!==e){const t=a.blockchain.WitnessArgs.unpack(o.bytes.bytify(e)),n=t.lock;if(n&&r.lock&&!o.bytes.equal(n,r.lock))throw new Error("Lock field in first witness is set aside for signature!");const i=t.inputType;i&&(r.inputType=i);const s=t.outputType;s&&(r.outputType=s)}e=o.bytes.hexify(a.blockchain.WitnessArgs.pack(r)),t=t.update("witnesses",(t=>t.set(w,e)))}return h?t:[t,l.BI.from(m)]}async function y(t,e,r,{config:n}={}){return n=n||(0,s.getConfig)(),await g(t,e,null,r,{config:n,requireToAddress:!1})}async function _(t,e,r,{config:n}={}){if(n=n||(0,s.getConfig)(),e>=t.get("outputs").size)throw new Error("Invalid output index!");const i=l.BI.from(t.get("outputs").get(e).cellOutput.capacity);return await g(t,r,null,l.BI.from(i),{config:n,requireToAddress:!1})}function m(t,{config:e}={}){return e=e||(0,s.getConfig)(),(0,u.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160")}e.CellCollector=f;var b={transfer:h,transferCompatible:g,payFee:y,prepareSigningEntries:m,injectCapacity:_,setupInputCell:d,CellCollector:f};e.default=b},635489:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CellCollector=void 0,e.injectCapacity=_,Object.defineProperty(e,"multisigArgs",{enumerable:!0,get:function(){return c.multisigArgs}}),e.payFee=y,e.prepareSigningEntries=m,Object.defineProperty(e,"serializeMultisigScript",{enumerable:!0,get:function(){return c.serializeMultisigScript}}),e.setupInputCell=d,e.transfer=h,e.transferCompatible=g;var n=r(587472),i=r(412397),o=r(214231),a=r(486532),s=r(727623),u=r(78102),c=r(491686),l=r(356997);const{ScriptValue:p}=o.values,f=class{constructor(t,e,{config:r,queryOptions:n={}}={}){if(!e)throw new Error("Cell provider is missing!");r=r||(0,a.getConfig)();const i=(0,c.parseFromInfo)(t,{config:r});this.fromScript=i.fromScript,this.multisigScript=i.multisigScript,this.config=r,n={...n,lock:this.fromScript,type:n.type||"empty"},this.cellCollector=e.collector(n)}async*collect(){if((0,u.isSecp256k1Blake160MultisigScript)(this.fromScript,this.config))for await(const t of this.cellCollector.collect())yield t}};async function d(t,e,r,{config:n,defaultWitness:s="0x",since:l,requireMultisigScript:f=!0}={}){if(n=n||(0,a.getConfig)(),f&&"object"!==typeof r)throw new Error("`fromInfo` must be MultisigScript format!");const d=e.cellOutput.lock;if(r){const t=(0,c.parseFromInfo)(r,{config:n}).fromScript;if(!new p(t,{validate:!1}).equals(new p(d,{validate:!1})))throw new Error("`fromInfo` not match to input lock!")}if(!(0,u.isSecp256k1Blake160MultisigScript)(d,n))throw new Error("Not SECP256K1_BLAKE160_MULTISIG input!");t=t.update("inputs",(t=>t.push(e))),l&&(t=t.update("inputSinces",(e=>e.set(t.get("inputs").size-1,l)))),t=t.update("witnesses",(t=>t.push(s)));const h={cellOutput:{capacity:e.cellOutput.capacity,lock:e.cellOutput.lock,type:e.cellOutput.type},data:e.data};t=t.update("outputs",(t=>t.push(h)));const g=n.SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!g)throw new Error("SECP256K1_BLAKE160_MULTISIG script not defined in config!");const y={txHash:g.TX_HASH,index:g.INDEX},_=(t=(0,u.addCellDep)(t,{outPoint:y,depType:g.DEP_TYPE})).get("inputs").findIndex((t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(d,{validate:!1}))));if(-1!==_){for(;_>=t.get("witnesses").size;)t=t.update("witnesses",(t=>t.push("0x")));if("0x"===t.get("witnesses").get(_)&&"object"!==typeof r)throw new Error("`fromInfo` must be MultisigScript format!");if("object"===typeof r){const e=(0,c.parseFromInfo)(r,{config:n}).multisigScript;let a=t.get("witnesses").get(_);const s={lock:"0x"+e.slice(2)+u.SECP_SIGNATURE_PLACEHOLDER.slice(2).repeat(r.M)};if("0x"!==a){const t=o.blockchain.WitnessArgs.unpack(i.bytes.bytify(a)),e=t.lock;if(e&&s.lock&&!i.bytes.equal(e,s.lock))throw new Error("Lock field in first witness is set aside for signature!");const r=t.inputType;r&&(s.inputType=r);const n=t.outputType;n&&(s.outputType=n)}a=i.bytes.hexify(o.blockchain.WitnessArgs.pack(s)),t=t.update("witnesses",(t=>t.set(_,a)))}}return t}async function h(t,e,r,n,{config:i,requireToAddress:o=!0,assertAmountEnough:a=!0}={}){const s=await g(t,e,r,n,{config:i,requireToAddress:o,assertAmountEnough:a});let u,c;return s instanceof Array?(u=s[0],c=BigInt(s[1].toString()),[u,c]):(u=s,u)}async function g(t,e,r,f,{config:d,requireToAddress:h=!0,assertAmountEnough:g=!0}={}){const y=(d=d||(0,a.getConfig)()).SCRIPTS.SECP256K1_BLAKE160_MULTISIG;if(!y)throw new Error("Provided config does not have SECP256K1_BLAKE16_MULTISIG script setup!");const _={txHash:y.TX_HASH,index:y.INDEX};t=(0,u.addCellDep)(t,{outPoint:_,depType:y.DEP_TYPE});const{fromScript:m,multisigScript:b}=(0,c.parseFromInfo)(e,{config:d});(0,u.ensureScript)(m,d,"SECP256K1_BLAKE160_MULTISIG");const v=!t.get("inputs").find((t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(m,{validate:!1}))));if(v&&"string"===e)throw new Error("MultisigScript is required for witness!");if(h&&!r)throw new Error("You must provide a to address!");let w=f?l.BI.from(f):l.BI.from(0);if(r){const e=(0,n.parseAddress)(r,{config:d});t=t.update("outputs",(t=>t.push({cellOutput:{capacity:"0x"+w.toString(16),lock:e,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0})))}const S=t.get("fixedEntries").filter((({field:t})=>"outputs"===t)).maxBy((({index:t})=>t));let k=S?S.index+1:0;for(;k<t.get("outputs").size&&w.gt(0);++k){const e=t.get("outputs").get(k);if(new p(e.cellOutput.lock,{validate:!1}).equals(new p(m,{validate:!1}))){const t=l.BI.from(e.cellOutput.capacity);let r;w.gte(t)?r=t:(r=t.sub((0,n.minimalCellCapacityCompatible)(e)),r.gt(w)&&(r=w)),w=w.sub(r),e.cellOutput.capacity="0x"+t.sub(r).toString(16)}}if(t=t.update("outputs",(t=>t.filter((t=>!l.BI.from(t.cellOutput.capacity).eq(0))))),w.gt(0)){const e=t.get("cellProvider");if(!e)throw new Error("cell provider is missing!");const r=e.collector({lock:m}),i={cellOutput:{capacity:"0x0",lock:m,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let o=l.BI.from(0),a=(0,s.Set)();for(const n of t.get("inputs"))a=a.add(`${n.outPoint.txHash}_${n.outPoint.index}`);for await(const s of r.collect()){if(a.has(`${s.outPoint.txHash}_${s.outPoint.index}`))continue;t=(t=t.update("inputs",(t=>t.push(s)))).update("witnesses",(t=>t.push("0x")));const e=l.BI.from(s.cellOutput.capacity);let r=e;if(r.gt(w)&&(r=w),w=w.sub(r),o=o.add(e.sub(r)),w.eq(0)&&(o.eq(0)||o.gt((0,n.minimalCellCapacityCompatible)(i))))break}o.gt(0)&&(i.cellOutput.capacity="0x"+o.toString(16),t=t.update("outputs",(t=>t.push(i))))}if(w.gt(0)&&g)throw new Error("Not enough capacity in from address!");const O=t.get("inputs").findIndex((t=>new p(t.cellOutput.lock,{validate:!1}).equals(new p(m,{validate:!1}))));if(-1!==O){for(;l.BI.from(O).gte(t.get("witnesses").size);)t=t.update("witnesses",(t=>t.push("0x")));if(v||"string"!==typeof e){let r=t.get("witnesses").get(O);const n={lock:"0x"+b.slice(2)+u.SECP_SIGNATURE_PLACEHOLDER.slice(2).repeat(e.M)};if("0x"!==r){const t=o.blockchain.WitnessArgs.unpack(i.bytes.bytify(r)),e=t.lock;if(e&&n.lock&&!i.bytes.equal(e,n.lock))throw new Error("Lock field in first witness is set aside for signature!");const a=t.inputType;a&&(n.inputType=a);const s=t.outputType;s&&(n.outputType=s)}r=i.bytes.hexify(o.blockchain.WitnessArgs.pack(n)),t=t.update("witnesses",(t=>t.set(O,r)))}}return g?t:[t,l.BI.from(w)]}async function y(t,e,r,{config:n}={}){return g(t,e,void 0,r,{config:n=n||(0,a.getConfig)(),requireToAddress:!1})}async function _(t,e,r,{config:n}={}){if(n=n||(0,a.getConfig)(),e>=t.get("outputs").size)throw new Error("Invalid output index!");const i=l.BI.from(t.get("outputs").get(e).cellOutput.capacity);return g(t,r,void 0,i,{config:n,requireToAddress:!1})}function m(t,{config:e}={}){return e=e||(0,a.getConfig)(),(0,u.prepareSigningEntries)(t,e,"SECP256K1_BLAKE160_MULTISIG")}e.CellCollector=f;var b={transfer:h,transferCompatible:g,payFee:y,prepareSigningEntries:m,serializeMultisigScript:c.serializeMultisigScript,multisigArgs:c.multisigArgs,injectCapacity:_,setupInputCell:d,CellCollector:f};e.default=b},562:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.issueToken=v,e.ownerForSudt=S,e.packAmount=O,e.transfer=w,e.unpackAmount=k;var n=r(78102),i=r(214231),o=_(r(635489)),a=r(491686),s=_(r(614466)),u=r(587472),c=r(727623),l=r(486532),p=r(61049),f=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=y(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(408425)),d=_(r(152957)),h=r(356997),g=r(412397);function y(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(y=function(t){return t?r:e})(t)}function _(t){return t&&t.__esModule?t:{default:t}}const{computeScriptHash:m}=i.utils,{ScriptValue:b}=i.values;async function v(t,e,r,i,o,{config:c}={}){const p=(c=c||(0,l.getConfig)()).SCRIPTS.SUDT;if(!p)throw new Error("Provided config does not have SUDT script setup!");t=(0,n.addCellDep)(t,{outPoint:{txHash:p.TX_HASH,index:p.INDEX},depType:p.DEP_TYPE});const f=(0,a.parseFromInfo)(e,{config:c}).fromScript,d={cellOutput:{capacity:"0x0",lock:f,type:{codeHash:p.CODE_HASH,hashType:p.HASH_TYPE,args:m(f)}},data:g.bytes.hexify(g.number.Uint128LE.pack(r)),outPoint:void 0,blockHash:void 0};i||(i=(0,u.minimalCellCapacityCompatible)(d));const y=h.BI.from(i);d.cellOutput.capacity="0x"+y.toString(16);const _=(t=t.update("outputs",(t=>t.push(d)))).get("outputs").size-1;return t=t.update("fixedEntries",(t=>t.push({field:"outputs",index:_}))),t=await s.default.injectCapacity(t,[e],h.BI.from(h.BI.from(d.cellOutput.capacity)),void 0,o,{config:c})}async function w(t,e,r,i,y,_,m,v,{config:w,LocktimePoolCellCollector:S=p.CellCollector,splitChangeCell:O=!1}={}){w=w||(0,l.getConfig)();let C=h.BI.from(y),E=m?h.BI.from(m):void 0;const x=w.SCRIPTS.SUDT;if(!x)throw new Error("Provided config does not have SUDT script setup!");if(0===e.length)throw new Error("`fromInfos` can't be empty!");if(!i)throw new Error("You must provide a to address!");const I=(0,u.parseAddress)(i,{config:w}),P=e.map((t=>(0,a.parseFromInfo)(t,{config:w}).fromScript)),T=_?(0,u.parseAddress)(_,{config:w}):P[0];if(C.lte(0))throw new Error("amount must be greater than 0");const A=function(t,e){const r=e.SCRIPTS.SUDT;return{codeHash:r.CODE_HASH,hashType:r.HASH_TYPE,args:t}}(r,w),B=t.get("cellProvider");if(!B)throw new Error("Cell provider is missing!");let H=h.BI.from(0),D=h.BI.from(0);if((0,n.isAcpScript)(I,w)){const e=new f.CellCollector(i,B,{config:w,queryOptions:{type:A,data:"any"}}),r=(await e.collect().next()).value;if(!r)throw new Error("toAddress ANYONE_CAN_PAY input not found!");t=(t=t.update("inputs",(t=>t.push(r)))).update("witnesses",(t=>t.push("0x"))),H=h.BI.from(r.cellOutput.capacity),D=k(r.data)}const j={cellOutput:{capacity:"0x0",lock:I,type:A},data:g.bytes.hexify(g.number.Uint128LE.pack(C)),outPoint:void 0,blockHash:void 0};(0,n.isAcpScript)(I,w)?(E||(E=h.BI.from(0)),j.cellOutput.capacity="0x"+H.add(E).toString(16),j.data=g.bytes.hexify(g.number.Uint128LE.pack(D.add(C)))):(E||(E=h.BI.from((0,u.minimalCellCapacityCompatible)(j))),j.cellOutput.capacity="0x"+E.toString(16)),t=(t=t.update("outputs",(t=>t.push(j)))).update("fixedEntries",(e=>e.push({field:"outputs",index:t.get("outputs").size-1}))),t=(0,n.addCellDep)(t,{outPoint:{txHash:x.TX_HASH,index:x.INDEX},depType:x.DEP_TYPE});const L={cellOutput:{capacity:"0x0",lock:T,type:A},data:g.bytes.hexify(g.number.Uint128LE.pack(0)),outPoint:void 0,blockHash:void 0},M={cellOutput:{capacity:"0x0",lock:T,type:void 0},data:"0x",outPoint:void 0,blockHash:void 0};let R=h.BI.from(0),N=h.BI.from(0),z=(0,c.Set)();for(const n of t.get("inputs"))z=z.add(`${n.outPoint.txHash}_${n.outPoint.index}`);let F=(0,c.List)();v&&e.forEach(((t,e)=>{const r=new S(t,B,{config:w,tipHeader:v,queryOptions:{type:A,data:"any"}});F=F.push({cellCollector:r,index:e})})),e.forEach(((t,e)=>{const r=new d.default.CellCollector(t,B,{config:w,queryOptions:{type:A,data:"any"}}),n=new o.default.CellCollector(t,B,{config:w,queryOptions:{type:A,data:"any"}}),i=new f.default.CellCollector(t,B,{config:w,queryOptions:{type:A,data:"any"}});F=F.push({cellCollector:r,index:e},{cellCollector:n,index:e},{cellCollector:i,index:e,isAnyoneCanPay:!0,destroyable:(0,a.parseFromInfo)(t,{config:w}).destroyable})})),v&&e.forEach(((t,e)=>{const r=new S(t,B,{config:w,tipHeader:v});F=F.push({cellCollector:r,index:e})})),e.forEach(((t,e)=>{const r=new d.default.CellCollector(t,B,{config:w}),n=new o.default.CellCollector(t,B,{config:w}),i=new f.default.CellCollector(t,B,{config:w});F=F.push({cellCollector:r,index:e},{cellCollector:n,index:e},{cellCollector:i,index:e,isAnyoneCanPay:!0,destroyable:(0,a.parseFromInfo)(t,{config:w}).destroyable})}));for(const{index:n,cellCollector:o,isAnyoneCanPay:a,destroyable:c}of F)for await(const r of o.collect()){const i=`${r.outPoint.txHash}_${r.outPoint.index}`;if(z.has(i))continue;z=z.add(i);const o=e[n],l=(t=await s.default.setupInputCell(t,r,o,{config:w})).get("outputs").size-1,p=(t=t.update("outputs",(t=>t.remove(l)))).get("fixedEntries").findIndex((t=>"outputs"===t.field&&t.index===l));p>=0&&(t=t.update("fixedEntries",(t=>t.remove(p))));const f=h.BI.from(r.cellOutput.capacity),d=r.cellOutput.type?k(r.data):h.BI.from(0);let y=a&&!c?f.sub((0,u.minimalCellCapacityCompatible)(r)):f,_=d;y.gt(E)&&(y=h.BI.from(E)),E=E.sub(y);const m=f.sub(y);(!a||a&&c)&&(R=R.add(m)),_.gt(C)&&(_=C),C=C.sub(_);const b=d.sub(_);if((!a||a&&c)&&(N=N.add(b)),a&&!c){const e={cellOutput:{capacity:"0x"+m.toString(16),lock:r.cellOutput.lock,type:r.cellOutput.type},data:r.cellOutput.type?g.bytes.hexify(g.number.Uint128LE.pack(b)):"0x"};t=t.update("outputs",(t=>t.push(e))),r.cellOutput.type&&(t=t.update("fixedEntries",(e=>e.push({field:"outputs",index:t.get("outputs").size-1}))))}if(E.eq(0)&&C.eq(0)&&(R.eq(0)&&N.eq(0)||R.gt((0,u.minimalCellCapacityCompatible)(M))&&N.eq(0))){L.cellOutput.type=void 0,L.data="0x";break}if(E.eq(0)&&C.eq(0)&&R.gt((0,u.minimalCellCapacityCompatible)(M))&&N.gt(0))break}let U=-1;if((0,n.isAcpScript)(L.cellOutput.lock,w)&&-1!==(U=t.get("outputs").findIndex((t=>new b(L.cellOutput.lock,{validate:!1}).equals(new b(t.cellOutput.lock,{validate:!1}))&&(N.eq(0)&&!L.cellOutput.type&&!t.cellOutput.type||N.gte(0)&&!!L.cellOutput.type&&!!t.cellOutput.type&&new b(L.cellOutput.type,{validate:!1}).equals(new b(t.cellOutput.type,{validate:!1}))))))&&-1===t.get("fixedEntries").findIndex((t=>"output"===t.field&&t.index===U))){const e=t.get("outputs").get(U),r=JSON.parse(JSON.stringify(e));r.cellOutput.capacity="0x"+h.BI.from(e.cellOutput.capacity).add(R).toString(16),N.gt(0)&&(r.data=g.bytes.hexify(g.number.Uint128LE.pack(k(e.data).add(N))));const n=h.BI.from((0,u.minimalCellCapacityCompatible)(L)),i=h.BI.from((0,u.minimalCellCapacityCompatible)(M));let o=!1;N.gt(0)&&O&&R.gte(n.add(i))&&(r.cellOutput.capacity=e.cellOutput.capacity,M.cellOutput.capacity="0x"+R.toString(16),o=!0),t=t.update("outputs",(t=>t.set(U,r))),o&&(t=t.update("outputs",(t=>t.push(M))))}else if(R.gte((0,u.minimalCellCapacityCompatible)(L))){L.cellOutput.capacity="0x"+R.toString(16),N.gt(0)&&(L.data=g.bytes.hexify(g.number.Uint128LE.pack(N)));const e=h.BI.from((0,u.minimalCellCapacityCompatible)(L)),r=h.BI.from((0,u.minimalCellCapacityCompatible)(M));let n=!1;N.gt(0)&&O&&R.gte(e.add(r))&&(L.cellOutput.capacity="0x"+e.toString(16),M.cellOutput.capacity="0x"+R.sub(e).toString(16),n=!0),t=t.update("outputs",(t=>t.push(L))),N.gt(0)&&(t=t.update("fixedEntries",(e=>e.push({field:"outputs",index:t.get("outputs").size-1})))),n&&(t=t.update("outputs",(t=>t.push(M))))}else if(N.gt(0)&&R.lt((0,u.minimalCellCapacityCompatible)(L)))throw new Error("Not enough capacity for change in from infos!");if(E.gt(0))throw new Error("Not enough capacity in from infos!");if(C.gt(0))throw new Error("Not enough amount in from infos!");return t}function S(t,{config:e}={}){e=e||(0,l.getConfig)();const{fromScript:r}=(0,a.parseFromInfo)(t,{config:e});return m(r)}function k(t){return g.number.Uint128LE.unpack(g.bytes.bytify(t).slice(0,16))}function O(t){return g.bytes.hexify(g.number.Uint128LE.pack(t))}var C={issueToken:v,transfer:w,ownerForSudt:S,packAmount:O,unpackAmount:k};e.default=C},884512:t=>{"use strict";t.exports=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var a=t.length,s=t.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var r=0,n=0,i=0;t[r]===s;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var l=e[t.charCodeAt(r)];if(255===l)return;for(var p=0,f=o-1;(0!==l||p<i)&&-1!==f;f--,p++)l+=a*c[f]>>>0,c[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=p,r++}for(var d=o-i;d!==o&&0===c[d];)d++;for(var h=new Uint8Array(n+(o-d)),g=n;d!==o;)h[g++]=c[d++];return h}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,l=new Uint8Array(u);i!==o;){for(var p=e[i],f=0,d=u-1;(0!==p||f<n)&&-1!==d;d--,f++)p+=256*l[d]>>>0,l[d]=p%a>>>0,p=p/a>>>0;if(0!==p)throw new Error("Non-zero carry");n=f,i++}for(var h=u-n;h!==u&&0===l[h];)h++;for(var g=s.repeat(r);h<u;++h)g+=t.charAt(l[h]);return g},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base"+a+" character")}}}},667232:(t,e,r)=>{const n=r(884512);t.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},19676:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIGHASH_OUTPUT_LOC=e.SIGHASH_GROUP_OUTPUT_LOC=e.MULTISIG_OUTPUT_LOC=e.MULTISIG_GROUP_OUTPUT_LOC=e.DAO_OUTPUT_LOC=void 0,e.generateGenesisScriptConfigs=function(t){if(!t||0!==Number(t.header.number))throw new Error("The block must be a genesis block");const e=t.transactions;return{SECP256K1_BLAKE160:{...c({transaction:e[i[0]],outputIndex:i[1],depGroupTransaction:e[s[0]],depGroupOutputIndex:s[1]}),SHORT_ID:0},SECP256K1_BLAKE160_MULTISIG:{...c({transaction:e[o[0]],outputIndex:o[1],depGroupTransaction:e[u[0]],depGroupOutputIndex:u[1]}),SHORT_ID:1},DAO:c({transaction:e[a[0]],outputIndex:a[1]})}};var n=r(214231);const i=[0,1];e.SIGHASH_OUTPUT_LOC=i;const o=[0,4];e.MULTISIG_OUTPUT_LOC=o;const a=[0,2];e.DAO_OUTPUT_LOC=a;const s=[1,0];e.SIGHASH_GROUP_OUTPUT_LOC=s;const u=[1,1];function c(t){var e;const{transaction:r,outputIndex:i}=t,o=n.utils.computeScriptHash(l(null===(e=r.outputs[i])||void 0===e?void 0:e.type));if("depGroupTransaction"in t){const{depGroupOutputIndex:e,depGroupTransaction:r}=t;return{HASH_TYPE:"type",CODE_HASH:o,DEP_TYPE:"depGroup",TX_HASH:l(r.hash),INDEX:p(e)}}return{HASH_TYPE:"type",CODE_HASH:o,DEP_TYPE:"code",INDEX:p(i),TX_HASH:l(r.hash)}}function l(t){if(null==t)throw new Error("The block must be a genesis block");return t}function p(t){return`0x${t.toString(16)}`}e.MULTISIG_GROUP_OUTPUT_LOC=u},685655:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findConfigByScript=function(t,e){const r=e||(0,n.getConfig)().SCRIPTS;return Object.values(r).find((e=>(null===e||void 0===e?void 0:e.CODE_HASH)===t.codeHash&&(null===e||void 0===e?void 0:e.HASH_TYPE)===t.hashType))},e.nameOfScript=function(t,e){const r=e||(0,n.getConfig)().SCRIPTS,i=Object.entries(r).find((([,e])=>(null===e||void 0===e?void 0:e.CODE_HASH)===t.codeHash&&(null===e||void 0===e?void 0:e.HASH_TYPE)===t.hashType));return i?i[0]:void 0};var n=r(448812)},486532:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={initializeConfig:!0,getConfig:!0,validateConfig:!0,nameOfScript:!0,findConfigByScript:!0,helpers:!0,predefined:!0,createConfig:!0,generateGenesisScriptConfigs:!0,refreshScriptConfigs:!0,createRpcResolver:!0,createLatestTypeIdResolver:!0};Object.defineProperty(e,"createConfig",{enumerable:!0,get:function(){return s.createConfig}}),Object.defineProperty(e,"createLatestTypeIdResolver",{enumerable:!0,get:function(){return c.createLatestTypeIdResolver}}),Object.defineProperty(e,"createRpcResolver",{enumerable:!0,get:function(){return c.createRpcResolver}}),Object.defineProperty(e,"findConfigByScript",{enumerable:!0,get:function(){return a.findConfigByScript}}),Object.defineProperty(e,"generateGenesisScriptConfigs",{enumerable:!0,get:function(){return u.generateGenesisScriptConfigs}}),Object.defineProperty(e,"getConfig",{enumerable:!0,get:function(){return o.getConfig}}),e.helpers=void 0,Object.defineProperty(e,"initializeConfig",{enumerable:!0,get:function(){return o.initializeConfig}}),Object.defineProperty(e,"nameOfScript",{enumerable:!0,get:function(){return a.nameOfScript}}),Object.defineProperty(e,"predefined",{enumerable:!0,get:function(){return s.predefined}}),Object.defineProperty(e,"refreshScriptConfigs",{enumerable:!0,get:function(){return c.refreshScriptConfigs}}),Object.defineProperty(e,"validateConfig",{enumerable:!0,get:function(){return o.validateConfig}});var i=r(856439);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}));var o=r(448812),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=l(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(685655));e.helpers=a;var s=r(993988),u=r(19676),c=r(178407);function l(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(l=function(t){return t?r:e})(t)}},448812:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertHashType=c,e.getConfig=function(){return f},e.initializeConfig=function(t){t?(p(t),f=(0,i.default)(t)):(o.logger.deprecated("initializeConfig with env will be deprecated, please migrate to initializeConfig(...)"),function(){var t;const e=null===(t=process)||void 0===t?void 0:{NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"web",slug:"web",version:"0.0.1",web:{},description:"Multi-chain support for BTC/ETH/BNB/NEAR/Polygon/Solana/Avalanche/Fantom and others",sdkVersion:"49.0.0",platforms:["ios","android","web"]},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws",CI:"true"},n=null===e||void 0===e?void 0:e.LUMOS_CONFIG_NAME;if(("LINA"===n||"AGGRON4"===n)&&a.predefined[n])return void(f=a.predefined[n]);const o=(null===e||void 0===e?void 0:e.LUMOS_CONFIG_FILE)||"config.json";try{const t=r(498770).readFileSync(o),e=JSON.parse(t);p(e),f=(0,i.default)(e)}catch(s){throw new Error(`Error loading config from file ${o}: ${s}`)}}())},e.validateConfig=p;var n,i=(n=r(88629))&&n.__esModule?n:{default:n},o=r(214231),a=r(993988);function s(t,e){if(function(t,e){if(!/^0x([0-9a-fA-F][0-9a-fA-F])*$/.test(e))throw new Error(`${t} must be a hex string!`)}(t,e),66!=e.length)throw new Error(`${t} must be a hex string of 66 characters long!`)}function u(t,e){if("0x0"!==e&&!/^0x[1-9a-fA-F][0-9a-fA-F]*$/.test(e))throw new Error(`${t} must be a hex integer!`)}function c(t,e){if("type"!==e&&"data"!==e&&"data1"!==e&&"data2"!==e)throw new Error(`${t} must one of type, data, data1, data2!`)}function l(t,e="variable"){if(!t)throw new Error(`${e} is not valid`)}function p(t){l("object"===typeof t.SCRIPTS&&null!=t.SCRIPTS,"config.SCRIPT");for(const e of Object.keys(t.SCRIPTS)){const r=t.SCRIPTS[e];l(null===r||void 0===r?void 0:r.CODE_HASH),s(`SCRIPTS.${e}.CODE_HASH`,r.CODE_HASH),c(`SCRIPTS.${e}.HASH_TYPE`,r.HASH_TYPE),s(`SCRIPTS.${e}.TX_HASH`,r.TX_HASH),u(`SCRIPTS.${e}.INDEX`,r.INDEX);const n=r.DEP_TYPE;if("depGroup"!==n&&"code"!==n)throw new Error(`SCRIPTS.${e}.DEP_TYPE must either be depGroup or code!`);const i=r.SHORT_ID;if(void 0!=i&&"number"!==typeof i)throw new Error("SHORT_ID must be a number!")}}let f=a.predefined.LINA},993988:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createConfig=o,e.predefined=void 0;var n,i=(n=r(88629))&&n.__esModule?n:{default:n};function o(t){return(0,i.default)(t)}const a={LINA:o({PREFIX:"ckb",SCRIPTS:{SECP256K1_BLAKE160:{CODE_HASH:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",HASH_TYPE:"type",TX_HASH:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:0},SECP256K1_BLAKE160_MULTISIG:{CODE_HASH:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",HASH_TYPE:"type",TX_HASH:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",INDEX:"0x1",DEP_TYPE:"depGroup",SHORT_ID:1},DAO:{CODE_HASH:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",HASH_TYPE:"type",TX_HASH:"0xe2fb199810d49a4d8beec56718ba2593b665db9d52299a0f9e6e75416d73ff5c",INDEX:"0x2",DEP_TYPE:"code"},SUDT:{CODE_HASH:"0x5e7a36a77e68eecc013dfa2fe6a23f3b6c344b04005808694ae6dd45eea4cfd5",HASH_TYPE:"type",TX_HASH:"0xc7813f6a415144643970c2e88e0bb6ca6a8edc5dd7c1022746f628284a9936d5",INDEX:"0x0",DEP_TYPE:"code"},ANYONE_CAN_PAY:{CODE_HASH:"0xd369597ff47f29fbc0d47d2e3775370d1250b85140c670e4718af712983a2354",HASH_TYPE:"type",TX_HASH:"0x4153a2014952d7cac45f285ce9a7c5c0c0e1b21f2d378b82ac1433cb11c25c4d",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:2},OMNILOCK:{CODE_HASH:"0x9b819793a64463aed77c615d6cb226eea5487ccfc0783043a587254cda2b6f26",HASH_TYPE:"type",TX_HASH:"0xc76edf469816aa22f416503c38d0b533d2a018e253e379f134c3985b3472c842",INDEX:"0x0",DEP_TYPE:"code"}}}),AGGRON4:o({PREFIX:"ckt",SCRIPTS:{SECP256K1_BLAKE160:{CODE_HASH:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",HASH_TYPE:"type",TX_HASH:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:0},SECP256K1_BLAKE160_MULTISIG:{CODE_HASH:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",HASH_TYPE:"type",TX_HASH:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",INDEX:"0x1",DEP_TYPE:"depGroup",SHORT_ID:1},DAO:{CODE_HASH:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",HASH_TYPE:"type",TX_HASH:"0x8f8c79eb6671709633fe6a46de93c0fedc9c1b8a6527a18d3983879542635c9f",INDEX:"0x2",DEP_TYPE:"code"},SUDT:{CODE_HASH:"0xc5e5dcf215925f7ef4dfaf5f4b4f105bc321c02776d6e7d52a1db3fcd9d011a4",HASH_TYPE:"type",TX_HASH:"0xe12877ebd2c3c364dc46c5c992bcfaf4fee33fa13eebdf82c591fc9825aab769",INDEX:"0x0",DEP_TYPE:"code"},ANYONE_CAN_PAY:{CODE_HASH:"0x3419a1c09eb2567f6552ee7a8ecffd64155cffe0f1796e6e61ec088d740c1356",HASH_TYPE:"type",TX_HASH:"0xec26b0f85ed839ece5f11c4c4e837ec359f5adc4420410f6453b1f6b60fb96a6",INDEX:"0x0",DEP_TYPE:"depGroup",SHORT_ID:2},OMNILOCK:{CODE_HASH:"0xf329effd1c475a2978453c8600e1eaf0bc2087ee093c3ee64cc96ec6847752cb",HASH_TYPE:"type",TX_HASH:"0xec18bf0d857c981c3d1f4e17999b9b90c484b303378e94de1a57b0872f5d4602",INDEX:"0x0",DEP_TYPE:"code"}}})};e.predefined=a},178407:(t,e)=>{"use strict";function r(t,e){return async r=>{const o=await t(r.map((t=>t.txHash))),a=n(r,o,((t,e)=>(i(t),i(e,`Cannot find the OutPoint ${t.txHash}#${t.index}`),e.outputs[Number(t.index)].type))),s=await e(a.filter(Boolean));return n(r,a,((t,e)=>{if(i(t),!e)return t;const[r]=s.splice(0,1);return r.outPoint}))}}function n(t,e,r){return t.map(((n,i)=>r(t[i],e[i])))}function i(t,e="Not nullable"){if(null==t)throw new Error(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createLatestTypeIdResolver=r,e.createRpcResolver=function(t){return r((async e=>{const r=await t.createBatchRequest(e.map((t=>["getTransaction",t]))).exec();return n(e,r,((t,e)=>{if(null===e||void 0===e||!e.transaction)throw new Error(`Cannot find transaction ${t}`);return e.transaction}))}),(async e=>(await t.createBatchRequest(e.map((t=>["getCells",{script:t,scriptType:"type",scriptSearchMode:"exact",withData:!1},"asc","0x1"]))).exec()).map((t=>t.objects[0]))))},e.refreshScriptConfigs=async function(t,{resolve:e,skip:r=["SECP256K1_BLAKE160","SECP256K1_BLAKE160_MULTISIG","DAO"]}){const o=Object.entries(t).filter((([t,e])=>!r.includes(t)&&"type"===(null===e||void 0===e?void 0:e.HASH_TYPE))),a=o.map((([t,e])=>({txHash:e.TX_HASH,index:e.INDEX}))),s=await e(a),u=Object.fromEntries(n(o,s,((t,e)=>{i(t);const[r,n]=t;return i(e,`Refreshing failed, cannot load config of ${r}, please check whether the scriptConfig is correct`),[r,{...n,TX_HASH:e.txHash,INDEX:e.index}]})));return Object.assign({},t,u)}},856439:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},244917:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ADDRESS_FORMAT_SHORT=e.ADDRESS_FORMAT_FULLTYPE=e.ADDRESS_FORMAT_FULLDATA=e.ADDRESS_FORMAT_FULL=void 0,e.parseDeprecatedCkb2019Address=function(t,{config:e}){e=e||(0,o.getConfig)();const{prefix:r,words:n}=a.bech32.decode(t,s);if(r!==e.PREFIX)throw Error(`Invalid prefix! Expected: ${e.PREFIX}, actual: ${r}`);const[u,...f]=a.bech32.fromWords(n);switch(u){case c:{const[t,...r]=f;if(20!==r.length)throw Error("Invalid payload length!");const n=Object.values(e.SCRIPTS).find((e=>e&&e.SHORT_ID===t));if(!n)throw Error(`Invalid code hash index: ${t}!`);return{codeHash:n.CODE_HASH,hashType:n.HASH_TYPE,args:i.bytes.hexify(r)}}case l:if(f.length<32)throw Error("Invalid payload length!");return{codeHash:i.bytes.hexify(f.slice(0,32)),hashType:"data",args:i.bytes.hexify(f.slice(32))};case p:if(f.length<32)throw Error("Invalid payload length!");return{codeHash:i.bytes.hexify(f.slice(0,32)),hashType:"type",args:i.bytes.hexify(f.slice(32))}}throw Error(`Invalid payload format type: ${u}`)},e.parseFullFormatAddress=function(t,{config:e}){e=e||(0,o.getConfig)();const{words:r,prefix:c}=a.bech32m.decode(t,s);if(c!==e.PREFIX)throw Error(`Invalid prefix! Expected: ${e.PREFIX}, actual: ${c}`);const[l,...p]=a.bech32m.fromWords(r);if(l!==u)throw new Error("Invalid address format type");if(p.length<33)throw new Error("Invalid payload length, too short!");const f=i.bytes.hexify(p.slice(0,32)),d=n.blockchain.HashType.unpack(p.slice(32,33)),h=i.bytes.hexify(p.slice(33));return{codeHash:f,hashType:d,args:h}};var n=r(214231),i=r(412397),o=r(486532),a=r(266534);const s=1023,u=0;e.ADDRESS_FORMAT_FULL=u;const c=1;e.ADDRESS_FORMAT_SHORT=c;const l=2;e.ADDRESS_FORMAT_FULLDATA=l;const p=4;e.ADDRESS_FORMAT_FULLTYPE=p},587472:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addressToScript=e.TransactionSkeleton=void 0,e.createTransactionFromSkeleton=E,e.createTransactionSkeleton=async function(t,e){let r=C();r=r.update("cellDeps",(e=>e.push(...t.cellDeps))),r=r.update("headerDeps",(e=>e.push(...t.headerDeps)));const n=await Promise.all(t.inputs.map((t=>e(t.previousOutput))));r=r.update("inputs",(t=>t.push(...n))),r=r.update("inputSinces",(e=>t.inputs.reduce(((t,e,r)=>t.set(r,e.since)),e)));const i=t.outputs.map(((e,r)=>{var n;return{cellOutput:e,data:null!==(n=t.outputsData[r])&&void 0!==n?n:"0x"}}));return r=r.update("outputs",(t=>t.push(...i))),r=r.update("witnesses",(e=>e.push(...t.witnesses))),r},e.encodeToAddress=O,e.encodeToConfigAddress=function(t,e,r){const n=(null===r||void 0===r?void 0:r.config)||(0,s.getConfig)(),i=n.SCRIPTS[e];if(!i){const t=Object.keys(n.SCRIPTS);throw new Error(`Invalid script type: ${String(e)}, only support: ${t}`)}return O({codeHash:i.CODE_HASH,hashType:i.HASH_TYPE,args:t},{config:n})},e.generateAddress=b,e.generateSecp256k1Blake160Address=function(t,{config:e}={}){return w(t,"SECP256K1_BLAKE160",{config:e})},e.generateSecp256k1Blake160MultisigAddress=function(t,{config:e}={}){return w(t,"SECP256K1_BLAKE160_MULTISIG",{config:e})},e.locateCellDep=function(t,{config:e}={}){e=e||(0,s.getConfig)();const r=Object.values(e.SCRIPTS).find((e=>e&&e.CODE_HASH===t.codeHash&&e.HASH_TYPE===t.hashType));if(r)return{depType:r.DEP_TYPE,outPoint:{txHash:r.TX_HASH,index:r.INDEX}};return null},e.minimalCellCapacity=function(t,{validate:e=!0}={}){const r=_(t,{validate:e});return BigInt(r.toString())},e.minimalCellCapacityCompatible=_,e.minimalScriptCapacity=function(t,{validate:e=!0}={}){const r=y(t,{validate:e});return BigInt(r.toString())},e.minimalScriptCapacityCompatible=y,e.objectToTransactionSkeleton=function(t){let e=(0,a.Map)();for(const[r,n]of Object.entries(t.inputSinces))e=e.set(+r,n);return C({cellProvider:t.cellProvider,cellDeps:(0,a.List)(t.cellDeps),headerDeps:(0,a.List)(t.headerDeps),inputs:(0,a.List)(t.inputs),outputs:(0,a.List)(t.outputs),witnesses:(0,a.List)(t.witnesses),fixedEntries:(0,a.List)(t.fixedEntries),signingEntries:(0,a.List)(t.signingEntries),inputSinces:e})},e.parseAddress=S,e.scriptToAddress=void 0,e.sealTransaction=function(t,e){const r=E(t);if(e.length!==t.get("signingEntries").size)throw new Error(`Requiring ${t.get("signingEntries").size} sealing contents but provided ${e.length}!`);return t.get("signingEntries").forEach(((t,n)=>{switch(t.type){case"witness_args_lock":{const o=r.witnesses[t.index],a=i.blockchain.WitnessArgs.unpack(d(o)),s={lock:e[n]},u=a.inputType;u&&(s.inputType=u);const c=a.outputType;c&&(s.outputType=c),r.witnesses[t.index]=h(i.blockchain.WitnessArgs.pack(s));break}default:throw new Error(`Invalid signing entry type: ${t.type}`)}})),r},e.transactionSkeletonToObject=function(t){return t.toJS()};var n=r(412397),i=r(214231),o=r(266534),a=r(727623),s=r(486532),u=r(356997),c=r(244917),l=r(670104),p=r(587543),f=r(952891);const{bytify:d,hexify:h}=n.bytes,g=1023;function y(t,{validate:e=!0}={}){e&&p.validators.ValidateScript(t);let r=0;return r+=d(t.codeHash).length,r+=d(t.args).length,r+=1,u.BI.from(r).mul(1e8)}function _(t,{validate:e=!0}={}){e&&i.blockchain.CellOutput.pack(t.cellOutput);let r=8;return r+=d(t.cellOutput.lock.codeHash).length,r+=d(t.cellOutput.lock.args).length,r+=1,t.cellOutput.type&&(r+=d(t.cellOutput.type.codeHash).length,r+=d(t.cellOutput.type.args).length,r+=1),t.data&&(r+=d(t.data).length),u.BI.from(r).mul(1e8)}let m=!1;function b(t,{config:e}={}){e=e||(0,s.getConfig)(),m||(console.warn("The address format generated by generateAddress or scriptToAddress will be deprecated, please migrate to encodeToAddress to generate the new ckb2021 full format address as soon as possible"),m=!0),p.validators.ValidateScript(t);const r=Object.values(e.SCRIPTS).find((e=>e&&e.CODE_HASH===t.codeHash&&e.HASH_TYPE===t.hashType)),n=[];if(r&&void 0!==r.SHORT_ID)n.push(1,r.SHORT_ID),n.push(...(0,l.hexToByteArray)(t.args));else{if("type"===t.hashType)n.push(4);else{if("data"!==t.hashType)throw new Error(`Invalid hashType ${t.hashType}`);n.push(2)}n.push(...(0,l.hexToByteArray)(t.codeHash)),n.push(...(0,l.hexToByteArray)(t.args))}const i=o.bech32.toWords(n);return o.bech32.encode(e.PREFIX,i,g)}const v=b;function w(t,e,{config:r}={}){const n=(r=r||(0,s.getConfig)()).SCRIPTS[e];if(!n){const t=Object.keys(r.SCRIPTS);throw new Error(`Invalid script type: ${e}, only support: ${t}`)}return b({codeHash:n.CODE_HASH,hashType:n.HASH_TYPE,args:t},{config:r})}function S(t,{config:e}={}){e=e||(0,s.getConfig)();try{return(0,c.parseFullFormatAddress)(t,{config:e})}catch{return(0,c.parseDeprecatedCkb2019Address)(t,{config:e})}}e.scriptToAddress=v;const k=S;function O(t,{config:e}={}){p.validators.ValidateScript(t),e=e||(0,s.getConfig)();const r=n.bytes.concat([0],t.codeHash,f.HashType.pack(t.hashType),t.args);return o.bech32m.encode(e.PREFIX,o.bech32m.toWords(r),g)}e.addressToScript=k;const C=(0,a.Record)({cellProvider:null,cellDeps:(0,a.List)(),headerDeps:(0,a.List)(),inputs:(0,a.List)(),outputs:(0,a.List)(),witnesses:(0,a.List)(),fixedEntries:(0,a.List)(),signingEntries:(0,a.List)(),inputSinces:(0,a.Map)()});function E(t,{validate:e=!0}={}){const r={version:"0x0",cellDeps:t.get("cellDeps").toArray(),headerDeps:t.get("headerDeps").toArray(),inputs:t.get("inputs").map(((e,r)=>{if(!e.outPoint)throw new Error(`cannot find OutPoint in Inputs[${r}] when createTransactionFromSkeleton`);return{since:t.get("inputSinces").get(r,"0x0"),previousOutput:e.outPoint}})).toArray(),outputs:t.get("outputs").map((t=>t.cellOutput)).toArray(),outputsData:t.get("outputs").map((t=>t.data||"0x0")).toArray(),witnesses:t.get("witnesses").toArray()};return e&&p.validators.ValidateTransaction(r),r}e.TransactionSkeleton=C},670104:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToByteArray=function(t){if(!/^(0x)?([0-9a-fA-F][0-9a-fA-F])*$/.test(t))throw new Error("Invalid hex string!");t.startsWith("0x")&&(t=t.slice(2));const e=[];for(;t.length>=2;)e.push(parseInt(t.slice(0,2),16)),t=t.slice(2);return e}},8612:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(653375),i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,r&&r.set(t,n);return n}(r(896608));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}var a={getTipBlockNumber:{method:"get_tip_block_number",paramsFormatters:[],resultFormatters:i.toNumber},getTipHeader:{method:"get_tip_header",paramsFormatters:[],resultFormatters:i.toHeader},getCurrentEpoch:{method:"get_current_epoch",paramsFormatters:[],resultFormatters:i.toEpoch},getEpochByNumber:{method:"get_epoch_by_number",paramsFormatters:[n.formatter.toNumber],resultFormatters:i.toEpoch},getBlockHash:{method:"get_block_hash",paramsFormatters:[n.formatter.toNumber]},getBlock:{method:"get_block",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toBlock},getBlockByNumber:{method:"get_block_by_number",paramsFormatters:[n.formatter.toNumber],resultFormatters:i.toBlock},getHeader:{method:"get_header",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toHeader},getHeaderByNumber:{method:"get_header_by_number",paramsFormatters:[n.formatter.toNumber],resultFormatters:i.toHeader},getLiveCell:{method:"get_live_cell",paramsFormatters:[n.formatter.toOutPoint],resultFormatters:i.toLiveCellWithStatus},getTransaction:{method:"get_transaction",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toTransactionWithStatus},getCellbaseOutputCapacityDetails:{method:"get_cellbase_output_capacity_details",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toCellbaseOutputCapacityDetails},getBlockEconomicState:{method:"get_block_economic_state",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toBlockEconomicState},getTransactionProof:{method:"get_transaction_proof",paramsFormatters:[n.formatter.toArray(n.formatter.toHash),n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toTransactionProof},verifyTransactionProof:{method:"verify_transaction_proof",paramsFormatters:[n.formatter.toTransactionProof]},getConsensus:{method:"get_consensus",paramsFormatters:[],resultFormatters:i.toConsensus}};e.default=a},551542:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(653375),i={dryRunTransaction:{method:"dry_run_transaction",paramsFormatters:[n.formatter.toRawTransaction]},calculateDaoMaximumWithdraw:{method:"calculate_dao_maximum_withdraw",paramsFormatters:[n.formatter.toOutPoint,n.formatter.toHash]}};e.default=i},658232:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rpcProperties=e.Base=void 0;var n=c(r(8612)),i=c(r(551542)),o=c(r(793402)),a=c(r(79594)),s=c(r(132376)),u=c(r(229579));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function p(t,e){var r=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}(t,e,"get");return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,r)}const f={...n.default,...i.default,...u.default,...o.default,...a.default,...s.default};e.rpcProperties=f;var d=new WeakMap;e.Base=class{constructor(){l(this,d,{writable:!0,value:f})}get rpcProperties(){return p(this,d)}}},229579:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(653375),i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,r&&r.set(t,n);return n}(r(896608));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}var a={getIndexerTip:{method:"get_indexer_tip",paramsFormatters:[],resultFormatters:i.toTip},getCells:{method:"get_cells",paramsFormatters:[n.formatter.toGetCellsSearchKey,n.formatter.toOrder,n.formatter.toNumber,n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toGetCellsResult},getTransactions:{method:"get_transactions",paramsFormatters:[n.formatter.toGetTransactionsSearchKey,n.formatter.toOrder,n.formatter.toNumber,n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toGetTransactionsResult},getCellsCapacity:{method:"get_cells_capacity",paramsFormatters:[n.formatter.toSearchKey],resultFormatters:i.toCellsCapacity},getBlockFilter:{method:"get_block_filter",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toNullable(i.toBlockFilter)},getTransactionAndWitnessProof:{method:"get_transaction_and_witness_proof",paramsFormatters:[n.formatter.toArray(n.formatter.toHash),n.formatter.toOptional(n.formatter.toHash)],resultFormatters:i.toTransactionAndWitnessProof},verifyTransactionAndWitnessProof:{method:"verify_transaction_and_witness_proof",paramsFormatters:[n.formatter.toTransactionAndWitnessProof],resultFormatters:i.toArray(i.toHash)},getForkBlock:{method:"get_fork_block",paramsFormatters:[n.formatter.toHash,n.formatter.toOptional(n.formatter.toNumber)],resultFormatters:i.toNullable(i.toForkBlockResult)},getBlockMedianTime:{method:"get_block_median_time",paramsFormatters:[n.formatter.toHash],resultFormatters:i.toNullable(i.toNumber)},estimateCycles:{method:"estimate_cycles",paramsFormatters:[n.formatter.toRawTransaction],resultFormatters:i.toEstimateCycles},getFeeRateStatistics:{method:"get_fee_rate_statistics",paramsFormatters:[n.formatter.toOptional(n.formatter.toNumber)],resultFormatters:i.toNullable(i.toFeeRateStatistics)},getFeeRateStatics:{method:"get_fee_rate_statics",paramsFormatters:[n.formatter.toOptional(n.formatter.toNumber)],resultFormatters:i.toNullable(i.toFeeRateStatistics)}};e.default=a},793402:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(653375),i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,r&&r.set(t,n);return n}(r(896608));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}var a={localNodeInfo:{method:"local_node_info",paramsFormatters:[],resultFormatters:i.toLocalNodeInfo},getPeers:{method:"get_peers",paramsFormatters:[],resultFormatters:i.toPeers},getBannedAddresses:{method:"get_banned_addresses",paramsFormatters:[],resultFormatters:i.toBannedAddresses},clearBannedAddresses:{method:"clear_banned_addresses",paramsFormatters:[]},setBan:{method:"set_ban",paramsFormatters:[]},syncState:{method:"sync_state",paramsFormatters:[],resultFormatters:i.toSyncState},setNetworkActive:{method:"set_network_active",paramsFormatters:[n.formatter.toBoolean]},addNode:{method:"add_node",paramsFormatters:[]},removeNode:{method:"remove_node",paramsFormatters:[]},pingPeers:{method:"ping_peers",paramsFormatters:[]}};e.default=a},79594:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(653375),i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,r&&r.set(t,n);return n}(r(896608));function o(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}var a={sendTransaction:{method:"send_transaction",paramsFormatters:[n.formatter.toRawTransaction,n.formatter.toOutputsValidator],resultFormatters:i.toHash},txPoolInfo:{method:"tx_pool_info",paramsFormatters:[],resultFormatters:i.toTxPoolInfo},clearTxPool:{method:"clear_tx_pool",paramsFormatters:[]},getRawTxPool:{method:"get_raw_tx_pool",paramsFormatters:[],resultFormatters:i.toRawTxPool}};e.default=a},132376:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,r&&r.set(t,n);return n}(r(896608));function i(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}var o={getBlockchainInfo:{method:"get_blockchain_info",paramsFormatters:[],resultFormatters:n.toBlockchainInfo},getDeploymentsInfo:{method:"get_deployments_info",paramsFormatters:[],resultFormatters:n.toDeploymentsInfo}};e.default=o},268319:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ErrorCode=void 0;let r=function(t){return t[t.ParameterInvalid=101]="ParameterInvalid",t[t.IdNotMatch=201]="IdNotMatch",t[t.MethodNotFound=202]="MethodNotFound",t[t.PayloadMessage=203]="PayloadMessage",t[t.ResponseMessage=204]="ResponseMessage",t}({});e.ErrorCode=r;var n=r;e.default=n},537292:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PayloadInBatchException=e.MethodInBatchNotFoundException=e.IdNotMatchedInBatchException=void 0;var n,i=(n=r(268319))&&n.__esModule?n:{default:n},o=r(156096);function a(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const s="Batch Request";class u extends Error{constructor(t){super(`[${s}]: Method ${t} is not found`),a(this,"code",i.default.MethodNotFound)}}e.MethodInBatchNotFoundException=u;class c extends Error{constructor(t,e){super(`[${s} ${t}]: ${e}`),a(this,"code",i.default.PayloadMessage),this.index=t}}e.PayloadInBatchException=c;class l extends o.IdNotMatchException{constructor(t,e,r){super(e,r),this.message=`[${s} ${t}]: ${this.message}`,this.index=t}}e.IdNotMatchedInBatchException=l;var p={MethodInBatchNotFoundException:u,PayloadInBatchException:c,IdNotMatchedInBatchException:l};e.default=p},373072:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.StringHashTypeException=e.PageSizeTooSmallException=e.PageSizeTooLargeException=e.OutputsValidatorTypeException=e.HexStringWithout0xException=e.BigintOrHexStringTypeException=void 0;var n,i=(n=r(268319))&&n.__esModule?n:{default:n};function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class a extends RangeError{constructor(t,e){super(`Expect page size to be at most ${e}, but ${t} received`),o(this,"code",i.default.ParameterInvalid)}}e.PageSizeTooLargeException=a;class s extends RangeError{constructor(t,e){super(`Expect page size to be at least ${e}, but ${t} received`),o(this,"code",i.default.ParameterInvalid)}}e.PageSizeTooSmallException=s;class u extends TypeError{constructor(){super("Expect outputs validator to be 'default' or 'passthrough'"),o(this,"code",i.default.ParameterInvalid)}}e.OutputsValidatorTypeException=u;class c extends TypeError{constructor(t){super(`Expect number to be bigint or hex string, but ${t} received`),o(this,"code",i.default.ParameterInvalid)}}e.BigintOrHexStringTypeException=c;class l extends TypeError{constructor(t){super(`Expect hash to be string, but ${t} received`),o(this,"code",i.default.ParameterInvalid)}}e.StringHashTypeException=l;class p extends Error{constructor(t){super(`Hex string ${t} should start with 0x`),o(this,"code",i.default.ParameterInvalid)}}e.HexStringWithout0xException=p;var f={PageSizeTooLargeException:a,PageSizeTooSmallException:s,OutputsValidatorTypeException:u,BigintOrHexStringTypeException:c,StringHashTypeException:l,HexStringWithout0xException:p};e.default=f},205573:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(373072);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var i=r(156096);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}));var o=r(537292);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}))},156096:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ResponseException=e.IdNotMatchException=void 0;var n,i=(n=r(268319))&&n.__esModule?n:{default:n};function o(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class a extends Error{constructor(t,e){super(`Expect json rpc id to be ${t}, but ${e} received`),o(this,"code",i.default.IdNotMatch)}}e.IdNotMatchException=a;class s extends Error{constructor(...t){super(...t),o(this,"code",i.default.ResponseMessage)}}e.ResponseException=s;var u={IdNotMatchException:a,ResponseException:s};e.default=u},39337:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResultFormatter=e.RPC=e.ParamsFormatter=e.CKBRPC=void 0;var n=r(658232),i=r(740014),o=r(653375),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=p(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,r&&r.set(t,n);return n}(r(896608)),s=r(205573),u=l(r(496279)),c=l(r(747948));function l(t){return t&&t.__esModule?t:{default:t}}function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(p=function(t){return t?r:e})(t)}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function h(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function g(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}const _=o.formatter;e.ParamsFormatter=_;const m=a;e.ResultFormatter=m;var b=new WeakMap,v=new WeakMap,w=new WeakMap,S=new WeakMap;class k extends n.Base{get node(){return g(this,v)}get paramsFormatter(){return g(this,w)}get resultFormatter(){return g(this,S)}constructor(t,e={}){super(),d(this,b,{writable:!0,value:void 0}),d(this,v,{writable:!0,value:{url:""}}),d(this,w,{writable:!0,value:o.formatter}),d(this,S,{writable:!0,value:a}),f(this,"addMethod",((t,e)=>{const r=new i.Method(this.node,t,e);Object.defineProperty(this,t.name,{value:r.call,enumerable:!0})})),f(this,"createBatchRequest",((t=[])=>{const e=this,r=new Proxy([],{set(...t){const r=Object.keys(e);if("length"!==t[1]){var n;const e=null===t||void 0===t||null===(n=t[2])||void 0===n?void 0:n[0];if(-1===r.indexOf(e))throw new s.MethodInBatchNotFoundException(e)}return Reflect.set(...t)}});return Object.defineProperties(r,{add:{value(...t){return this.push(t),this}},remove:{value(t){return this.splice(t,1),this}},exec:{async value(){const t=r.map((([t,...r],n)=>{try{return new i.Method(e.node,{...e.rpcProperties[t],name:t}).getPayload(...r)}catch(o){throw new s.PayloadInBatchException(n,o.message)}})),n=new c.default,o=n.signal,a=setTimeout((()=>n.abort()),g(e,b).timeout),u=await g(e,b).fetch(g(e,v).url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t),signal:o}).then((t=>t.json()));return clearTimeout(a),u.map(((n,i)=>{var o,a,u;return n.id!==t[i].id?new s.IdNotMatchedInBatchException(i,t[i].id,n.id):null!==(o=null===(a=(u=e.rpcProperties[r[i][0]]).resultFormatters)||void 0===a?void 0:a.call(u,n.result))&&void 0!==o?o:n.result}))}}}),t.forEach((t=>r.push(t))),r})),this.setNode({url:t});const{timeout:r=3e4,fetch:n=u.default}=e;h(this,b,{timeout:r,fetch:n}),Object.defineProperties(this,{addMethod:{value:this.addMethod,enumerable:!1,writable:!1,configurable:!1},setNode:{value:this.setNode,enumerable:!1,writable:!1,configurable:!1}}),Object.keys(this.rpcProperties).forEach((t=>{this.addMethod({name:t,...this.rpcProperties[t]},g(this,b))}))}setNode(t){return Object.assign(this.node,t),this.node}}e.RPC=e.CKBRPC=k},740014:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Method=void 0;var n=r(205573),i=a(r(747948)),o=a(r(496279));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function c(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,p(t,e,"set"),r),r}function l(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,p(t,e,"get"))}function p(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var f=new WeakMap,d=new WeakMap,h=new WeakMap,g=new WeakMap;e.Method=class{get name(){return l(this,f)}constructor(t,e,r={}){u(this,f,{writable:!0,value:void 0}),u(this,d,{writable:!0,value:void 0}),u(this,h,{writable:!0,value:{name:"",method:"",paramsFormatters:[],resultFormatters:void 0}}),u(this,g,{writable:!0,value:void 0}),s(this,"call",(async(...t)=>{const e=this.getPayload(...t),r=new i.default,o=r.signal,a=setTimeout((()=>r.abort()),l(this,d).timeout),s=await l(this,d).fetch(l(this,g).url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:o}).then((t=>t.json())).then((t=>{var r,i,o;if(t.id!==e.id)throw new n.IdNotMatchException(e.id,t.id);if(t.error)throw new n.ResponseException(JSON.stringify(t.error));return null!==(r=null===(i=(o=l(this,h)).resultFormatters)||void 0===i?void 0:i.call(o,t.result))&&void 0!==r?r:t.result}));return clearTimeout(a),s})),s(this,"getPayload",((...t)=>{const e=t.map(((t,e)=>l(this,h).paramsFormatters[e]&&l(this,h).paramsFormatters[e](t)||t));return{id:Math.round(1e4*Math.random()),method:l(this,h).method,params:e,jsonrpc:"2.0"}})),c(this,g,t),c(this,h,e),c(this,f,e.name);const{timeout:a=3e4,fetch:p=o.default}=r;c(this,d,{timeout:a,fetch:p}),Object.defineProperty(this.call,"name",{value:e.name,configurable:!1,writable:!1})}}},653375:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatter=void 0;var n=r(205573),i=r(356997);const o={toOptional:t=>e=>t&&void 0!==e&&null!==e?t(e):e,toArray:t=>e=>"function"===typeof t&&Array.isArray(e)?e.map(t):e,toHash:t=>{if("string"!==typeof t)throw new n.StringHashTypeException(t);return t.startsWith("0x")?t:`0x${t}`},toNumber:t=>{if("bigint"===typeof t)return`0x${t.toString(16)}`;if("string"!==typeof t)throw new n.BigintOrHexStringTypeException(t);if(!t.startsWith("0x"))throw new n.HexStringWithout0xException(t);return t},toScript:t=>{const{codeHash:e,hashType:r,...n}=t;return{code_hash:o.toHash(e),hash_type:r,...n}},toOutPoint:t=>{const{txHash:e,index:r,...n}=t;return{tx_hash:o.toHash(e),index:o.toNumber(r),...n}},toInput:t=>{if(!t)return t;const{previousOutput:e,since:r,...n}=t;return{previous_output:o.toOutPoint(e),since:o.toNumber(r),...n}},toOutput:t=>{if(!t)return t;const{capacity:e,lock:r,type:n,...i}=t;return{capacity:o.toNumber(e),lock:o.toScript(r),type:n?o.toScript(n):n,...i}},toDepType:t=>"depGroup"===t?"dep_group":t,toOrder:t=>t,toCellDep:t=>{if(!t)return t;const{outPoint:e,depType:r="code",...n}=t;return{out_point:o.toOutPoint(e),dep_type:o.toDepType(r),...n}},toRawTransaction:t=>{if(!t)return t;const{version:e,cellDeps:r=[],inputs:n=[],outputs:i=[],outputsData:a=[],headerDeps:s=[],...u}=t,c=n.map((t=>o.toInput(t))),l=i.map((t=>o.toOutput(t))),p=r.map((t=>o.toCellDep(t)));return{version:o.toNumber(e),cell_deps:p,inputs:c,outputs:l,outputs_data:a,header_deps:s,...u}},toPageNumber:(t="0x1")=>o.toNumber(t),toPageSize:(t="0x32")=>{const e=i.BI.from(t);if(i.BI.from(e).gt(50))throw new n.PageSizeTooLargeException(t,50);if(i.BI.from(e).lt(0))throw new n.PageSizeTooSmallException(t,0);return o.toNumber(`0x${e.toString(16)}`)},toReverseOrder:(t=!1)=>!!t,toOutputsValidator:t=>{if(!t)return;if(["default","passthrough"].indexOf(t)>-1)return t;throw new n.OutputsValidatorTypeException},toBoolean:t=>!!t,toTransactionProof:t=>{if(!t)return t;const{blockHash:e,witnessesRoot:r,...n}=t;return{block_hash:e,witnesses_root:r,...n}},toTransactionAndWitnessProof:t=>({block_hash:t.blockHash,witnesses_proof:t.witnessesProof,transactions_proof:t.transactionsProof}),toSearchFilter:t=>t?{script:t.script?o.toScript(t.script):t.script,output_data_len_range:t.outputDataLenRange,output_capacity_range:t.outputCapacityRange,block_range:t.blockRange,script_len_range:t.scriptLenRange}:t,toSearchKey:t=>t?{script:o.toScript(t.script),script_type:t.scriptType,filter:t.filter?o.toSearchFilter(t.filter):t.filter,script_search_mode:t.scriptSearchMode?t.scriptSearchMode:"prefix"}:t,toGetCellsSearchKey:t=>t?{...o.toSearchKey(t),with_data:t.withData}:t,toGetTransactionsSearchKey:t=>t?{...o.toSearchKey(t),group_by_transaction:t.groupByTransaction}:t};e.formatter=o},896608:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toBannedAddresses=e.toBannedAddress=e.toArray=e.toAlertMessage=void 0,e.toBlock=function t(e){if(!e)return e;if("string"===typeof e)return e;if("block"in e&&"cycles"in e)return{cycles:e.cycles,block:t(e.block)};const{header:n,uncles:i=[],transactions:o=[],...a}=e;return{header:r(n),uncles:i.map(l),transactions:o.map(c),...a}},e.toHash=e.toGetTransactionsResult=e.toGetCellsResult=e.toForkBlockResult=e.toFeeRateStatistics=e.toFeeRate=e.toEstimateCycles=e.toEpoch=e.toDeploymentsInfo=e.toDeploymentInfo=e.toDeployment=e.toDeployState=e.toDepType=e.toConsensus=e.toCellsIncludingOutPoint=e.toCellsCapacity=e.toCells=e.toCellbaseOutputCapacityDetails=e.toCellIncludingOutPoint=e.toCellDep=e.toCell=e.toCapacityByLockHash=e.toBlockchainInfo=e.toBlockFilter=e.toBlockEconomicState=void 0,e.toHeader=r,e.toTip=e.toSyncState=e.toScript=e.toRemoteNodeInfo=e.toRawTxPool=e.toPeers=e.toOutput=e.toOutPoint=e.toNumber=e.toNullable=e.toLockHashIndexStates=e.toLockHashIndexState=e.toLocalNodeInfo=e.toLiveCellsByLockHash=e.toLiveCellWithStatus=e.toLiveCell=e.toInput=void 0,e.toTransaction=c,e.toUncleBlock=e.toTxPoolInfo=e.toTransactionsByLockHash=e.toTransactionWithStatus=e.toTransactionProof=e.toTransactionPoint=e.toTransactionAndWitnessProof=void 0;e.toArray=t=>e=>"function"===typeof t&&Array.isArray(e)?e.map(t):e;e.toNullable=t=>e=>t&&null!==e?t(e):e;e.toNumber=t=>t.toString();function r(t){if("string"===typeof t)return t;if(!t)return t;const{compact_target:e,transactions_root:r,proposals_hash:n,extra_hash:i,parent_hash:o,...a}=t;return{compactTarget:e,parentHash:o,transactionsRoot:r,proposalsHash:n,extraHash:i,...a}}e.toHash=t=>t;const n=t=>{if(!t)return t;const{code_hash:e,hash_type:r,...n}=t;return{codeHash:e,hashType:r,...n}};e.toScript=n;const i=t=>{if(!t)return t;const{previous_output:e,...r}=t;return{previousOutput:e?a(e):e,...r}};e.toInput=i;const o=t=>{if(!t)return t;const{lock:e,type:r,...i}=t;return{lock:n(e),type:r?n(r):r,...i}};e.toOutput=o;const a=t=>{const{tx_hash:e,...r}=t;return{txHash:e,...r}};e.toOutPoint=a;const s=t=>"dep_group"===t?"depGroup":t;e.toDepType=s;const u=t=>{if(!t)return t;const{out_point:e,dep_type:r="code",...n}=t;return{outPoint:a(e),depType:s(r),...n}};function c(t){if(!t||"object"!==typeof t)return t;const{cell_deps:e=[],inputs:r=[],outputs:n=[],outputs_data:a=[],header_deps:s=[],...c}=t;return{cellDeps:e.map(u),inputs:r.map(i),outputs:n.map(o),outputsData:a,headerDeps:s,...c}}e.toCellDep=u;const l=t=>{if(!t)return t;const{header:e,...n}=t;return{header:r(e),...n}};e.toUncleBlock=l;e.toTip=t=>({blockHash:t.block_hash,blockNumber:t.block_number});const p=t=>{if(!t)return t;const{notice_until:e,...r}=t;return{noticeUntil:e,...r}};e.toAlertMessage=p;e.toBlockchainInfo=t=>{if(!t)return t;const{is_initial_block_download:e,median_time:r,alerts:n,...i}=t;return{isInitialBlockDownload:e,medianTime:r,alerts:n.map(p),...i}};e.toLocalNodeInfo=t=>{if(!t)return t;const{node_id:e,protocols:r,...n}=t;return{nodeId:e,protocols:r.map((({id:t,name:e,support_versions:r})=>({id:t,name:e,supportVersions:r}))),...n}};const f=t=>{if(!t)return t;const{node_id:e,connected_duration:r,is_outbound:n,last_ping_duration:i,sync_state:o,...a}=t;return{nodeId:e,connectedDuration:r,isOutbound:n,lastPingDuration:i,syncState:{bestKnownHeaderHash:o.best_known_header_hash,bestKnownHeaderNumber:o.best_known_header_number,canFetchCount:o.can_fetch_count,inflightCount:o.inflight_count,lastCommonHeaderHash:o.last_common_header_hash,lastCommonHeaderNumber:o.last_common_header_number,unknownHeaderListSize:o.unknown_header_list_size},...a}};e.toRemoteNodeInfo=f;e.toTxPoolInfo=t=>{if(!t)return t;const{last_txs_updated_at:e,tip_hash:r,tip_number:n,total_tx_cycles:i,total_tx_size:o,min_fee_rate:a,...s}=t;return{lastTxsUpdatedAt:e,tipHash:r,tipNumber:n,totalTxCycles:i,totalTxSize:o,minFeeRate:a,...s}};e.toPeers=t=>Array.isArray(t)?t.map(f):[];const d=t=>{if(!t)return t;const{lock:e,type:r,...i}=t;return{lock:n(e),type:r?n(r):void 0,...i}};e.toCell=d;const h=t=>{if(!t)return t;const{data:e,output:r,...n}=t;return{data:e,output:o(r),...n}};e.toLiveCell=h;e.toLiveCellWithStatus=t=>{if(!t)return t;const{cell:e,...r}=t;return{cell:h(e),...r}};e.toCells=t=>Array.isArray(t)?t.map(d):[];const g=t=>{if(!t)return t;const{lock:e,block_hash:r,out_point:i,output_data_len:o,...s}=t;return{blockHash:r,lock:n(e),outPoint:a(i),outputDataLen:o,...s}};e.toCellIncludingOutPoint=g;e.toCellsIncludingOutPoint=t=>Array.isArray(t)?t.map(g):[];e.toTransactionWithStatus=t=>{if(!t)return t;const{transaction:e,tx_status:{block_hash:r,status:n},time_added_to_pool:i,...o}=t;return{transaction:c(e),txStatus:{blockHash:r,status:n,..."reason"in t.tx_status?{reason:t.tx_status.reason}:{}},timeAddedToPool:i,...o}};e.toEpoch=t=>{if(!t)return t;const{start_number:e,compact_target:r,...n}=t;return{compactTarget:r,startNumber:e,...n}};const y=t=>{if(!t)return t;const{block_number:e,tx_hash:r,...n}=t;return{blockNumber:e,txHash:r,...n}};e.toTransactionPoint=y;e.toTransactionsByLockHash=t=>t?t.map((t=>({consumedBy:t.consumed_by?y(t.consumed_by):t.consumed_by,createdBy:y(t.created_by)}))):t;e.toLiveCellsByLockHash=t=>t?t.map((t=>({cellOutput:d(t.cell_output),createdBy:y(t.created_by),cellbase:t.cellbase,outputDataLen:t.output_data_len}))):t;const _=t=>{if(!t)return t;const{block_hash:e,block_number:r,lock_hash:n,...i}=t;return{blockHash:e,blockNumber:r,lockHash:n,...i}};e.toLockHashIndexState=_;e.toLockHashIndexStates=t=>t?t.map(_):t;const m=t=>{if(!t)return t;const{ban_reason:e,ban_until:r,created_at:n,...i}=t;return{banReason:e,banUntil:r,createdAt:n,...i}};e.toBannedAddress=m;e.toBannedAddresses=t=>t?t.map((t=>m(t))):t;e.toCellbaseOutputCapacityDetails=t=>{if(!t)return t;const{proposal_reward:e,tx_fee:r,...n}=t;return{proposalReward:e,txFee:r,...n}};e.toFeeRate=t=>{if(!t)return t;const{fee_rate:e,...r}=t;return{feeRate:e,...r}};e.toCapacityByLockHash=t=>{if(!t)return t;const{cells_count:e,block_number:r,capacity:n,...i}=t;return{blockNumber:r,capacity:n,cellsCount:e,...i}};e.toBlockEconomicState=t=>{if(!t)return t;const{finalized_at:e,miner_reward:r,txs_fee:n,...i}=t;return{finalizedAt:e,minerReward:r,txsFee:n,...i}};e.toSyncState=t=>t?{bestKnownBlockNumber:t.best_known_block_number,bestKnownBlockTimestamp:t.best_known_block_timestamp,fastTime:t.fast_time,ibd:t.ibd,inflightBlocksCount:t.inflight_blocks_count,lowTime:t.low_time,normalTime:t.normal_time,orphanBlocksCount:t.orphan_blocks_count}:t;e.toTransactionProof=t=>{if(!t)return t;const{block_hash:e,witnesses_root:r,...n}=t;return{blockHash:e,witnessesRoot:r,...n}};const b=t=>({rfc:t.rfc,epochNumber:t.epoch_number}),v=t=>({bit:t.bit,start:t.start,timeout:t.timeout,minActivationEpoch:t.min_activation_epoch,period:t.period,threshold:t.threshold});e.toDeployment=v;const w=t=>"rfc0043"in t?{status:t.status,rfc0043:v(t.rfc0043)}:t;e.toConsensus=t=>{if(!t)return t;const e=t.hardfork_features,r=t.softforks,n=r.light_client&&w(r.light_client),i=r.testdummy&&w(r.testdummy);return{blockVersion:t.block_version,cellbaseMaturity:t.cellbase_maturity,daoTypeHash:t.dao_type_hash,epochDurationTarget:t.epoch_duration_target,genesisHash:t.genesis_hash,id:t.id,initialPrimaryEpochReward:t.initial_primary_epoch_reward,maxBlockBytes:t.max_block_bytes,maxBlockCycles:t.max_block_cycles,maxBlockProposalsLimit:t.max_block_proposals_limit,maxUnclesNum:t.max_uncles_num,medianTimeBlockCount:t.median_time_block_count,orphanRateTarget:t.orphan_rate_target,permanentDifficultyInDummy:t.permanent_difficulty_in_dummy,primaryEpochRewardHalvingInterval:t.primary_epoch_reward_halving_interval,proposerRewardRatio:t.proposer_reward_ratio,secondaryEpochReward:t.secondary_epoch_reward,secp256k1Blake160MultisigAllTypeHash:t.secp256k1_blake160_multisig_all_type_hash,secp256k1Blake160SighashAllTypeHash:t.secp256k1_blake160_sighash_all_type_hash,txProposalWindow:t.tx_proposal_window,txVersion:t.tx_version,typeIdCodeHash:t.type_id_code_hash,hardforkFeatures:e.map(b),softforks:{...n&&{lightClient:n},...i&&{testdummy:i}}}};e.toRawTxPool=t=>{if(!t)return t;if((t=>Array.isArray(t.pending))(t))return t;const e=({ancestors_count:t,ancestors_cycles:e,ancestors_size:r,...n})=>({ancestorsCount:t,ancestorsCycles:e,ancestorsSize:r,...n}),r={},n={};return Object.keys(t.proposed).forEach((n=>{r[n]=e(t.proposed[n])})),Object.keys(t.pending).forEach((r=>{n[r]=e(t.pending[r])})),{proposed:r,pending:n}};e.toGetCellsResult=t=>({lastCursor:t.last_cursor,objects:t.objects.map((t=>{return(e=t)?{blockNumber:e.block_number,outPoint:a(e.out_point),output:o(e.output),outputData:e.output_data,txIndex:e.tx_index}:e;var e}))});e.toGetTransactionsResult=t=>t?{lastCursor:t.last_cursor,objects:t.objects.map((t=>{return(e=t)?e.cells?{txHash:e.tx_hash,txIndex:e.tx_index,blockNumber:e.block_number,cells:e.cells}:{txHash:e.tx_hash,blockNumber:e.block_number,ioIndex:e.io_index,ioType:e.io_type,txIndex:e.tx_index}:e;var e}))}:t;e.toCellsCapacity=t=>t?{capacity:t.capacity,blockHash:t.block_hash,blockNumber:t.block_number}:t;e.toBlockFilter=t=>({hash:t.hash,data:t.data});e.toTransactionAndWitnessProof=t=>({blockHash:t.block_hash,transactionsProof:t.transactions_proof,witnessesProof:t.witnesses_proof});e.toFeeRateStatistics=t=>({mean:t.mean,median:t.median});e.toForkBlockResult=t=>"string"===typeof t?t:{header:r(t.header),uncles:t.uncles.map(l),transactions:t.transactions.map(c),proposals:t.proposals,extension:t.extension};e.toEstimateCycles=t=>({cycles:t.cycles});const S=t=>"locked_in"===t?"lockedIn":t;e.toDeployState=S;const k=t=>({bit:t.bit,start:t.start,timeout:t.timeout,minActivationEpoch:t.min_activation_epoch,period:t.period,threshold:t.threshold,since:t.since,state:S(t.state)});e.toDeploymentInfo=k;e.toDeploymentsInfo=t=>{const{light_client:e,testdummy:r}=t.deployments;return{hash:t.hash,epoch:t.epoch,deployments:{...e?{lightClient:k(e)}:{},...r?{testdummy:k(r)}:{}}}}},587543:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Reader",{enumerable:!0,get:function(){return n.Reader}}),e.validators=e.transformers=e.normalizers=e.VERSION=void 0;var n=r(888583),i=u(r(828428));e.normalizers=i;var o=u(r(791168));e.transformers=o;var a=u(r(115654));function s(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}e.validators=a;e.VERSION="__development_build__"},828428:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NormalizeBlock=function(t,{debugPath:e="block"}={}){return s(e,t,{header:l(m),uncles:h(l(b)),transactions:h(l(y)),proposals:h(a(10))})},e.NormalizeCellDep=d,e.NormalizeCellInput=p,e.NormalizeCellOutput=f,e.NormalizeCellbaseWitness=function(t,{debugPath:e="cellbase_witness"}={}){return s(e,t,{lock:l(u),message:a(-1)})},e.NormalizeHeader=m,e.NormalizeOutPoint=c,e.NormalizeRawHeader=_,e.NormalizeRawTransaction=g,e.NormalizeScript=u,e.NormalizeTransaction=y,e.NormalizeUncleBlock=b,e.NormalizeWitnessArgs=function(t,{debugPath:e="witness_args"}={}){const r={};t.lock&&(r.lock=a(-1)(`${e}.lock`,t.lock));t.inputType&&(r.inputType=a(-1)(`${e}.inputType`,t.inputType));t.outputType&&(r.outputType=a(-1)(`${e}.outputType`,t.outputType));return r};var n=r(356997),i=r(888583);function o(t){return function(e,r){if(!(r instanceof ArrayBuffer)){let i=n.BI.from(r).toString(16);if(i.length%2!==0&&(i="0"+i),i.length/2>t)throw new Error(`${e} is ${i.length/2} bytes long, expected length is ${t}!`);const o=new DataView(new ArrayBuffer(t));for(let t=0;t<i.length/2;t++){const e=i.length-2*(t+1);o.setUint8(t,parseInt(i.substr(e,2),16))}r=o.buffer}if(r.byteLength<t){const e=new Uint8Array(t);e.set(new Uint8Array(r),0),r=e.buffer}return r}}function a(t){return function(e,r){if(r=new i.Reader(r).toArrayBuffer(),t>0&&r.byteLength!==t)throw new Error(`${e} has invalid length ${r.byteLength}, required: ${t}`);return r}}function s(t,e,r){const n={};for(const[i,o]of Object.entries(r)){const r=e[i];if(null==r)throw new Error(`${t} is missing ${i}!`);n[i]=o(`${t}.${i}`,r)}return n}function u(t,{debugPath:e="script"}={}){return s(e,t,{codeHash:a(32),hashType:function(t,e){switch(e){case"data":return 0;case"type":return 1;case"data1":return 2;case"data2":return 4;case 0:case 1:case 2:case 4:return e;default:throw new Error(`${t}.hashType has invalid value: ${e}`)}},args:a(-1)})}function c(t,{debugPath:e="outPoint"}={}){return s(e,t,{txHash:a(32),index:o(4)})}function l(t){return function(e,r){return t(r,{debugPath:e})}}function p(t,{debugPath:e="cell_input"}={}){return s(e,t,{since:o(8),previousOutput:l(c)})}function f(t,{debugPath:e="cellOutput"}={}){const r=s(e,t,{capacity:o(8),lock:l(u)});return t.type&&(r.type_=u(t.type,{debugPath:`${e}.type`})),r}function d(t,{debugPath:e="cell_dep"}={}){return s(e,t,{outPoint:l(c),depType:function(t,e){switch(e){case"code":return 0;case"depGroup":return 1;case 0:case 1:return e;default:throw new Error(`${t}.depType has invalid value: ${e}`)}}})}function h(t){return function(e,r){return r.map(((r,n)=>t(`${e}[${n}]`,r)))}}function g(t,{debugPath:e="raw_transaction"}={}){return s(e,t,{version:o(4),cellDeps:h(l(d)),headerDeps:h(a(32)),inputs:h(l(p)),outputs:h(l(f)),outputsData:h(a(-1))})}function y(t,{debugPath:e="transaction"}={}){const r=g(t,{debugPath:`(raw)${e}`}),n=s(e,t,{witnesses:h(a(-1))});return n.raw=r,n}function _(t,{debugPath:e="raw_header"}={}){return s(e,t,{version:o(4),compactTarget:o(4),timestamp:o(8),number:o(8),epoch:o(8),parentHash:a(32),transactionsRoot:a(32),proposalsHash:a(32),extraHash:a(32),dao:a(32)})}function m(t,{debugPath:e="header"}={}){const r=_(t,{debugPath:`(raw)${e}`}),n=s(e,t,{nonce:o(16)});return n.raw=r,n}function b(t,{debugPath:e="uncle_block"}={}){return s(e,t,{header:l(m),proposals:h(a(10))})}},888583:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Reader=void 0;class r{constructor(){this.__isByteLikeReader__=!0}static isReader(t){return null!=t&&(t instanceof r||!0===t.__isByteLikeReader__)}}class n extends r{constructor(t){super(),this.view=new DataView(t)}length(){return this.view.byteLength}indexAt(t){return this.view.getUint8(t)}toArrayBuffer(){return this.view.buffer}serializeJson(){return"0x"+Array.prototype.map.call(new Uint8Array(this.view.buffer),(t=>("00"+t.toString(16)).slice(-2))).join("")}}class i extends r{constructor(t){super(),this.string=t}length(){return this.string.length/2-1}indexAt(t){return parseInt(this.string.substr(2+2*t,2),16)}toArrayBuffer(){const t=new ArrayBuffer(this.length()),e=new DataView(t);for(let r=0;r<this.length();r++)e.setUint8(r,this.indexAt(r));return t}serializeJson(){return this.string}}class o extends r{constructor(t){if(super(),t instanceof i||t instanceof n)return t;if("string"===typeof t){if(!t.startsWith("0x")||t.length%2!==0)throw new Error("Hex string must start with 0x, and has even numbered length!");return new i(t)}if(t instanceof ArrayBuffer)return new n(t);if(t instanceof Uint8Array)return new n(Uint8Array.from(t).buffer);throw new Error("Reader can only accept hex string or ArrayBuffer!")}static from(t){return new o(t)}static fromRawString(t){const e=new ArrayBuffer(t.length),r=new DataView(e);for(let n=0;n<t.length;n++){const e=t.charCodeAt(n);if(e>255)throw new Error("fromRawString can only accept UTF-8 raw string!");r.setUint8(n,e)}return new n(e)}}e.Reader=o},791168:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformBlock=function(t,{validation:e=!0,debugPath:r="block"}={}){t=a(r,t,{header:c(g),uncles:d(c(y)),transactions:d(c(h)),proposals:d(o)}),e&&n.ValidateBlock(t,{debugPath:`(transformed) ${r}`});return t},e.TransformCellInput=l,e.TransformCellOutput=p,e.TransformCellbaseWitness=function(t,{validation:e=!0,debugPath:r="cellbase_witness"}={}){t=a(r,t,{lock:c(s),message:o}),e&&n.ValidateCellbaseWitness(t,{debugPath:`(transformed) ${r}`});return t},e.TransformHeader=g,e.TransformOutPoint=u,e.TransformRawHeader=function(t,{validation:e=!0,debugPath:r="raw_header"}={}){t=a(r,t,{version:o,compactTarget:o,timestamp:o,number:o,epoch:o,parentHash:o,transactionsRoot:o,proposalsHash:o,extraHash:o,dao:o}),e&&n.ValidateRawHeader(t,{debugPath:`(transformed) ${r}`});return t},e.TransformRawTransaction=function(t,{validation:e=!0,debugPath:r="raw_transaction"}={}){t=a(r,t,{version:o,cellDeps:d(c(f)),headerDeps:d(o),inputs:d(c(l)),outputs:d(c(p)),outputsData:d(o)}),e&&n.ValidateRawTransaction(t,{debugPath:`(transformed) ${r}`});return t},e.TransformScript=s,e.TransformTransaction=h,e.TransformUncleBlock=y,e.TransformWitnessArgs=function(t,{validation:e=!0,debugPath:r="witness_args"}={}){t=a(r,t,{lock:o,inputType:o,outputType:o}),e&&n.ValidateWitnessArgs(t,{debugPath:`(transformed) ${r}`});return t};var n=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,r&&r.set(t,n);return n}(r(115654));function i(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function o(t,e){return e instanceof Object&&e.serializeJson instanceof Function?e.serializeJson.call(e):e}function a(t,e,r){if(!((e=o(0,e))instanceof Object))throw new Error(`Transformed ${t} is not an object!`);const n={};for(const[i,o]of Object.entries(r)){let r=e[i];if(!r){r=e[i.replace(/(_[a-z])/g,(t=>t.toUpperCase().replace("_","")))]}r&&(n[i]=o(`${t}.${i}`,r))}return n}function s(t,{validation:e=!0,debugPath:r="script"}={}){return t=a(r,t,{codeHash:o,hashType:o,args:o}),e&&n.ValidateScript(t,{debugPath:`(transformed) ${r}`}),t}function u(t,{validation:e=!0,debugPath:r="outPoint"}={}){return t=a(r,t,{txHash:o,index:o}),e&&n.ValidateOutPoint(t,{debugPath:`(transformed) ${r}`}),t}function c(t){return function(e,r){return t(r,{validation:!1,debugPath:e})}}function l(t,{validation:e=!0,debugPath:r="cell_input"}={}){return t=a(r,t,{since:o,previousOutput:c(u)}),e&&n.ValidateCellInput(t,{debugPath:`(transformed) ${r}`}),t}function p(t,{validation:e=!0,debugPath:r="cellOutput"}={}){return t=a(r,t,{capacity:o,lock:c(s),type:c(s)}),e&&n.ValidateCellOutput(t,{debugPath:`(transformed) ${r}`}),t}function f(t,{validation:e=!0,debugPath:r="cell_dep"}={}){return t=a(r,t,{outPoint:c(u),depType:o}),e&&n.ValidateCellDep(t,{debugPath:`(transformed) ${r}`}),t}function d(t){return function(e,r){return r.map(((r,n)=>t(`${e}[${n}]`,r)))}}function h(t,{validation:e=!0,debugPath:r="transaction"}={}){return t=a(r,t,{version:o,cellDeps:d(c(f)),headerDeps:d(o),inputs:d(c(l)),outputs:d(c(p)),outputsData:d(o),witnesses:d(o)}),e&&n.ValidateTransaction(t,{debugPath:`(transformed) ${r}`}),t}function g(t,{validation:e=!0,debugPath:r="header"}={}){return t=a(r,t,{version:o,compactTarget:o,timestamp:o,number:o,epoch:o,parentHash:o,transactionsRoot:o,proposalsHash:o,extraHash:o,dao:o,nonce:o}),e&&n.ValidateHeader(t,{debugPath:`(transformed) ${r}`}),t}function y(t,{validation:e=!0,debugPath:r="uncle_block"}={}){return t=a(r,t,{header:c(g),proposals:d(o)}),e&&n.ValidateUncleBlock(t,{debugPath:`(transformed) ${r}`}),t}},115654:(t,e)=>{"use strict";function r(t,e,r,n=[]){!function(t,e){if(!(e instanceof Object))throw new Error(`${t} is not an object!`)}(t,e);const i=Object.keys(e).sort(),o=r.length,a=r.length+n.length,s=`${t} does not have correct keys! Required keys: [${r.sort().join(", ")}], optional keys: [${n.sort().join(", ")}], actual keys: [${i.join(", ")}]`;if(i.length<o||i.length>a)throw new Error(s);let u=i.filter((t=>!r.includes(t)));if(i.length-u.length!==o)throw new Error(s);if(u.find((t=>!n.includes(t))))throw new Error(s)}function n(t,e){if(!/^0x([0-9a-fA-F][0-9a-fA-F])*$/.test(e))throw new Error(`${t} must be a hex string!`)}function i(t,e){if(n(t,e),66!==e.length)throw new Error(`${t} must be a hex string of 66 bytes long!`)}function o(t,e){if("0x0"!==e&&!/^0x[1-9a-fA-F][0-9a-fA-F]*$/.test(e))throw new Error(`${t} must be a hex integer!`)}function a(t,{nestedValidation:e=!0,debugPath:o="script"}={}){if(r(o,t,["codeHash","hashType","args"],[]),i(`${o}.codeHash`,t.codeHash),n(`${o}.args`,t.args),"data"!==t.hashType&&"type"!==t.hashType&&"data1"!==t.hashType&&"data2"!==t.hashType)throw new Error(`${o}.hashType must be either data or type!`)}function s(t,{nestedValidation:e=!0,debugPath:n="outPoint"}={}){r(n,t,["txHash","index"],[]),i(`${n}.txHash`,t.txHash),o(`${n}.index`,t.index)}function u(t,{nestedValidation:e=!0,debugPath:n="cellInput"}={}){r(n,t,["since","previousOutput"],[]),o(`${n}.since`,t.since),e&&s(t.previousOutput,{debugPath:`${n}.previousOutput`})}function c(t,{nestedValidation:e=!0,debugPath:n="cellOutput"}={}){r(n,t,["capacity","lock"],["type"]),o(`${n}.capacity`,t.capacity),e&&(a(t.lock,{debugPath:`${n}.lock`}),t.type&&a(t.type,{debugPath:`${n}.type`}))}function l(t,{nestedValidation:e=!0,debugPath:n="cellDep"}={}){if(r(n,t,["outPoint","depType"],[]),"code"!==t.depType&&"depGroup"!==t.depType)throw new Error(`${n}.depType must be either code or depGroup!`);e&&s(t.outPoint,{debugPath:`${n}.outPoint`})}function p(t,e,r,n){if(!Array.isArray(e))throw new Error(`${t} is not an array!`);if(n)for(let i=0;i<e.length;i++)r(`${t}[${i}]`,e[i])}function f(t,e){return function(r,n){t(n,{nestedValidation:e,debugPath:r})}}function d(t,e,r){o(`${t}.version`,e.version),p(`${t}.cellDeps`,e.cellDeps,f(l,r),r),p(`${t}.headerDeps`,e.headerDeps,i,r),p(`${t}.inputs`,e.inputs,f(u,r),r),p(`${t}.outputs`,e.outputs,f(c,r),r),p(`${t}.outputsData`,e.outputsData,n,r)}function h(t,{nestedValidation:e=!0,debugPath:i="transaction"}={}){r(i,t,["version","cellDeps","headerDeps","inputs","outputs","outputsData","witnesses"],[]),d(i,t,e),p(`${i}.witnesses`,t.witnesses,n,e)}function g(t,{nestedValidation:e=!0,debugPath:i="header"}={}){if(r(i,t,["version","compactTarget","timestamp","number","epoch","parentHash","transactionsRoot","proposalsHash","extraHash","dao","nonce"],[]),n(`${i}.nonce`,t.nonce),34!==t.nonce.length)throw new Error(`${i}.nonce must be a hex string of 34 bytes long!`)}function y(t,e){if(n(t,e),22!==e.length)throw new Error(`${t} must be a hex string of 22 bytes long!`)}function _(t,{nestedValidation:e=!0,debugPath:n="uncleBlock"}={}){r(n,t,["header","proposals"],[]),e&&g(t.header,{debugPath:`${n}.header`}),p(`${n}.proposals`,t.proposals,y,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ValidateBlock=function(t,{nestedValidation:e=!0,debugPath:n="block"}={}){r(n,t,["header","uncles","transactions","proposals"],[]),e&&g(t.header,{debugPath:`${n}.header`});p(`${n}.uncles`,t.uncles,f(_,e),e),p(`${n}.transactions`,t.transactions,f(h,e),e),p(`${n}.proposals`,t.proposals,y,e)},e.ValidateCellDep=l,e.ValidateCellInput=u,e.ValidateCellOutput=c,e.ValidateCellbaseWitness=function(t,{nestedValidation:e=!0,debugPath:i="cellbaseWitness"}={}){r(i,t,["lock","message"],[]),n(`${i}.message`,t.message),e&&a(t.lock,{debugPath:`${i}.lock`})},e.ValidateHeader=g,e.ValidateOutPoint=s,e.ValidateRawHeader=function(t,{nestedValidation:e=!0,debugPath:n="rawHeader"}={}){r(n,t,["version","compactTarget","timestamp","number","epoch","parentHash","transactionsRoot","proposalsHash","extraHash","dao"],[]),function(t,e){o(`${t}.version`,e.version),o(`${t}.compactTarget`,e.compactTarget),o(`${t}.timestamp`,e.timestamp),o(`${t}.number`,e.number),o(`${t}.epoch`,e.epoch),i(`${t}.parentHash`,e.parentHash),i(`${t}.transactionsRoot`,e.transactionsRoot),i(`${t}.proposalsHash`,e.proposalsHash),i(`${t}.extraHash`,e.extraHash),i(`${t}.dao`,e.dao)}(n,t)},e.ValidateRawTransaction=function(t,{nestedValidation:e=!0,debugPath:n="rawTransaction"}={}){r(n,t,["version","cellDeps","headerDeps","inputs","outputs","outputsData"],[]),d(n,t,e)},e.ValidateScript=a,e.ValidateTransaction=h,e.ValidateUncleBlock=_,e.ValidateWitnessArgs=function(t,{nestedValidation:e=!0,debugPath:i="witnessArgs"}={}){r(i,t,[],["lock","inputType","outputType"]),t.lock&&n(`${i}.lock`,t.lock);t.inputType&&n(`${i}.inputType`,t.inputType);t.outputType&&n(`${i}.outputType`,t.outputType)}},747948:t=>{"use strict";const{AbortController:e,AbortSignal:r}="undefined"!==typeof self?self:"undefined"!==typeof window?window:void 0;t.exports=e,t.exports.AbortSignal=r,t.exports.default=t.exports.AbortController=e},88629:t=>{t.exports=function t(e){Object.freeze(e);var r="function"===typeof e,n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(e).forEach((function(i){!n.call(e,i)||r&&("caller"===i||"callee"===i||"arguments"===i)||null===e[i]||"object"!==typeof e[i]&&"function"!==typeof e[i]||Object.isFrozen(e[i])||t(e[i])})),e}},727623:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Collection:()=>C,Iterable:()=>In,List:()=>ur,Map:()=>Re,OrderedMap:()=>Sr,OrderedSet:()=>ln,PairSorting:()=>gn,Range:()=>Kr,Record:()=>yn,Repeat:()=>kn,Seq:()=>J,Set:()=>Nr,Stack:()=>Ir,default:()=>Pn,fromJS:()=>On,get:()=>ue,getIn:()=>Vr,has:()=>se,hasIn:()=>Gr,hash:()=>_t,is:()=>dt,isAssociative:()=>O,isCollection:()=>b,isImmutable:()=>H,isIndexed:()=>k,isKeyed:()=>w,isList:()=>sr,isMap:()=>lt,isOrdered:()=>j,isOrderedMap:()=>pt,isOrderedSet:()=>jr,isPlainObject:()=>ie,isRecord:()=>B,isSeq:()=>T,isSet:()=>Dr,isStack:()=>xr,isValueObject:()=>ft,merge:()=>Oe,mergeDeep:()=>Ee,mergeDeepWith:()=>xe,mergeWith:()=>Ce,remove:()=>le,removeIn:()=>ye,set:()=>pe,setIn:()=>he,update:()=>me,updateIn:()=>fe,version:()=>xn});var n="delete",i=5,o=1<<i,a=o-1,s={};function u(t){t&&(t.value=!0)}function c(){}function l(t){return void 0===t.size&&(t.size=t.__iterate(f)),t.size}function p(t,e){if("number"!==typeof e){var r=e>>>0;if(""+r!==e||4294967295===r)return NaN;e=r}return e<0?l(t)+e:e}function f(){return!0}function d(t,e,r){return(0===t&&!_(t)||void 0!==r&&t<=-r)&&(void 0===e||void 0!==r&&e>=r)}function h(t,e){return y(t,e,0)}function g(t,e){return y(t,e,e)}function y(t,e,r){return void 0===t?r:_(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function _(t){return t<0||0===t&&1/t===-1/0}var m="@@__IMMUTABLE_ITERABLE__@@";function b(t){return Boolean(t&&t[m])}var v="@@__IMMUTABLE_KEYED__@@";function w(t){return Boolean(t&&t[v])}var S="@@__IMMUTABLE_INDEXED__@@";function k(t){return Boolean(t&&t[S])}function O(t){return w(t)||k(t)}var C=function(t){return b(t)?t:J(t)},E=function(t){function e(t){return w(t)?t:Q(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(C),x=function(t){function e(t){return k(t)?t:Z(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(C),I=function(t){function e(t){return b(t)&&!O(t)?t:tt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(C);C.Keyed=E,C.Indexed=x,C.Set=I;var P="@@__IMMUTABLE_SEQ__@@";function T(t){return Boolean(t&&t[P])}var A="@@__IMMUTABLE_RECORD__@@";function B(t){return Boolean(t&&t[A])}function H(t){return b(t)||B(t)}var D="@@__IMMUTABLE_ORDERED__@@";function j(t){return Boolean(t&&t[D])}var L=0,M=1,R=2,N="function"===typeof Symbol&&Symbol.iterator,z="@@iterator",F=N||z,U=function(t){this.next=t};function q(t,e,r,n){var i=0===t?e:1===t?r:[e,r];return n?n.value=i:n={value:i,done:!1},n}function $(){return{value:void 0,done:!0}}function W(t){return!!Array.isArray(t)||!!Y(t)}function K(t){return t&&"function"===typeof t.next}function V(t){var e=Y(t);return e&&e.call(t)}function Y(t){var e=t&&(N&&t[N]||t[z]);if("function"===typeof e)return e}U.prototype.toString=function(){return"[Iterator]"},U.KEYS=L,U.VALUES=M,U.ENTRIES=R,U.prototype.inspect=U.prototype.toSource=function(){return this.toString()},U.prototype[F]=function(){return this};var G=Object.prototype.hasOwnProperty;function X(t){return!(!Array.isArray(t)&&"string"!==typeof t)||t&&"object"===typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var J=function(t){function e(t){return void 0===t||null===t?ot():H(t)?t.toSeq():function(t){var e=ut(t);if(e)return function(t){var e=Y(t);return e&&e===t.entries}(t)?e.fromEntrySeq():function(t){var e=Y(t);return e&&e===t.keys}(t)?e.toSetSeq():e;if("object"===typeof t)return new rt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var r=this._cache;if(r){for(var n=r.length,i=0;i!==n;){var o=r[e?n-++i:i++];if(!1===t(o[1],o[0],this))break}return i}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var r=this._cache;if(r){var n=r.length,i=0;return new U((function(){if(i===n)return{value:void 0,done:!0};var o=r[e?n-++i:i++];return q(t,o[0],o[1])}))}return this.__iteratorUncached(t,e)},e}(C),Q=function(t){function e(t){return void 0===t||null===t?ot().toKeyedSeq():b(t)?w(t)?t.toSeq():t.fromEntrySeq():B(t)?t.toSeq():at(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(J),Z=function(t){function e(t){return void 0===t||null===t?ot():b(t)?w(t)?t.entrySeq():t.toIndexedSeq():B(t)?t.toSeq().entrySeq():st(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(J),tt=function(t){function e(t){return(b(t)&&!O(t)?t:Z(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(J);J.isSeq=T,J.Keyed=Q,J.Set=tt,J.Indexed=Z,J.prototype[P]=!0;var et=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[p(this,t)]:e},e.prototype.__iterate=function(t,e){for(var r=this._array,n=r.length,i=0;i!==n;){var o=e?n-++i:i++;if(!1===t(r[o],o,this))break}return i},e.prototype.__iterator=function(t,e){var r=this._array,n=r.length,i=0;return new U((function(){if(i===n)return{value:void 0,done:!0};var o=e?n-++i:i++;return q(t,o,r[o])}))},e}(Z),rt=function(t){function e(t){var e=Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return G.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var r=this._object,n=this._keys,i=n.length,o=0;o!==i;){var a=n[e?i-++o:o++];if(!1===t(r[a],a,this))break}return o},e.prototype.__iterator=function(t,e){var r=this._object,n=this._keys,i=n.length,o=0;return new U((function(){if(o===i)return{value:void 0,done:!0};var a=n[e?i-++o:o++];return q(t,a,r[a])}))},e}(Q);rt.prototype[D]=!0;var nt,it=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=V(this._collection),n=0;if(K(r))for(var i;!(i=r.next()).done&&!1!==t(i.value,n++,this););return n},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=V(this._collection);if(!K(r))return new U($);var n=0;return new U((function(){var e=r.next();return e.done?e:q(t,n++,e.value)}))},e}(Z);function ot(){return nt||(nt=new et([]))}function at(t){var e=ut(t);if(e)return e.fromEntrySeq();if("object"===typeof t)return new rt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function st(t){var e=ut(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ut(t){return X(t)?new et(t):W(t)?new it(t):void 0}var ct="@@__IMMUTABLE_MAP__@@";function lt(t){return Boolean(t&&t[ct])}function pt(t){return lt(t)&&j(t)}function ft(t){return Boolean(t&&"function"===typeof t.equals&&"function"===typeof t.hashCode)}function dt(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"===typeof t.valueOf&&"function"===typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(ft(t)&&ft(e)&&t.equals(e))}var ht="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var r=65535&(t|=0),n=65535&(e|=0);return r*n+((t>>>16)*n+r*(e>>>16)<<16>>>0)|0};function gt(t){return t>>>1&1073741824|3221225471&t}var yt=Object.prototype.valueOf;function _t(t){if(null==t)return mt(t);if("function"===typeof t.hashCode)return gt(t.hashCode(t));var e,r=(e=t).valueOf!==yt&&"function"===typeof e.valueOf?e.valueOf(e):e;if(null==r)return mt(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return function(t){if(t!==t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return gt(e)}(r);case"string":return r.length>It?function(t){var e=At[t];void 0===e&&(e=bt(t),Tt===Pt&&(Tt=0,At={}),Tt++,At[t]=e);return e}(r):bt(r);case"object":case"function":return function(t){var e;if(Ot&&void 0!==(e=kt.get(t)))return e;if(e=t[xt],void 0!==e)return e;if(!wt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[xt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=St(),Ot)kt.set(t,e);else{if(void 0!==vt&&!1===vt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(wt)Object.defineProperty(t,xt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[xt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[xt]=e}}return e}(r);case"symbol":return function(t){var e=Ct[t];if(void 0!==e)return e;return e=St(),Ct[t]=e,e}(r);default:if("function"===typeof r.toString)return bt(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function mt(t){return null===t?1108378658:1108378659}function bt(t){for(var e=0,r=0;r<t.length;r++)e=31*e+t.charCodeAt(r)|0;return gt(e)}var vt=Object.isExtensible,wt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function St(){var t=++Et;return 1073741824&Et&&(Et=0),t}var kt,Ot="function"===typeof WeakMap;Ot&&(kt=new WeakMap);var Ct=Object.create(null),Et=0,xt="__immutablehash__";"function"===typeof Symbol&&(xt=Symbol(xt));var It=16,Pt=255,Tt=0,At={},Bt=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Rt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var r=this,n=Mt(this,t,e);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(t,e)}),n},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e,n){return t(e,n,r)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Q);Bt.prototype[D]=!0;var Ht=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this,n=0;return e&&l(this),this._iter.__iterate((function(i){return t(i,e?r.size-++n:n++,r)}),e)},e.prototype.__iterator=function(t,e){var r=this,n=this._iter.__iterator(M,e),i=0;return e&&l(this),new U((function(){var o=n.next();return o.done?o:q(t,e?r.size-++i:i++,o.value,o)}))},e}(Z),Dt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(M,e);return new U((function(){var e=r.next();return e.done?e:q(t,e.value,e.value,e)}))},e}(tt),jt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var r=this;return this._iter.__iterate((function(e){if(e){Yt(e);var n=b(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],r)}}),e)},e.prototype.__iterator=function(t,e){var r=this._iter.__iterator(M,e);return new U((function(){for(;;){var e=r.next();if(e.done)return e;var n=e.value;if(n){Yt(n);var i=b(n);return q(t,i?n.get(0):n[0],i?n.get(1):n[1],e)}}}))},e}(Q);function Lt(t){var e=Xt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Jt,e.__iterateUncached=function(e,r){var n=this;return t.__iterate((function(t,r){return!1!==e(r,t,n)}),r)},e.__iteratorUncached=function(e,r){if(e===R){var n=t.__iterator(e,r);return new U((function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===M?L:M,r)},e}function Mt(t,e,r){var n=Xt(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,i){var o=t.get(n,s);return o===s?i:e.call(r,o,n,t)},n.__iterateUncached=function(n,i){var o=this;return t.__iterate((function(t,i,a){return!1!==n(e.call(r,t,i,a),i,o)}),i)},n.__iteratorUncached=function(n,i){var o=t.__iterator(R,i);return new U((function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return q(n,s,e.call(r,a[1],s,t),i)}))},n}function Rt(t,e){var r=this,n=Xt(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Lt(t);return e.reverse=function(){return t.flip()},e}),n.get=function(r,n){return t.get(e?r:-1-r,n)},n.has=function(r){return t.has(e?r:-1-r)},n.includes=function(e){return t.includes(e)},n.cacheResult=Jt,n.__iterate=function(r,n){var i=this,o=0;return n&&l(t),t.__iterate((function(t,a){return r(t,e?a:n?i.size-++o:o++,i)}),!n)},n.__iterator=function(n,i){var o=0;i&&l(t);var a=t.__iterator(R,!i);return new U((function(){var t=a.next();if(t.done)return t;var s=t.value;return q(n,e?s[0]:i?r.size-++o:o++,s[1],t)}))},n}function Nt(t,e,r,n){var i=Xt(t);return n&&(i.has=function(n){var i=t.get(n,s);return i!==s&&!!e.call(r,i,n,t)},i.get=function(n,i){var o=t.get(n,s);return o!==s&&e.call(r,o,n,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate((function(t,o,u){if(e.call(r,t,o,u))return s++,i(t,n?o:s-1,a)}),o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(R,o),s=0;return new U((function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(r,l,c,t))return q(i,n?c:s++,l,o)}}))},i}function zt(t,e,r,n){var i=t.size;if(d(e,r,i))return t;var o=h(e,i),a=g(r,i);if(o!==o||a!==a)return zt(t.toSeq().cacheResult(),e,r,n);var s,u=a-o;u===u&&(s=u<0?0:u);var c=Xt(t);return c.size=0===s?s:t.size&&s||void 0,!n&&T(t)&&s>=0&&(c.get=function(e,r){return(e=p(this,e))>=0&&e<s?t.get(e+o,r):r}),c.__iterateUncached=function(e,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(e,r);var a=0,u=!0,c=0;return t.__iterate((function(t,r){if(!u||!(u=a++<o))return c++,!1!==e(t,n?r:c-1,i)&&c!==s})),c},c.__iteratorUncached=function(e,r){if(0!==s&&r)return this.cacheResult().__iterator(e,r);if(0===s)return new U($);var i=t.__iterator(e,r),a=0,u=0;return new U((function(){for(;a++<o;)i.next();if(++u>s)return{value:void 0,done:!0};var t=i.next();return n||e===M||t.done?t:q(e,u-1,e===L?void 0:t.value[1],t)}))},c}function Ft(t,e,r,n){var i=Xt(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return t.__iterate((function(t,o,c){if(!s||!(s=e.call(r,t,o,c)))return u++,i(t,n?o:u-1,a)})),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(R,o),u=!0,c=0;return new U((function(){var t,o,l;do{if((t=s.next()).done)return n||i===M?t:q(i,c++,i===L?void 0:t.value[1],t);var p=t.value;o=p[0],l=p[1],u&&(u=e.call(r,l,o,a))}while(u);return i===R?t:q(i,o,l,t)}))},i}function Ut(t,e,r){var n=Xt(t);return n.__iterateUncached=function(i,o){if(o)return this.cacheResult().__iterate(i,o);var a=0,s=!1;return function t(u,c){u.__iterate((function(o,u){return(!e||c<e)&&b(o)?t(o,c+1):(a++,!1===i(o,r?u:a-1,n)&&(s=!0)),!s}),o)}(t,0),a},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=t.__iterator(n,i),a=[],s=0;return new U((function(){for(;o;){var t=o.next();if(!1===t.done){var u=t.value;if(n===R&&(u=u[1]),e&&!(a.length<e)||!b(u))return r?t:q(n,s++,u,t);a.push(o),o=u.__iterator(n,i)}else o=a.pop()}return{value:void 0,done:!0}}))},n}function qt(t,e,r){e||(e=Qt);var n=w(t),i=0,o=t.toSeq().map((function(e,n){return[n,e,i++,r?r(e,n,t):e]})).valueSeq().toArray();return o.sort((function(t,r){return e(t[3],r[3])||t[2]-r[2]})).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?Q(o):k(t)?Z(o):tt(o)}function $t(t,e,r){if(e||(e=Qt),r){var n=t.toSeq().map((function(e,n){return[e,r(e,n,t)]})).reduce((function(t,r){return Wt(e,t[1],r[1])?r:t}));return n&&n[0]}return t.reduce((function(t,r){return Wt(e,t,r)?r:t}))}function Wt(t,e,r){var n=t(r,e);return 0===n&&r!==e&&(void 0===r||null===r||r!==r)||n>0}function Kt(t,e,r,n){var i=Xt(t),o=new et(r).map((function(t){return t.size}));return i.size=n?o.max():o.min(),i.__iterate=function(t,e){for(var r,n=this.__iterator(M,e),i=0;!(r=n.next()).done&&!1!==t(r.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map((function(t){return t=C(t),V(i?t.reverse():t)})),a=0,s=!1;return new U((function(){var r;return s||(r=o.map((function(t){return t.next()})),s=n?r.every((function(t){return t.done})):r.some((function(t){return t.done}))),s?{value:void 0,done:!0}:q(t,a++,e.apply(null,r.map((function(t){return t.value}))))}))},i}function Vt(t,e){return t===e?t:T(t)?e:t.constructor(e)}function Yt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Gt(t){return w(t)?E:k(t)?x:I}function Xt(t){return Object.create((w(t)?Q:k(t)?Z:tt).prototype)}function Jt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):J.prototype.cacheResult.call(this)}function Qt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Zt(t,e){e=e||0;for(var r=Math.max(0,t.length-e),n=new Array(r),i=0;i<r;i++)n[i]=t[i+e];return n}function te(t,e){if(!t)throw new Error(e)}function ee(t){te(t!==1/0,"Cannot perform this action with an infinite size.")}function re(t){if(X(t)&&"string"!==typeof t)return t;if(j(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Ht.prototype.cacheResult=Bt.prototype.cacheResult=Dt.prototype.cacheResult=jt.prototype.cacheResult=Jt;var ne=Object.prototype.toString;function ie(t){if(!t||"object"!==typeof t||"[object Object]"!==ne.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var r=e,n=Object.getPrototypeOf(e);null!==n;)r=n,n=Object.getPrototypeOf(r);return r===e}function oe(t){return"object"===typeof t&&(H(t)||Array.isArray(t)||ie(t))}function ae(t){try{return"string"===typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function se(t,e){return H(t)?t.has(e):oe(t)&&G.call(t,e)}function ue(t,e,r){return H(t)?t.get(e,r):se(t,e)?"function"===typeof t.get?t.get(e):t[e]:r}function ce(t){if(Array.isArray(t))return Zt(t);var e={};for(var r in t)G.call(t,r)&&(e[r]=t[r]);return e}function le(t,e){if(!oe(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(H(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!G.call(t,e))return t;var r=ce(t);return Array.isArray(r)?r.splice(e,1):delete r[e],r}function pe(t,e,r){if(!oe(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(H(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,r)}if(G.call(t,e)&&r===t[e])return t;var n=ce(t);return n[e]=r,n}function fe(t,e,r,n){n||(n=r,r=void 0);var i=de(H(t),t,re(e),0,r,n);return i===s?r:i}function de(t,e,r,n,i,o){var a=e===s;if(n===r.length){var u=a?i:e,c=o(u);return c===u?e:c}if(!a&&!oe(e))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,n).map(ae)+"]: "+e);var l=r[n],p=a?s:ue(e,l,s),f=de(p===s?t:H(p),p,r,n+1,i,o);return f===p?e:f===s?le(e,l):pe(a?t?Xe():{}:e,l,f)}function he(t,e,r){return fe(t,e,s,(function(){return r}))}function ge(t,e){return he(this,t,e)}function ye(t,e){return fe(t,e,(function(){return s}))}function _e(t){return ye(this,t)}function me(t,e,r,n){return fe(t,[e],r,n)}function be(t,e,r){return 1===arguments.length?t(this):me(this,t,e,r)}function ve(t,e,r){return fe(this,t,e,r)}function we(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ke(this,t)}function Se(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];if("function"!==typeof t)throw new TypeError("Invalid merger function: "+t);return ke(this,e,t)}function ke(t,e,r){for(var n=[],i=0;i<e.length;i++){var o=E(e[i]);0!==o.size&&n.push(o)}return 0===n.length?t:0!==t.toSeq().size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var e=r?function(e,n){me(t,n,s,(function(t){return t===s?e:r(t,e,n)}))}:function(e,r){t.set(r,e)},i=0;i<n.length;i++)n[i].forEach(e)})):t.constructor(n[0])}function Oe(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Pe(t,e)}function Ce(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Pe(e,r,t)}function Ee(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ie(t,e)}function xe(t,e){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Ie(e,r,t)}function Ie(t,e,r){return Pe(t,e,function(t){function e(r,n,i){return oe(r)&&oe(n)&&function(t,e){var r=J(t),n=J(e);return k(r)===k(n)&&w(r)===w(n)}(r,n)?Pe(r,[n],e):t?t(r,n,i):n}return e}(r))}function Pe(t,e,r){if(!oe(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(H(t))return"function"===typeof r&&t.mergeWith?t.mergeWith.apply(t,[r].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var n=Array.isArray(t),i=t,o=n?x:E,a=n?function(e){i===t&&(i=ce(i)),i.push(e)}:function(e,n){var o=G.call(i,n),a=o&&r?r(i[n],e,n):e;o&&a===i[n]||(i===t&&(i=ce(i)),i[n]=a)},s=0;s<e.length;s++)o(e[s]).forEach(a);return i}function Te(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ie(this,t)}function Ae(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return Ie(this,e,t)}function Be(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return fe(this,t,Xe(),(function(t){return Pe(t,e)}))}function He(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];return fe(this,t,Xe(),(function(t){return Ie(t,e)}))}function De(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function je(){return this.__ownerID?this:this.__ensureOwner(new c)}function Le(){return this.__ensureOwner()}function Me(){return this.__altered}var Re=function(t){function e(e){return void 0===e||null===e?Xe():lt(e)&&!j(e)?e:Xe().withMutations((function(r){var n=t(e);ee(n.size),n.forEach((function(t,e){return r.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Xe().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Je(this,t,e)},e.prototype.remove=function(t){return Je(this,t,s)},e.prototype.deleteAll=function(t){var e=C(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Xe()},e.prototype.sort=function(t){return Sr(qt(this,t))},e.prototype.sortBy=function(t,e){return Sr(qt(this,e,t))},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){n.forEach((function(i,o){n.set(o,t.call(e,i,o,r))}))}))},e.prototype.__iterator=function(t,e){return new Ke(this,t,e)},e.prototype.__iterate=function(t,e){var r=this,n=0;return this._root&&this._root.iterate((function(e){return n++,t(e[1],e[0],r)}),e),n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ge(this.size,this._root,t,this.__hash):0===this.size?Xe():(this.__ownerID=t,this.__altered=!1,this)},e}(E);Re.isMap=lt;var Ne=Re.prototype;Ne[ct]=!0,Ne[n]=Ne.remove,Ne.removeAll=Ne.deleteAll,Ne.setIn=ge,Ne.removeIn=Ne.deleteIn=_e,Ne.update=be,Ne.updateIn=ve,Ne.merge=Ne.concat=we,Ne.mergeWith=Se,Ne.mergeDeep=Te,Ne.mergeDeepWith=Ae,Ne.mergeIn=Be,Ne.mergeDeepIn=He,Ne.withMutations=De,Ne.wasAltered=Me,Ne.asImmutable=Le,Ne["@@transducer/init"]=Ne.asMutable=je,Ne["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Ne["@@transducer/result"]=function(t){return t.asImmutable()};var ze=function(t,e){this.ownerID=t,this.entries=e};ze.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(dt(r,i[o][0]))return i[o][1];return n},ze.prototype.update=function(t,e,r,n,i,o,a){for(var l=i===s,p=this.entries,f=0,d=p.length;f<d&&!dt(n,p[f][0]);f++);var h=f<d;if(h?p[f][1]===i:l)return this;if(u(a),(l||!h)&&u(o),!l||1!==p.length){if(!h&&!l&&p.length>=nr)return function(t,e,r,n){t||(t=new c);for(var i=new $e(t,_t(r),[r,n]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}(t,p,n,i);var g=t&&t===this.ownerID,y=g?p:Zt(p);return h?l?f===d-1?y.pop():y[f]=y.pop():y[f]=[n,i]:y.push([n,i]),g?(this.entries=y,this):new ze(t,y)}};var Fe=function(t,e,r){this.ownerID=t,this.bitmap=e,this.nodes=r};Fe.prototype.get=function(t,e,r,n){void 0===e&&(e=_t(r));var o=1<<((0===t?e:e>>>t)&a),s=this.bitmap;return 0===(s&o)?n:this.nodes[er(s&o-1)].get(t+i,e,r,n)},Fe.prototype.update=function(t,e,r,n,u,c,l){void 0===r&&(r=_t(n));var p=(0===e?r:r>>>e)&a,f=1<<p,d=this.bitmap,h=0!==(d&f);if(!h&&u===s)return this;var g=er(d&f-1),y=this.nodes,_=h?y[g]:void 0,m=Qe(_,t,e+i,r,n,u,c,l);if(m===_)return this;if(!h&&m&&y.length>=ir)return function(t,e,r,n,i){for(var a=0,s=new Array(o),u=0;0!==r;u++,r>>>=1)s[u]=1&r?e[a++]:void 0;return s[n]=i,new Ue(t,a+1,s)}(t,y,d,p,m);if(h&&!m&&2===y.length&&Ze(y[1^g]))return y[1^g];if(h&&m&&1===y.length&&Ze(m))return m;var b=t&&t===this.ownerID,v=h?m?d:d^f:d|f,w=h?m?rr(y,g,m,b):function(t,e,r){var n=t.length-1;if(r&&e===n)return t.pop(),t;for(var i=new Array(n),o=0,a=0;a<n;a++)a===e&&(o=1),i[a]=t[a+o];return i}(y,g,b):function(t,e,r,n){var i=t.length+1;if(n&&e+1===i)return t[e]=r,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=r,a=-1):o[s]=t[s+a];return o}(y,g,m,b);return b?(this.bitmap=v,this.nodes=w,this):new Fe(t,v,w)};var Ue=function(t,e,r){this.ownerID=t,this.count=e,this.nodes=r};Ue.prototype.get=function(t,e,r,n){void 0===e&&(e=_t(r));var o=(0===t?e:e>>>t)&a,s=this.nodes[o];return s?s.get(t+i,e,r,n):n},Ue.prototype.update=function(t,e,r,n,o,u,c){void 0===r&&(r=_t(n));var l=(0===e?r:r>>>e)&a,p=o===s,f=this.nodes,d=f[l];if(p&&!d)return this;var h=Qe(d,t,e+i,r,n,o,u,c);if(h===d)return this;var g=this.count;if(d){if(!h&&--g<or)return function(t,e,r,n){for(var i=0,o=0,a=new Array(r),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];void 0!==l&&s!==n&&(i|=u,a[o++]=l)}return new Fe(t,i,a)}(t,f,g,l)}else g++;var y=t&&t===this.ownerID,_=rr(f,l,h,y);return y?(this.count=g,this.nodes=_,this):new Ue(t,g,_)};var qe=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entries=r};qe.prototype.get=function(t,e,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(dt(r,i[o][0]))return i[o][1];return n},qe.prototype.update=function(t,e,r,n,i,o,a){void 0===r&&(r=_t(n));var c=i===s;if(r!==this.keyHash)return c?this:(u(a),u(o),tr(this,t,e,r,[n,i]));for(var l=this.entries,p=0,f=l.length;p<f&&!dt(n,l[p][0]);p++);var d=p<f;if(d?l[p][1]===i:c)return this;if(u(a),(c||!d)&&u(o),c&&2===f)return new $e(t,this.keyHash,l[1^p]);var h=t&&t===this.ownerID,g=h?l:Zt(l);return d?c?p===f-1?g.pop():g[p]=g.pop():g[p]=[n,i]:g.push([n,i]),h?(this.entries=g,this):new qe(t,this.keyHash,g)};var $e=function(t,e,r){this.ownerID=t,this.keyHash=e,this.entry=r};$e.prototype.get=function(t,e,r,n){return dt(r,this.entry[0])?this.entry[1]:n},$e.prototype.update=function(t,e,r,n,i,o,a){var c=i===s,l=dt(n,this.entry[0]);return(l?i===this.entry[1]:c)?this:(u(a),c?void u(o):l?t&&t===this.ownerID?(this.entry[1]=i,this):new $e(t,this.keyHash,[n,i]):(u(o),tr(this,t,e,_t(n),[n,i])))},ze.prototype.iterate=qe.prototype.iterate=function(t,e){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===t(r[e?i-n:n]))return!1},Fe.prototype.iterate=Ue.prototype.iterate=function(t,e){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[e?i-n:n];if(o&&!1===o.iterate(t,e))return!1}},$e.prototype.iterate=function(t,e){return t(this.entry)};var We,Ke=function(t){function e(t,e,r){this._type=e,this._reverse=r,this._stack=t._root&&Ye(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var r=e.node,n=e.index++,i=void 0;if(r.entry){if(0===n)return Ve(t,r.entry)}else if(r.entries){if(n<=(i=r.entries.length-1))return Ve(t,r.entries[this._reverse?i-n:n])}else if(n<=(i=r.nodes.length-1)){var o=r.nodes[this._reverse?i-n:n];if(o){if(o.entry)return Ve(t,o.entry);e=this._stack=Ye(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(U);function Ve(t,e){return q(t,e[0],e[1])}function Ye(t,e){return{node:t,index:0,__prev:e}}function Ge(t,e,r,n){var i=Object.create(Ne);return i.size=t,i._root=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Xe(){return We||(We=Ge(0))}function Je(t,e,r){var n,i;if(t._root){var o={value:!1},a={value:!1};if(n=Qe(t._root,t.__ownerID,0,void 0,e,r,o,a),!a.value)return t;i=t.size+(o.value?r===s?-1:1:0)}else{if(r===s)return t;i=1,n=new ze(t.__ownerID,[[e,r]])}return t.__ownerID?(t.size=i,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Ge(i,n):Xe()}function Qe(t,e,r,n,i,o,a,c){return t?t.update(e,r,n,i,o,a,c):o===s?t:(u(c),u(a),new $e(e,n,[i,o]))}function Ze(t){return t.constructor===$e||t.constructor===qe}function tr(t,e,r,n,o){if(t.keyHash===n)return new qe(e,n,[t.entry,o]);var s,u=(0===r?t.keyHash:t.keyHash>>>r)&a,c=(0===r?n:n>>>r)&a,l=u===c?[tr(t,e,r+i,n,o)]:(s=new $e(e,n,o),u<c?[t,s]:[s,t]);return new Fe(e,1<<u|1<<c,l)}function er(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function rr(t,e,r,n){var i=n?t:Zt(t);return i[e]=r,i}var nr=o/4,ir=o/2,or=o/4,ar="@@__IMMUTABLE_LIST__@@";function sr(t){return Boolean(t&&t[ar])}var ur=function(t){function e(e){var r=gr();if(void 0===e||null===e)return r;if(sr(e))return e;var n=t(e),a=n.size;return 0===a?r:(ee(a),a>0&&a<o?hr(0,a,i,null,new lr(n.toArray())):r.withMutations((function(t){t.setSize(a),n.forEach((function(e,r){return t.set(r,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=p(this,t))>=0&&t<this.size){var r=mr(this,t+=this._origin);return r&&r.array[t&a]}return e},e.prototype.set=function(t,e){return function(t,e,r){if(e=p(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?br(t,e).set(0,r):br(t,0,e+1).set(e,r)}));e+=t._origin;var n=t._tail,i=t._root,o={value:!1};e>=vr(t._capacity)?n=yr(n,t.__ownerID,0,e,r,o):i=yr(i,t.__ownerID,t._level,e,r,o);if(!o.value)return t;if(t.__ownerID)return t._root=i,t._tail=n,t.__hash=void 0,t.__altered=!0,t;return hr(t._origin,t._capacity,t._level,i,n)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=i,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):gr()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(r){br(r,0,e+t.length);for(var n=0;n<t.length;n++)r.set(e+n,t[n])}))},e.prototype.pop=function(){return br(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){br(e,-t.length);for(var r=0;r<t.length;r++)e.set(r,t[r])}))},e.prototype.shift=function(){return br(this,1)},e.prototype.concat=function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++){var i=e[n],o=t("string"!==typeof i&&W(i)?i:[i]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations((function(t){r.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(r[0])},e.prototype.setSize=function(t){return br(this,0,t)},e.prototype.map=function(t,e){var r=this;return this.withMutations((function(n){for(var i=0;i<r.size;i++)n.set(i,t.call(e,n.get(i),i,r))}))},e.prototype.slice=function(t,e){var r=this.size;return d(t,e,r)?this:br(this,h(t,r),g(e,r))},e.prototype.__iterator=function(t,e){var r=e?this.size:0,n=dr(this,e);return new U((function(){var i=n();return i===fr?{value:void 0,done:!0}:q(t,e?--r:r++,i)}))},e.prototype.__iterate=function(t,e){for(var r,n=e?this.size:0,i=dr(this,e);(r=i())!==fr&&!1!==t(r,e?--n:n++,this););return n},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?hr(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?gr():(this.__ownerID=t,this.__altered=!1,this)},e}(x);ur.isList=sr;var cr=ur.prototype;cr[ar]=!0,cr[n]=cr.remove,cr.merge=cr.concat,cr.setIn=ge,cr.deleteIn=cr.removeIn=_e,cr.update=be,cr.updateIn=ve,cr.mergeIn=Be,cr.mergeDeepIn=He,cr.withMutations=De,cr.wasAltered=Me,cr.asImmutable=Le,cr["@@transducer/init"]=cr.asMutable=je,cr["@@transducer/step"]=function(t,e){return t.push(e)},cr["@@transducer/result"]=function(t){return t.asImmutable()};var lr=function(t,e){this.array=t,this.ownerID=e};lr.prototype.removeBefore=function(t,e,r){if(r===e?1<<e:0===this.array.length)return this;var n=r>>>e&a;if(n>=this.array.length)return new lr([],t);var o,s=0===n;if(e>0){var u=this.array[n];if((o=u&&u.removeBefore(t,e-i,r))===u&&s)return this}if(s&&!o)return this;var c=_r(this,t);if(!s)for(var l=0;l<n;l++)c.array[l]=void 0;return o&&(c.array[n]=o),c},lr.prototype.removeAfter=function(t,e,r){if(r===(e?1<<e:0)||0===this.array.length)return this;var n,o=r-1>>>e&a;if(o>=this.array.length)return this;if(e>0){var s=this.array[o];if((n=s&&s.removeAfter(t,e-i,r))===s&&o===this.array.length-1)return this}var u=_r(this,t);return u.array.splice(o+1),n&&(u.array[o]=n),u};var pr,fr={};function dr(t,e){var r=t._origin,n=t._capacity,a=vr(n),s=t._tail;return u(t._root,t._level,0);function u(t,c,l){return 0===c?function(t,i){var u=i===a?s&&s.array:t&&t.array,c=i>r?0:r-i,l=n-i;l>o&&(l=o);return function(){if(c===l)return fr;var t=e?--l:c++;return u&&u[t]}}(t,l):function(t,a,s){var c,l=t&&t.array,p=s>r?0:r-s>>a,f=1+(n-s>>a);f>o&&(f=o);return function(){for(;;){if(c){var t=c();if(t!==fr)return t;c=null}if(p===f)return fr;var r=e?--f:p++;c=u(l&&l[r],a-i,s+(r<<a))}}}(t,c,l)}}function hr(t,e,r,n,i,o,a){var s=Object.create(cr);return s.size=e-t,s._origin=t,s._capacity=e,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function gr(){return pr||(pr=hr(0,0,i))}function yr(t,e,r,n,o,s){var c,l=n>>>r&a,p=t&&l<t.array.length;if(!p&&void 0===o)return t;if(r>0){var f=t&&t.array[l],d=yr(f,e,r-i,n,o,s);return d===f?t:((c=_r(t,e)).array[l]=d,c)}return p&&t.array[l]===o?t:(s&&u(s),c=_r(t,e),void 0===o&&l===c.array.length-1?c.array.pop():c.array[l]=o,c)}function _r(t,e){return e&&t&&e===t.ownerID?t:new lr(t?t.array.slice():[],e)}function mr(t,e){if(e>=vr(t._capacity))return t._tail;if(e<1<<t._level+i){for(var r=t._root,n=t._level;r&&n>0;)r=r.array[e>>>n&a],n-=i;return r}}function br(t,e,r){void 0!==e&&(e|=0),void 0!==r&&(r|=0);var n=t.__ownerID||new c,o=t._origin,s=t._capacity,u=o+e,l=void 0===r?s:r<0?s+r:o+r;if(u===o&&l===s)return t;if(u>=l)return t.clear();for(var p=t._level,f=t._root,d=0;u+d<0;)f=new lr(f&&f.array.length?[void 0,f]:[],n),d+=1<<(p+=i);d&&(u+=d,o+=d,l+=d,s+=d);for(var h=vr(s),g=vr(l);g>=1<<p+i;)f=new lr(f&&f.array.length?[f]:[],n),p+=i;var y=t._tail,_=g<h?mr(t,l-1):g>h?new lr([],n):y;if(y&&g>h&&u<s&&y.array.length){for(var m=f=_r(f,n),b=p;b>i;b-=i){var v=h>>>b&a;m=m.array[v]=_r(m.array[v],n)}m.array[h>>>i&a]=y}if(l<s&&(_=_&&_.removeAfter(n,0,l)),u>=g)u-=g,l-=g,p=i,f=null,_=_&&_.removeBefore(n,0,u);else if(u>o||g<h){for(d=0;f;){var w=u>>>p&a;if(w!==g>>>p&a)break;w&&(d+=(1<<p)*w),p-=i,f=f.array[w]}f&&u>o&&(f=f.removeBefore(n,p,u-d)),f&&g<h&&(f=f.removeAfter(n,p,g-d)),d&&(u-=d,l-=d)}return t.__ownerID?(t.size=l-u,t._origin=u,t._capacity=l,t._level=p,t._root=f,t._tail=_,t.__hash=void 0,t.__altered=!0,t):hr(u,l,p,f,_)}function vr(t){return t<o?0:t-1>>>i<<i}var wr,Sr=function(t){function e(t){return void 0===t||null===t?Or():pt(t)?t:Or().withMutations((function(e){var r=E(t);ee(r.size),r.forEach((function(t,r){return e.set(r,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var r=this._map.get(t);return void 0!==r?this._list.get(r)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Or()},e.prototype.set=function(t,e){return Cr(this,t,e)},e.prototype.remove=function(t){return Cr(this,t,s)},e.prototype.__iterate=function(t,e){var r=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],r)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),r=this._list.__ensureOwner(t);return t?kr(e,r,t,this.__hash):0===this.size?Or():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=r,this)},e}(Re);function kr(t,e,r,n){var i=Object.create(Sr.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Or(){return wr||(wr=kr(Xe(),gr()))}function Cr(t,e,r){var n,i,a=t._map,u=t._list,c=a.get(e),l=void 0!==c;if(r===s){if(!l)return t;u.size>=o&&u.size>=2*a.size?(n=(i=u.filter((function(t,e){return void 0!==t&&c!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(n.__ownerID=i.__ownerID=t.__ownerID)):(n=a.remove(e),i=c===u.size-1?u.pop():u.set(c,void 0))}else if(l){if(r===u.get(c)[1])return t;n=a,i=u.set(c,[e,r])}else n=a.set(e,u.size),i=u.set(u.size,[e,r]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=i,t.__hash=void 0,t.__altered=!0,t):kr(n,i)}Sr.isOrderedMap=pt,Sr.prototype[D]=!0,Sr.prototype[n]=Sr.prototype.remove;var Er="@@__IMMUTABLE_STACK__@@";function xr(t){return Boolean(t&&t[Er])}var Ir=function(t){function e(t){return void 0===t||null===t?Br():xr(t)?t:Br().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var r=this._head;for(t=p(this,t);r&&t--;)r=r.next;return r?r.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:t[n],next:r};return this.__ownerID?(this.size=e,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ar(e,r)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&xr(e))return e;ee(e.size);var r=this.size,n=this._head;return e.__iterate((function(t){r++,n={value:t,next:n}}),!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ar(r,n)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Br()},e.prototype.slice=function(e,r){if(d(e,r,this.size))return this;var n=h(e,this.size);if(g(r,this.size)!==this.size)return t.prototype.slice.call(this,e,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ar(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ar(this.size,this._head,t,this.__hash):0===this.size?Br():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var r=this;if(e)return new et(this.toArray()).__iterate((function(e,n){return t(e,n,r)}),e);for(var n=0,i=this._head;i&&!1!==t(i.value,n++,this);)i=i.next;return n},e.prototype.__iterator=function(t,e){if(e)return new et(this.toArray()).__iterator(t,e);var r=0,n=this._head;return new U((function(){if(n){var e=n.value;return n=n.next,q(t,r++,e)}return{value:void 0,done:!0}}))},e}(x);Ir.isStack=xr;var Pr,Tr=Ir.prototype;function Ar(t,e,r,n){var i=Object.create(Tr);return i.size=t,i._head=e,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Br(){return Pr||(Pr=Ar(0))}Tr[Er]=!0,Tr.shift=Tr.pop,Tr.unshift=Tr.push,Tr.unshiftAll=Tr.pushAll,Tr.withMutations=De,Tr.wasAltered=Me,Tr.asImmutable=Le,Tr["@@transducer/init"]=Tr.asMutable=je,Tr["@@transducer/step"]=function(t,e){return t.unshift(e)},Tr["@@transducer/result"]=function(t){return t.asImmutable()};var Hr="@@__IMMUTABLE_SET__@@";function Dr(t){return Boolean(t&&t[Hr])}function jr(t){return Dr(t)&&j(t)}function Lr(t,e){if(t===e)return!0;if(!b(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||w(t)!==w(e)||k(t)!==k(e)||j(t)!==j(e))return!1;if(0===t.size&&0===e.size)return!0;var r=!O(t);if(j(t)){var n=t.entries();return e.every((function(t,e){var i=n.next().value;return i&&dt(i[1],t)&&(r||dt(i[0],e))}))&&n.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"===typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var a=!0,u=e.__iterate((function(e,n){if(r?!t.has(e):i?!dt(e,t.get(n,s)):!dt(t.get(n,s),e))return a=!1,!1}));return a&&t.size===u}function Mr(t,e){var r=function(r){t.prototype[r]=e[r]};return Object.keys(e).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(r),t}function Rr(t){if(!t||"object"!==typeof t)return t;if(!b(t)){if(!oe(t))return t;t=J(t)}if(w(t)){var e={};return t.__iterate((function(t,r){e[r]=Rr(t)})),e}var r=[];return t.__iterate((function(t){r.push(Rr(t))})),r}var Nr=function(t){function e(e){return void 0===e||null===e?$r():Dr(e)&&!j(e)?e:$r().withMutations((function(r){var n=t(e);ee(n.size),n.forEach((function(t){return r.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(E(t).keySeq())},e.intersect=function(t){return(t=C(t).toArray()).length?Fr.intersect.apply(e(t.pop()),t):$r()},e.union=function(t){return(t=C(t).toArray()).length?Fr.union.apply(e(t.pop()),t):$r()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Ur(this,this._map.set(t,t))},e.prototype.remove=function(t){return Ur(this,this._map.remove(t))},e.prototype.clear=function(){return Ur(this,this._map.clear())},e.prototype.map=function(t,e){var r=this,n=!1,i=Ur(this,this._map.mapEntries((function(i){var o=i[1],a=t.call(e,o,o,r);return a!==o&&(n=!0),[a,a]}),e));return n?i:this},e.prototype.union=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(r){for(var n=0;n<e.length;n++)"string"===typeof e[n]?r.add(e[n]):t(e[n]).forEach((function(t){return r.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var n=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&n.push(t)})),this.withMutations((function(t){n.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return ln(qt(this,t))},e.prototype.sortBy=function(t,e){return ln(qt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var r=this;return this._map.__iterate((function(e){return t(e,e,r)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(I);Nr.isSet=Dr;var zr,Fr=Nr.prototype;function Ur(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function qr(t,e){var r=Object.create(Fr);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function $r(){return zr||(zr=qr(Xe()))}Fr[Hr]=!0,Fr[n]=Fr.remove,Fr.merge=Fr.concat=Fr.union,Fr.withMutations=De,Fr.asImmutable=Le,Fr["@@transducer/init"]=Fr.asMutable=je,Fr["@@transducer/step"]=function(t,e){return t.add(e)},Fr["@@transducer/result"]=function(t){return t.asImmutable()},Fr.__empty=$r,Fr.__make=qr;var Wr,Kr=function(t){function e(t,r,n){if(!(this instanceof e))return new e(t,r,n);if(te(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<t&&(n=-n),this._start=t,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-t)/n-1)+1),0===this.size){if(Wr)return Wr;Wr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+p(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,r){return d(t,r,this.size)?this:(t=h(t,this.size),(r=g(r,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var r=e/this._step;if(r>=0&&r<this.size)return r}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==t(i,e?r-++o:o++,this);)i+=e?-n:n;return o},e.prototype.__iterator=function(t,e){var r=this.size,n=this._step,i=e?this._start+(r-1)*n:this._start,o=0;return new U((function(){if(o===r)return{value:void 0,done:!0};var a=i;return i+=e?-n:n,q(t,e?r-++o:o++,a)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Lr(this,t)},e}(Z);function Vr(t,e,r){for(var n=re(e),i=0;i!==n.length;)if((t=ue(t,n[i++],s))===s)return r;return t}function Yr(t,e){return Vr(this,t,e)}function Gr(t,e){return Vr(t,e,s)!==s}function Xr(){ee(this.size);var t={};return this.__iterate((function(e,r){t[r]=e})),t}C.isIterable=b,C.isKeyed=w,C.isIndexed=k,C.isAssociative=O,C.isOrdered=j,C.Iterator=U,Mr(C,{toArray:function(){ee(this.size);var t=new Array(this.size||0),e=w(this),r=0;return this.__iterate((function(n,i){t[r++]=e?[i,n]:n})),t},toIndexedSeq:function(){return new Ht(this)},toJS:function(){return Rr(this)},toKeyedSeq:function(){return new Bt(this,!0)},toMap:function(){return Re(this.toKeyedSeq())},toObject:Xr,toOrderedMap:function(){return Sr(this.toKeyedSeq())},toOrderedSet:function(){return ln(w(this)?this.valueSeq():this)},toSet:function(){return Nr(w(this)?this.valueSeq():this)},toSetSeq:function(){return new Dt(this)},toSeq:function(){return k(this)?this.toIndexedSeq():w(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ir(w(this)?this.valueSeq():this)},toList:function(){return ur(w(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Vt(this,function(t,e){var r=w(t),n=[t].concat(e).map((function(t){return b(t)?r&&(t=E(t)):t=r?at(t):st(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===n.length)return t;if(1===n.length){var i=n[0];if(i===t||r&&w(i)||k(t)&&k(i))return i}var o=new et(n);return r?o=o.toKeyedSeq():k(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=n.reduce((function(t,e){if(void 0!==t){var r=e.size;if(void 0!==r)return t+r}}),0),o}(this,t))},includes:function(t){return this.some((function(e){return dt(e,t)}))},entries:function(){return this.__iterator(R)},every:function(t,e){ee(this.size);var r=!0;return this.__iterate((function(n,i,o){if(!t.call(e,n,i,o))return r=!1,!1})),r},filter:function(t,e){return Vt(this,Nt(this,t,e,!0))},partition:function(t,e){return function(t,e,r){var n=w(t),i=[[],[]];t.__iterate((function(o,a){i[e.call(r,o,a,t)?1:0].push(n?[a,o]:o)}));var o=Gt(t);return i.map((function(e){return Vt(t,o(e))}))}(this,t,e)},find:function(t,e,r){var n=this.findEntry(t,e);return n?n[1]:r},forEach:function(t,e){return ee(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ee(this.size),t=void 0!==t?""+t:",";var e="",r=!0;return this.__iterate((function(n){r?r=!1:e+=t,e+=null!==n&&void 0!==n?n.toString():""})),e},keys:function(){return this.__iterator(L)},map:function(t,e){return Vt(this,Mt(this,t,e))},reduce:function(t,e,r){return en(this,t,e,r,arguments.length<2,!1)},reduceRight:function(t,e,r){return en(this,t,e,r,arguments.length<2,!0)},reverse:function(){return Vt(this,Rt(this,!0))},slice:function(t,e){return Vt(this,zt(this,t,e,!0))},some:function(t,e){ee(this.size);var r=!1;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=!0,!1})),r},sort:function(t){return Vt(this,qt(this,t))},values:function(){return this.__iterator(M)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return l(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,r){var n=Re().asMutable();return t.__iterate((function(i,o){n.update(e.call(r,i,o,t),0,(function(t){return t+1}))})),n.asImmutable()}(this,t,e)},equals:function(t){return Lr(this,t)},entrySeq:function(){var t=this;if(t._cache)return new et(t._cache);var e=t.toSeq().map(nn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(on(t),e)},findEntry:function(t,e,r){var n=r;return this.__iterate((function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1})),n},findKey:function(t,e){var r=this.findEntry(t,e);return r&&r[0]},findLast:function(t,e,r){return this.toKeyedSeq().reverse().find(t,e,r)},findLastEntry:function(t,e,r){return this.toKeyedSeq().reverse().findEntry(t,e,r)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(f,null,t)},flatMap:function(t,e){return Vt(this,function(t,e,r){var n=Gt(t);return t.toSeq().map((function(i,o){return n(e.call(r,i,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Vt(this,Ut(this,t,!0))},fromEntrySeq:function(){return new jt(this)},get:function(t,e){return this.find((function(e,r){return dt(r,t)}),void 0,e)},getIn:Yr,groupBy:function(t,e){return function(t,e,r){var n=w(t),i=(j(t)?Sr():Re()).asMutable();t.__iterate((function(o,a){i.update(e.call(r,o,a,t),(function(t){return(t=t||[]).push(n?[a,o]:o),t}))}));var o=Gt(t);return i.map((function(e){return Vt(t,o(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,s)!==s},hasIn:function(t){return Gr(this,t)},isSubset:function(t){return t="function"===typeof t.includes?t:C(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"===typeof t.isSubset?t:C(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return dt(e,t)}))},keySeq:function(){return this.toSeq().map(rn).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return $t(this,t)},maxBy:function(t,e){return $t(this,e,t)},min:function(t){return $t(this,t?an(t):un)},minBy:function(t,e){return $t(this,e?an(e):un,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Vt(this,Ft(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(on(t),e)},sortBy:function(t,e){return Vt(this,qt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Vt(this,function(t,e,r){var n=Xt(t);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return t.__iterate((function(t,i,s){return e.call(r,t,i,s)&&++a&&n(t,i,o)})),a},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var a=t.__iterator(R,i),s=!0;return new U((function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(r,c,u,o)?n===R?t:q(n,u,c,t):(s=!1,{value:void 0,done:!0})}))},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(on(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=j(t),r=w(t),n=e?1:0;return function(t,e){return e=ht(e,3432918353),e=ht(e<<15|e>>>-15,461845907),e=ht(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=ht(e^e>>>16,2246822507),e=ht(e^e>>>13,3266489909),e=gt(e^e>>>16),e}(t.__iterate(r?e?function(t,e){n=31*n+cn(_t(t),_t(e))|0}:function(t,e){n=n+cn(_t(t),_t(e))|0}:e?function(t){n=31*n+_t(t)|0}:function(t){n=n+_t(t)|0}),n)}(this))}});var Jr=C.prototype;Jr[m]=!0,Jr[F]=Jr.values,Jr.toJSON=Jr.toArray,Jr.__toStringMapper=ae,Jr.inspect=Jr.toSource=function(){return this.toString()},Jr.chain=Jr.flatMap,Jr.contains=Jr.includes,Mr(E,{flip:function(){return Vt(this,Lt(this))},mapEntries:function(t,e){var r=this,n=0;return Vt(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],n++,r)})).fromEntrySeq())},mapKeys:function(t,e){var r=this;return Vt(this,this.toSeq().flip().map((function(n,i){return t.call(e,n,i,r)})).flip())}});var Qr=E.prototype;Qr[v]=!0,Qr[F]=Jr.entries,Qr.toJSON=Xr,Qr.__toStringMapper=function(t,e){return ae(e)+": "+ae(t)},Mr(x,{toKeyedSeq:function(){return new Bt(this,!1)},filter:function(t,e){return Vt(this,Nt(this,t,e,!1))},findIndex:function(t,e){var r=this.findEntry(t,e);return r?r[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Vt(this,Rt(this,!1))},slice:function(t,e){return Vt(this,zt(this,t,e,!1))},splice:function(t,e){var r=arguments.length;if(e=Math.max(e||0,0),0===r||2===r&&!e)return this;t=h(t,t<0?this.count():this.size);var n=this.slice(0,t);return Vt(this,1===r?n:n.concat(Zt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var r=this.findLastEntry(t,e);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Vt(this,Ut(this,t,!1))},get:function(t,e){return(t=p(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,r){return r===t}),void 0,e)},has:function(t){return(t=p(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Vt(this,function(t,e){var r=Xt(t);return r.size=t.size&&2*t.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return t.__iterate((function(t){return(!o||!1!==r(e,o++,i))&&!1!==r(t,o++,i)}),n),o},r.__iteratorUncached=function(r,n){var i,o=t.__iterator(M,n),a=0;return new U((function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?q(r,a++,e):q(r,a++,i.value,i)}))},r}(this,t))},interleave:function(){var t=[this].concat(Zt(arguments)),e=Kt(this.toSeq(),Z.of,t),r=e.flatten(!0);return e.size&&(r.size=e.size*t.length),Vt(this,r)},keySeq:function(){return Kr(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Vt(this,Ft(this,t,e,!1))},zip:function(){return Vt(this,Kt(this,sn,[this].concat(Zt(arguments))))},zipAll:function(){return Vt(this,Kt(this,sn,[this].concat(Zt(arguments)),!0))},zipWith:function(t){var e=Zt(arguments);return e[0]=this,Vt(this,Kt(this,t,e))}});var Zr=x.prototype;Zr[S]=!0,Zr[D]=!0,Mr(I,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var tn=I.prototype;function en(t,e,r,n,i,o){return ee(t.size),t.__iterate((function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)}),o),r}function rn(t,e){return e}function nn(t,e){return[e,t]}function on(t){return function(){return!t.apply(this,arguments)}}function an(t){return function(){return-t.apply(this,arguments)}}function sn(){return Zt(arguments)}function un(t,e){return t<e?1:t>e?-1:0}function cn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}tn.has=Jr.includes,tn.contains=tn.includes,tn.keys=tn.values,Mr(Q,Qr),Mr(Z,Zr),Mr(tt,tn);var ln=function(t){function e(t){return void 0===t||null===t?hn():jr(t)?t:hn().withMutations((function(e){var r=I(t);ee(r.size),r.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(E(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Nr);ln.isOrderedSet=jr;var pn,fn=ln.prototype;function dn(t,e){var r=Object.create(fn);return r.size=t?t.size:0,r._map=t,r.__ownerID=e,r}function hn(){return pn||(pn=dn(Or()))}fn[D]=!0,fn.zip=Zr.zip,fn.zipWith=Zr.zipWith,fn.zipAll=Zr.zipAll,fn.__empty=hn,fn.__make=dn;var gn={LeftThenRight:-1,RightThenLeft:1};var yn=function(t,e){var r;!function(t){if(B(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(H(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!==typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var n=function(o){var a=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var s=Object.keys(t),u=i._indices={};i._name=e,i._keys=s,i._defaultValues=t;for(var c=0;c<s.length;c++){var l=s[c];u[l]=c,i[l]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+bn(this)+' with property "'+l+'" since that property name is part of the Record API.'):wn(i,l)}}return this.__ownerID=void 0,this._values=ur().withMutations((function(t){t.setSize(a._keys.length),E(o).forEach((function(e,r){t.set(a._indices[r],e===a._defaultValues[r]?void 0:e)}))})),this},i=n.prototype=Object.create(_n);return i.constructor=n,e&&(n.displayName=e),n};yn.prototype.toString=function(){for(var t,e=bn(this)+" { ",r=this._keys,n=0,i=r.length;n!==i;n++)e+=(n?", ":"")+(t=r[n])+": "+ae(this.get(t));return e+" }"},yn.prototype.equals=function(t){return this===t||B(t)&&vn(this).equals(vn(t))},yn.prototype.hashCode=function(){return vn(this).hashCode()},yn.prototype.has=function(t){return this._indices.hasOwnProperty(t)},yn.prototype.get=function(t,e){if(!this.has(t))return e;var r=this._indices[t],n=this._values.get(r);return void 0===n?this._defaultValues[t]:n},yn.prototype.set=function(t,e){if(this.has(t)){var r=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(r!==this._values&&!this.__ownerID)return mn(this,r)}return this},yn.prototype.remove=function(t){return this.set(t)},yn.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:mn(this,t)},yn.prototype.wasAltered=function(){return this._values.wasAltered()},yn.prototype.toSeq=function(){return vn(this)},yn.prototype.toJS=function(){return Rr(this)},yn.prototype.entries=function(){return this.__iterator(R)},yn.prototype.__iterator=function(t,e){return vn(this).__iterator(t,e)},yn.prototype.__iterate=function(t,e){return vn(this).__iterate(t,e)},yn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?mn(this,e,t):(this.__ownerID=t,this._values=e,this)},yn.isRecord=B,yn.getDescriptiveName=bn;var _n=yn.prototype;function mn(t,e,r){var n=Object.create(Object.getPrototypeOf(t));return n._values=e,n.__ownerID=r,n}function bn(t){return t.constructor.displayName||t.constructor.name||"Record"}function vn(t){return at(t._keys.map((function(e){return[e,t.get(e)]})))}function wn(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){te(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(r){}}_n[A]=!0,_n[n]=_n.remove,_n.deleteIn=_n.removeIn=_e,_n.getIn=Yr,_n.hasIn=Jr.hasIn,_n.merge=we,_n.mergeWith=Se,_n.mergeIn=Be,_n.mergeDeep=Te,_n.mergeDeepWith=Ae,_n.mergeDeepIn=He,_n.setIn=ge,_n.update=be,_n.updateIn=ve,_n.withMutations=De,_n.asMutable=je,_n.asImmutable=Le,_n[F]=_n.entries,_n.toJSON=_n.toObject=Jr.toObject,_n.inspect=_n.toSource=function(){return this.toString()};var Sn,kn=function(t){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this._value=t,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(Sn)return Sn;Sn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return dt(this._value,t)},e.prototype.slice=function(t,r){var n=this.size;return d(t,r,n)?this:new e(this._value,g(r,n)-h(t,n))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return dt(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return dt(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var r=this.size,n=0;n!==r&&!1!==t(this._value,e?r-++n:n++,this););return n},e.prototype.__iterator=function(t,e){var r=this,n=this.size,i=0;return new U((function(){return i===n?{value:void 0,done:!0}:q(t,e?n-++i:i++,r._value)}))},e.prototype.equals=function(t){return t instanceof e?dt(this._value,t._value):Lr(t)},e}(Z);function On(t,e){return Cn([],e||En,t,"",e&&e.length>2?[]:void 0,{"":t})}function Cn(t,e,r,n,i,o){if("string"!==typeof r&&!H(r)&&(X(r)||W(r)||ie(r))){if(~t.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");t.push(r),i&&""!==n&&i.push(n);var a=e.call(o,n,J(r).map((function(n,o){return Cn(t,e,n,o,i,r)})),i&&i.slice());return t.pop(),i&&i.pop(),a}return r}function En(t,e){return k(e)?e.toList():w(e)?e.toMap():e.toSet()}var xn="4.3.5",In=C;const Pn={version:xn,Collection:C,Iterable:C,Seq:J,Map:Re,OrderedMap:Sr,List:ur,Stack:Ir,Set:Nr,OrderedSet:ln,PairSorting:gn,Record:yn,Range:Kr,Repeat:kn,is:dt,fromJS:On,hash:_t,isImmutable:H,isCollection:b,isKeyed:w,isIndexed:k,isAssociative:O,isOrdered:j,isValueObject:ft,isPlainObject:ie,isSeq:T,isList:sr,isMap:lt,isOrderedMap:pt,isStack:xr,isSet:Dr,isOrderedSet:jr,isRecord:B,get:ue,getIn:Vr,has:se,hasIn:Gr,merge:Oe,mergeDeep:Ee,mergeWith:Ce,mergeDeepWith:xe,remove:le,removeIn:ye,set:pe,setIn:he,update:me,updateIn:fe}},281713:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(737258))},91569:(t,e)=>{"use strict";function r(t){const e=[];for(let r=0,n=t.length;r<n;++r){const n=t.charCodeAt(r);if(n<128)e.push(n);else if(n<2048)e.push(192|n>>6,128|63&n);else if(n<55296||n>=57344)e.push(224|n>>12,128|n>>6&63,128|63&n);else{let i=65536+((1023&n)<<10|1023&t.charCodeAt(++r));e.push(240|i>>18&7,128|i>>12&63,128|i>>6&63,128|63&i)}}return new Uint8Array(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.toUtf8_1=function(t){const e=[],r=new Array(4),n=[0,192,224,240],i=[127,63,63,63],o=[0,128,128,128];for(const a of t){const t=r,s=a.codePointAt(0),u=0-(-(4294967168&s)>>31)-(-(4294965248&s)>>31)-(-(4294901760&s)>>31),c=i[u],l=o[u];t[3]=l|s&c,t[2]=l|s>>>6&c,t[1]=l|s>>>12&c,t[0]=l|s>>>18&c;const p=3-u;t[p]|=n[u],Array.prototype.push.apply(e,t.slice(p))}return new Uint8Array(e)},e.toUtf8_2=function(t){const e=[];for(const r of t){const t=r.codePointAt(0);t<128?e.push(t):t<2048?e.push(192|t>>6&31,128|63&t):t<65536?e.push(224|t>>12&15,128|t>>6&63,128|63&t):e.push(240|t>>18&7,128|t>>12&63,128|t>>6&63,128|63&t)}return new Uint8Array(e)},e.toUtf8_3=r,e.toUtf8=r,e.default=e.toUtf8},737258:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(91569),i=2654435761,o=2246822519,a=3266489917,s=668265263,u=374761393;e.xxHash32=function(t,e=0){const r=t="string"===typeof t?n.default(t):t;let c=e+u&4294967295,l=0;if(r.length>=16){const r=[e+i+o&4294967295,e+o&4294967295,e+0&4294967295,e-i&4294967295],n=t,a=n.length-16;let s=0;for(l=0;(4294967280&l)<=a;l+=4){const t=l,e=n[t+0]+(n[t+1]<<8),a=n[t+2]+(n[t+3]<<8),u=e*o+(a*o<<16);let c=r[s]+u&4294967295;c=c<<13|c>>>19;const p=65535&c,f=c>>>16;r[s]=p*i+(f*i<<16)&4294967295,s=s+1&3}c=(r[0]<<1|r[0]>>>31)+(r[1]<<7|r[1]>>>25)+(r[2]<<12|r[2]>>>20)+(r[3]<<18|r[3]>>>14)&4294967295}c=c+t.length&4294967295;let p=t.length-4;for(;l<=p;l+=4){const t=l,e=r[t+0]+(r[t+1]<<8),n=r[t+2]+(r[t+3]<<8);c=c+(e*a+(n*a<<16))&4294967295,c=c<<17|c>>>15,c=(65535&c)*s+((c>>>16)*s<<16)&4294967295}for(;l<r.length;++l){c+=r[l]*u,c=c<<11|c>>>21,c=(65535&c)*i+((c>>>16)*i<<16)&4294967295}return c^=c>>>15,c=((65535&c)*o&4294967295)+((c>>>16)*o<<16),c^=c>>>13,c=((65535&c)*a&4294967295)+((c>>>16)*a<<16),c^=c>>>16,c<0?c+4294967296:c}},191484:function(t){t.exports=function(){"use strict";var t=Math.imul,e=Math.clz32;function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r,n=0;n<e.length;n++)(r=e[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(){return l=c()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&u(i,r.prototype),i},l.apply(null,arguments)}function p(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){function r(){return l(t,arguments,s(this).constructor)}if(null===t||!p(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof e){if(e.has(t))return e.get(t);e.set(t,r)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},f(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function g(t){var e=c();return function(){var r,n=s(t);if(e){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function y(t,e){return _(t)||m(t,e)||b(t,e)||w()}function _(t){if(Array.isArray(t))return t}function m(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}function b(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}var k=function(t){var e=Math.abs,i=Math.max,s=Math.floor;function u(t,e){var r;if(n(this,u),(r=c.call(this,t)).sign=e,Object.setPrototypeOf(d(r),u.prototype),t>u.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return r}a(u,t);var c=g(u);return o(u,[{key:"toDebugString",value:function(){var t,e=["BigInt["],r=S(this);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push((n?(n>>>0).toString(16):n)+", ")}}catch(t){r.e(t)}finally{r.f()}return e.push("]"),e.join("")}},{key:"toString",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>t||36<t)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(t&t-1)?u.__toStringBasePowerOfTwo(this,t):u.__toStringGeneric(this,t,!1)}},{key:"valueOf",value:function(){throw new Error("Convert JSBI instances to native numbers using `toNumber`.")}},{key:"__copy",value:function(){for(var t=new u(this.length,this.sign),e=0;e<this.length;e++)t[e]=this[e];return t}},{key:"__trim",value:function(){for(var t=this.length,e=this[t-1];0===e;)e=this[--t-1],this.pop();return 0===t&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var t=0;t<this.length;t++)this[t]=0}},{key:"__clzmsd",value:function(){return u.__clz30(this.__digit(this.length-1))}},{key:"__inplaceMultiplyAdd",value:function(t,e,r){r>this.length&&(r=this.length);for(var n=32767&t,i=t>>>15,o=0,a=e,s=0;s<r;s++){var c=this.__digit(s),l=32767&c,p=c>>>15,f=u.__imul(l,n),d=u.__imul(l,i),h=u.__imul(p,n),g=a+f+o;o=g>>>30,g&=1073741823,o+=(g+=((32767&d)<<15)+((32767&h)<<15))>>>30,a=u.__imul(p,i)+(d>>>15)+(h>>>15),this.__setDigit(s,1073741823&g)}if(0!==o||0!==a)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(t,e,r){for(var n,i=0,o=0;o<r;o++)i=(n=this.__halfDigit(e+o)+t.__halfDigit(o)+i)>>>15,this.__setHalfDigit(e+o,32767&n);return i}},{key:"__inplaceSub",value:function(t,e,r){var n=0;if(1&e){e>>=1;for(var i=this.__digit(e),o=32767&i,a=0;a<r-1>>>1;a++){var s=t.__digit(a),u=(i>>>15)-(32767&s)-n;n=1&u>>>15,this.__setDigit(e+a,(32767&u)<<15|32767&o),n=1&(o=(32767&(i=this.__digit(e+a+1)))-(s>>>15)-n)>>>15}var c=t.__digit(a),l=(i>>>15)-(32767&c)-n;if(n=1&l>>>15,this.__setDigit(e+a,(32767&l)<<15|32767&o),e+a+1>=this.length)throw new RangeError("out of bounds");0==(1&r)&&(n=1&(o=(32767&(i=this.__digit(e+a+1)))-(c>>>15)-n)>>>15,this.__setDigit(e+t.length,1073709056&i|32767&o))}else{e>>=1;for(var p=0;p<t.length-1;p++){var f=this.__digit(e+p),d=t.__digit(p),h=(32767&f)-(32767&d)-n,g=(f>>>15)-(d>>>15)-(n=1&h>>>15);n=1&g>>>15,this.__setDigit(e+p,(32767&g)<<15|32767&h)}var y=this.__digit(e+p),_=t.__digit(p),m=(32767&y)-(32767&_)-n;n=1&m>>>15;var b=0;0==(1&r)&&(n=1&(b=(y>>>15)-(_>>>15)-n)>>>15),this.__setDigit(e+p,(32767&b)<<15|32767&m)}return n}},{key:"__inplaceRightShift",value:function(t){if(0!==t){for(var e,r=this.__digit(0)>>>t,n=this.length-1,i=0;i<n;i++)e=this.__digit(i+1),this.__setDigit(i,1073741823&e<<30-t|r),r=e>>>t;this.__setDigit(n,r)}}},{key:"__digit",value:function(t){return this[t]}},{key:"__unsignedDigit",value:function(t){return this[t]>>>0}},{key:"__setDigit",value:function(t,e){this[t]=0|e}},{key:"__setDigitGrow",value:function(t,e){this[t]=0|e}},{key:"__halfDigitLength",value:function(){var t=this.length;return 32767>=this.__unsignedDigit(t-1)?2*t-1:2*t}},{key:"__halfDigit",value:function(t){return 32767&this[t>>>1]>>>15*(1&t)}},{key:"__setHalfDigit",value:function(t,e){var r=t>>>1,n=this.__digit(r),i=1&t?32767&n|e<<15:1073709056&n|32767&e;this.__setDigit(r,i)}}],[{key:"BigInt",value:function(t){var e=Number.isFinite;if("number"==typeof t){if(0===t)return u.__zero();if(u.__isOneDigitInt(t))return 0>t?u.__oneDigit(-t,!0):u.__oneDigit(t,!1);if(!e(t)||s(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return u.__fromDouble(t)}if("string"==typeof t){var n=u.__fromString(t);if(null===n)throw new SyntaxError("Cannot convert "+t+" to a BigInt");return n}if("boolean"==typeof t)return!0===t?u.__oneDigit(1,!1):u.__zero();if("object"===r(t)){if(t.constructor===u)return t;var i=u.__toPrimitive(t);return u.BigInt(i)}throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(t){var e=t.length;if(0===e)return 0;if(1===e){var r=t.__unsignedDigit(0);return t.sign?-r:r}var n=t.__digit(e-1),i=u.__clz30(n),o=30*e-i;if(1024<o)return t.sign?-1/0:1/0;var a=o-1,s=n,c=e-1,l=i+3,p=32===l?0:s<<l;p>>>=12;var f=l-12,d=12<=l?0:s<<20+l,h=20+l;for(0<f&&0<c&&(c--,p|=(s=t.__digit(c))>>>30-f,d=s<<f+2,h=f+2);0<h&&0<c;)c--,s=t.__digit(c),d|=30<=h?s<<h-30:s>>>30-h,h-=30;var g=u.__decideRounding(t,h,c,s);if((1===g||0===g&&1==(1&d))&&0===(d=d+1>>>0)&&0!=++p>>>20&&(p=0,1023<++a))return t.sign?-1/0:1/0;var y=t.sign?-2147483648:0;return a=a+1023<<20,u.__kBitConversionInts[1]=y|a|p,u.__kBitConversionInts[0]=d,u.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(t){if(0===t.length)return t;var e=t.__copy();return e.sign=!t.sign,e}},{key:"bitwiseNot",value:function(t){return t.sign?u.__absoluteSubOne(t).__trim():u.__absoluteAddOne(t,!0)}},{key:"exponentiate",value:function(t,e){if(e.sign)throw new RangeError("Exponent must be positive");if(0===e.length)return u.__oneDigit(1,!1);if(0===t.length)return t;if(1===t.length&&1===t.__digit(0))return t.sign&&0==(1&e.__digit(0))?u.unaryMinus(t):t;if(1<e.length)throw new RangeError("BigInt too big");var r=e.__unsignedDigit(0);if(1===r)return t;if(r>=u.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===t.length&&2===t.__digit(0)){var n=1+(0|r/30),i=new u(n,t.sign&&0!=(1&r));i.__initializeDigits();var o=1<<r%30;return i.__setDigit(n-1,o),i}var a=null,s=t;for(0!=(1&r)&&(a=t),r>>=1;0!==r;r>>=1)s=u.multiply(s,s),0!=(1&r)&&(a=null===a?s:u.multiply(a,s));return a}},{key:"multiply",value:function(t,e){if(0===t.length)return t;if(0===e.length)return e;var r=t.length+e.length;30<=t.__clzmsd()+e.__clzmsd()&&r--;var n=new u(r,t.sign!==e.sign);n.__initializeDigits();for(var i=0;i<t.length;i++)u.__multiplyAccumulate(e,t.__digit(i),n,i);return n.__trim()}},{key:"divide",value:function(t,e){if(0===e.length)throw new RangeError("Division by zero");if(0>u.__absoluteCompare(t,e))return u.__zero();var r,n=t.sign!==e.sign,i=e.__unsignedDigit(0);if(1===e.length&&32767>=i){if(1===i)return n===t.sign?t:u.unaryMinus(t);r=u.__absoluteDivSmall(t,i,null)}else r=u.__absoluteDivLarge(t,e,!0,!1);return r.sign=n,r.__trim()}},{key:"remainder",value:function(t,e){if(0===e.length)throw new RangeError("Division by zero");if(0>u.__absoluteCompare(t,e))return t;var r=e.__unsignedDigit(0);if(1===e.length&&32767>=r){if(1===r)return u.__zero();var n=u.__absoluteModSmall(t,r);return 0===n?u.__zero():u.__oneDigit(n,t.sign)}var i=u.__absoluteDivLarge(t,e,!1,!0);return i.sign=t.sign,i.__trim()}},{key:"add",value:function(t,e){var r=t.sign;return r===e.sign?u.__absoluteAdd(t,e,r):0<=u.__absoluteCompare(t,e)?u.__absoluteSub(t,e,r):u.__absoluteSub(e,t,!r)}},{key:"subtract",value:function(t,e){var r=t.sign;return r===e.sign?0<=u.__absoluteCompare(t,e)?u.__absoluteSub(t,e,r):u.__absoluteSub(e,t,!r):u.__absoluteAdd(t,e,r)}},{key:"leftShift",value:function(t,e){return 0===e.length||0===t.length?t:e.sign?u.__rightShiftByAbsolute(t,e):u.__leftShiftByAbsolute(t,e)}},{key:"signedRightShift",value:function(t,e){return 0===e.length||0===t.length?t:e.sign?u.__leftShiftByAbsolute(t,e):u.__rightShiftByAbsolute(t,e)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(t,e){return 0>u.__compareToBigInt(t,e)}},{key:"lessThanOrEqual",value:function(t,e){return 0>=u.__compareToBigInt(t,e)}},{key:"greaterThan",value:function(t,e){return 0<u.__compareToBigInt(t,e)}},{key:"greaterThanOrEqual",value:function(t,e){return 0<=u.__compareToBigInt(t,e)}},{key:"equal",value:function(t,e){if(t.sign!==e.sign)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t.__digit(r)!==e.__digit(r))return!1;return!0}},{key:"notEqual",value:function(t,e){return!u.equal(t,e)}},{key:"bitwiseAnd",value:function(t,e){if(!t.sign&&!e.sign)return u.__absoluteAnd(t,e).__trim();if(t.sign&&e.sign){var r=i(t.length,e.length)+1,n=u.__absoluteSubOne(t,r),o=u.__absoluteSubOne(e);return n=u.__absoluteOr(n,o,n),u.__absoluteAddOne(n,!0,n).__trim()}if(t.sign){var a=[e,t];t=a[0],e=a[1]}return u.__absoluteAndNot(t,u.__absoluteSubOne(e)).__trim()}},{key:"bitwiseXor",value:function(t,e){if(!t.sign&&!e.sign)return u.__absoluteXor(t,e).__trim();if(t.sign&&e.sign){var r=i(t.length,e.length),n=u.__absoluteSubOne(t,r),o=u.__absoluteSubOne(e);return u.__absoluteXor(n,o,n).__trim()}var a=i(t.length,e.length)+1;if(t.sign){var s=[e,t];t=s[0],e=s[1]}var c=u.__absoluteSubOne(e,a);return c=u.__absoluteXor(c,t,c),u.__absoluteAddOne(c,!0,c).__trim()}},{key:"bitwiseOr",value:function(t,e){var r=i(t.length,e.length);if(!t.sign&&!e.sign)return u.__absoluteOr(t,e).__trim();if(t.sign&&e.sign){var n=u.__absoluteSubOne(t,r),o=u.__absoluteSubOne(e);return n=u.__absoluteAnd(n,o,n),u.__absoluteAddOne(n,!0,n).__trim()}if(t.sign){var a=[e,t];t=a[0],e=a[1]}var s=u.__absoluteSubOne(e,r);return s=u.__absoluteAndNot(s,t,s),u.__absoluteAddOne(s,!0,s).__trim()}},{key:"asIntN",value:function(t,e){if(0===e.length)return e;if(0>(t=s(t)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return u.__zero();if(t>=u.__kMaxLengthBits)return e;var r=0|(t+29)/30;if(e.length<r)return e;var n=e.__unsignedDigit(r-1),i=1<<(t-1)%30;if(e.length===r&&n<i)return e;if((n&i)!==i)return u.__truncateToNBits(t,e);if(!e.sign)return u.__truncateAndSubFromPowerOfTwo(t,e,!0);if(0==(n&i-1)){for(var o=r-2;0<=o;o--)if(0!==e.__digit(o))return u.__truncateAndSubFromPowerOfTwo(t,e,!1);return e.length===r&&n===i?e:u.__truncateToNBits(t,e)}return u.__truncateAndSubFromPowerOfTwo(t,e,!1)}},{key:"asUintN",value:function(t,e){if(0===e.length)return e;if(0>(t=s(t)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===t)return u.__zero();if(e.sign){if(t>u.__kMaxLengthBits)throw new RangeError("BigInt too big");return u.__truncateAndSubFromPowerOfTwo(t,e,!1)}if(t>=u.__kMaxLengthBits)return e;var r=0|(t+29)/30;if(e.length<r)return e;var n=t%30;if(e.length==r){if(0===n)return e;if(0==e.__digit(r-1)>>>n)return e}return u.__truncateToNBits(t,e)}},{key:"ADD",value:function(t,e){if(t=u.__toPrimitive(t),e=u.__toPrimitive(e),"string"==typeof t)return"string"!=typeof e&&(e=e.toString()),t+e;if("string"==typeof e)return t.toString()+e;if(t=u.__toNumeric(t),e=u.__toNumeric(e),u.__isBigInt(t)&&u.__isBigInt(e))return u.add(t,e);if("number"==typeof t&&"number"==typeof e)return t+e;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(t,e){return u.__compare(t,e,0)}},{key:"LE",value:function(t,e){return u.__compare(t,e,1)}},{key:"GT",value:function(t,e){return u.__compare(t,e,2)}},{key:"GE",value:function(t,e){return u.__compare(t,e,3)}},{key:"EQ",value:function(t,e){for(;;){if(u.__isBigInt(t))return u.__isBigInt(e)?u.equal(t,e):u.EQ(e,t);if("number"==typeof t){if(u.__isBigInt(e))return u.__equalToNumber(e,t);if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else if("string"==typeof t){if(u.__isBigInt(e))return null!==(t=u.__fromString(t))&&u.equal(t,e);if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else if("boolean"==typeof t){if(u.__isBigInt(e))return u.__equalToNumber(e,+t);if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else if("symbol"===r(t)){if(u.__isBigInt(e))return!1;if("object"!==r(e))return t==e;e=u.__toPrimitive(e)}else{if("object"!==r(t))return t==e;if("object"===r(e)&&e.constructor!==u)return t==e;t=u.__toPrimitive(t)}}}},{key:"NE",value:function(t,e){return!u.EQ(t,e)}},{key:"DataViewGetBigInt64",value:function(t,e){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return u.asIntN(64,u.DataViewGetBigUint64(t,e,r))}},{key:"DataViewGetBigUint64",value:function(t,e){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=y(r?[4,0]:[0,4],2),i=n[0],o=n[1],a=t.getUint32(e+i,r),s=t.getUint32(e+o,r),c=new u(3,!1);return c.__setDigit(0,1073741823&s),c.__setDigit(1,(268435455&a)<<2|s>>>30),c.__setDigit(2,a>>>28),c.__trim()}},{key:"DataViewSetBigInt64",value:function(t,e,r){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];u.DataViewSetBigUint64(t,e,r,n)}},{key:"DataViewSetBigUint64",value:function(t,e,r){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],i=0,o=0;if(0<(r=u.asUintN(64,r)).length&&(o=r.__digit(0),1<r.length)){var a=r.__digit(1);o|=a<<30,i=a>>>2,2<r.length&&(i|=r.__digit(2)<<28)}var s=y(n?[4,0]:[0,4],2),c=s[0],l=s[1];t.setUint32(e+c,i,n),t.setUint32(e+l,o,n)}},{key:"__zero",value:function(){return new u(0,!1)}},{key:"__oneDigit",value:function(t,e){var r=new u(1,e);return r.__setDigit(0,t),r}},{key:"__decideRounding",value:function(t,e,r,n){if(0<e)return-1;var i;if(0>e)i=-e-1;else{if(0===r)return-1;r--,n=t.__digit(r),i=29}var o=1<<i;if(0==(n&o))return-1;if(0!=(n&(o-=1)))return 1;for(;0<r;)if(r--,0!==t.__digit(r))return 1;return 0}},{key:"__fromDouble",value:function(t){u.__kBitConversionDouble[0]=t;var e,r=(2047&u.__kBitConversionInts[1]>>>20)-1023,n=1+(0|r/30),i=new u(n,0>t),o=1048575&u.__kBitConversionInts[1]|1048576,a=u.__kBitConversionInts[0],s=20,c=r%30,l=0;if(c<s){var p=s-c;l=p+32,e=o>>>p,o=o<<32-p|a>>>p,a<<=32-p}else if(c===s)l=32,e=o,o=a,a=0;else{var f=c-s;l=32-f,e=o<<f|a>>>32-f,o=a<<f,a=0}i.__setDigit(n-1,e);for(var d=n-2;0<=d;d--)0<l?(l-=30,e=o>>>2,o=o<<30|a>>>2,a<<=30):e=0,i.__setDigit(d,e);return i.__trim()}},{key:"__isWhitespace",value:function(t){return!!(13>=t&&9<=t)||(159>=t?32==t:131071>=t?160==t||5760==t:196607>=t?10>=(t&=131071)||40==t||41==t||47==t||95==t||4096==t:65279==t)}},{key:"__fromString",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=0,n=t.length,i=0;if(i===n)return u.__zero();for(var o=t.charCodeAt(i);u.__isWhitespace(o);){if(++i===n)return u.__zero();o=t.charCodeAt(i)}if(43===o){if(++i===n)return null;o=t.charCodeAt(i),r=1}else if(45===o){if(++i===n)return null;o=t.charCodeAt(i),r=-1}if(0===e){if(e=10,48===o){if(++i===n)return u.__zero();if(88===(o=t.charCodeAt(i))||120===o){if(e=16,++i===n)return null;o=t.charCodeAt(i)}else if(79===o||111===o){if(e=8,++i===n)return null;o=t.charCodeAt(i)}else if(66===o||98===o){if(e=2,++i===n)return null;o=t.charCodeAt(i)}}}else if(16===e&&48===o){if(++i===n)return u.__zero();if(88===(o=t.charCodeAt(i))||120===o){if(++i===n)return null;o=t.charCodeAt(i)}}if(0!==r&&10!==e)return null;for(;48===o;){if(++i===n)return u.__zero();o=t.charCodeAt(i)}var a=n-i,s=u.__kMaxBitsPerChar[e],c=u.__kBitsPerCharTableMultiplier-1;if(a>1073741824/s)return null;var l=new u(0|(29+(s*a+c>>>u.__kBitsPerCharTableShift))/30,!1),p=10>e?e:10,f=10<e?e-10:0;if(0==(e&e-1)){s>>=u.__kBitsPerCharTableShift;var d=[],h=[],g=!1;do{for(var y,_=0,m=0;;){if(y=void 0,o-48>>>0<p)y=o-48;else{if(!((32|o)-97>>>0<f)){g=!0;break}y=(32|o)-87}if(m+=s,_=_<<s|y,++i===n){g=!0;break}if(o=t.charCodeAt(i),30<m+s)break}d.push(_),h.push(m)}while(!g);u.__fillFromParts(l,d,h)}else{l.__initializeDigits();var b=!1,v=0;do{for(var w,S=0,k=1;;){if(w=void 0,o-48>>>0<p)w=o-48;else{if(!((32|o)-97>>>0<f)){b=!0;break}w=(32|o)-87}var O=k*e;if(1073741823<O)break;if(k=O,S=S*e+w,v++,++i===n){b=!0;break}o=t.charCodeAt(i)}var C=0|(s*v+(c=30*u.__kBitsPerCharTableMultiplier-1)>>>u.__kBitsPerCharTableShift)/30;l.__inplaceMultiplyAdd(k,S,C)}while(!b)}if(i!==n){if(!u.__isWhitespace(o))return null;for(i++;i<n;i++)if(o=t.charCodeAt(i),!u.__isWhitespace(o))return null}return l.sign=-1===r,l.__trim()}},{key:"__fillFromParts",value:function(t,e,r){for(var n=0,i=0,o=0,a=e.length-1;0<=a;a--){var s=e[a],u=r[a];i|=s<<o,30===(o+=u)?(t.__setDigit(n++,i),o=0,i=0):30<o&&(t.__setDigit(n++,1073741823&i),i=s>>>u-(o-=30))}if(0!==i){if(n>=t.length)throw new Error("implementation bug");t.__setDigit(n++,i)}for(;n<t.length;n++)t.__setDigit(n,0)}},{key:"__toStringBasePowerOfTwo",value:function(t,e){var r=t.length,n=e-1,i=n=(15&(n=(51&(n=(85&n>>>1)+(85&n))>>>2)+(51&n))>>>4)+(15&n),o=e-1,a=t.__digit(r-1),s=0|(30*r-u.__clz30(a)+i-1)/i;if(t.sign&&s++,268435456<s)throw new Error("string too long");for(var c=Array(s),l=s-1,p=0,f=0,d=0;d<r-1;d++){var h=t.__digit(d),g=(p|h<<f)&o;c[l--]=u.__kConversionChars[g];var y=i-f;for(p=h>>>y,f=30-y;f>=i;)c[l--]=u.__kConversionChars[p&o],p>>>=i,f-=i}var _=(p|a<<f)&o;for(c[l--]=u.__kConversionChars[_],p=a>>>i-f;0!==p;)c[l--]=u.__kConversionChars[p&o],p>>>=i;if(t.sign&&(c[l--]="-"),-1!==l)throw new Error("implementation bug");return c.join("")}},{key:"__toStringGeneric",value:function(t,e,r){var n=t.length;if(0===n)return"";if(1===n){var i=t.__unsignedDigit(0).toString(e);return!1===r&&t.sign&&(i="-"+i),i}var o,a,s=30*n-u.__clz30(t.__digit(n-1)),c=u.__kMaxBitsPerChar[e]-1,l=s*u.__kBitsPerCharTableMultiplier,p=1+(l=0|(l+=c-1)/c)>>1,f=u.exponentiate(u.__oneDigit(e,!1),u.__oneDigit(p,!1)),d=f.__unsignedDigit(0);if(1===f.length&&32767>=d){(o=new u(t.length,!1)).__initializeDigits();for(var h,g=0,y=2*t.length-1;0<=y;y--)h=g<<15|t.__halfDigit(y),o.__setHalfDigit(y,0|h/d),g=0|h%d;a=g.toString(e)}else{var _=u.__absoluteDivLarge(t,f,!0,!0);o=_.quotient;var m=_.remainder.__trim();a=u.__toStringGeneric(m,e,!0)}o.__trim();for(var b=u.__toStringGeneric(o,e,!0);a.length<p;)a="0"+a;return!1===r&&t.sign&&(b="-"+b),b+a}},{key:"__unequalSign",value:function(t){return t?-1:1}},{key:"__absoluteGreater",value:function(t){return t?-1:1}},{key:"__absoluteLess",value:function(t){return t?1:-1}},{key:"__compareToBigInt",value:function(t,e){var r=t.sign;if(r!==e.sign)return u.__unequalSign(r);var n=u.__absoluteCompare(t,e);return 0<n?u.__absoluteGreater(r):0>n?u.__absoluteLess(r):0}},{key:"__compareToNumber",value:function(t,r){if(u.__isOneDigitInt(r)){var n=t.sign,i=0>r;if(n!==i)return u.__unequalSign(n);if(0===t.length){if(i)throw new Error("implementation bug");return 0===r?0:-1}if(1<t.length)return u.__absoluteGreater(n);var o=e(r),a=t.__unsignedDigit(0);return a>o?u.__absoluteGreater(n):a<o?u.__absoluteLess(n):0}return u.__compareToDouble(t,r)}},{key:"__compareToDouble",value:function(t,e){if(e!==e)return e;if(e===1/0)return-1;if(e===-1/0)return 1;var r=t.sign;if(r!==0>e)return u.__unequalSign(r);if(0===e)throw new Error("implementation bug: should be handled elsewhere");if(0===t.length)return-1;u.__kBitConversionDouble[0]=e;var n=2047&u.__kBitConversionInts[1]>>>20;if(2047==n)throw new Error("implementation bug: handled elsewhere");var i=n-1023;if(0>i)return u.__absoluteGreater(r);var o=t.length,a=t.__digit(o-1),s=u.__clz30(a),c=30*o-s,l=i+1;if(c<l)return u.__absoluteLess(r);if(c>l)return u.__absoluteGreater(r);var p=1048576|1048575&u.__kBitConversionInts[1],f=u.__kBitConversionInts[0],d=20,h=29-s;if(h!==(0|(c-1)%30))throw new Error("implementation bug");var g,y=0;if(h<d){var _=d-h;y=_+32,g=p>>>_,p=p<<32-_|f>>>_,f<<=32-_}else if(h===d)y=32,g=p,p=f,f=0;else{var m=h-d;y=32-m,g=p<<m|f>>>32-m,p=f<<m,f=0}if((a>>>=0)>(g>>>=0))return u.__absoluteGreater(r);if(a<g)return u.__absoluteLess(r);for(var b=o-2;0<=b;b--){0<y?(y-=30,g=p>>>2,p=p<<30|f>>>2,f<<=30):g=0;var v=t.__unsignedDigit(b);if(v>g)return u.__absoluteGreater(r);if(v<g)return u.__absoluteLess(r)}if(0!==p||0!==f){if(0===y)throw new Error("implementation bug");return u.__absoluteLess(r)}return 0}},{key:"__equalToNumber",value:function(t,r){return u.__isOneDigitInt(r)?0===r?0===t.length:1===t.length&&t.sign===0>r&&t.__unsignedDigit(0)===e(r):0===u.__compareToDouble(t,r)}},{key:"__comparisonResultToBool",value:function(t,e){return 0===e?0>t:1===e?0>=t:2===e?0<t:3===e?0<=t:void 0}},{key:"__compare",value:function(t,e,r){if(t=u.__toPrimitive(t),e=u.__toPrimitive(e),"string"==typeof t&&"string"==typeof e)switch(r){case 0:return t<e;case 1:return t<=e;case 2:return t>e;case 3:return t>=e}if(u.__isBigInt(t)&&"string"==typeof e)return null!==(e=u.__fromString(e))&&u.__comparisonResultToBool(u.__compareToBigInt(t,e),r);if("string"==typeof t&&u.__isBigInt(e))return null!==(t=u.__fromString(t))&&u.__comparisonResultToBool(u.__compareToBigInt(t,e),r);if(t=u.__toNumeric(t),e=u.__toNumeric(e),u.__isBigInt(t)){if(u.__isBigInt(e))return u.__comparisonResultToBool(u.__compareToBigInt(t,e),r);if("number"!=typeof e)throw new Error("implementation bug");return u.__comparisonResultToBool(u.__compareToNumber(t,e),r)}if("number"!=typeof t)throw new Error("implementation bug");if(u.__isBigInt(e))return u.__comparisonResultToBool(u.__compareToNumber(e,t),2^r);if("number"!=typeof e)throw new Error("implementation bug");return 0===r?t<e:1===r?t<=e:2===r?t>e:3===r?t>=e:void 0}},{key:"__absoluteAdd",value:function(t,e,r){if(t.length<e.length)return u.__absoluteAdd(e,t,r);if(0===t.length)return t;if(0===e.length)return t.sign===r?t:u.unaryMinus(t);var n=t.length;(0===t.__clzmsd()||e.length===t.length&&0===e.__clzmsd())&&n++;for(var i,o=new u(n,r),a=0,s=0;s<e.length;s++)a=(i=t.__digit(s)+e.__digit(s)+a)>>>30,o.__setDigit(s,1073741823&i);for(;s<t.length;s++){var c=t.__digit(s)+a;a=c>>>30,o.__setDigit(s,1073741823&c)}return s<o.length&&o.__setDigit(s,a),o.__trim()}},{key:"__absoluteSub",value:function(t,e,r){if(0===t.length)return t;if(0===e.length)return t.sign===r?t:u.unaryMinus(t);for(var n,i=new u(t.length,r),o=0,a=0;a<e.length;a++)o=1&(n=t.__digit(a)-e.__digit(a)-o)>>>30,i.__setDigit(a,1073741823&n);for(;a<t.length;a++){var s=t.__digit(a)-o;o=1&s>>>30,i.__setDigit(a,1073741823&s)}return i.__trim()}},{key:"__absoluteAddOne",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length;null===r?r=new u(n,e):r.sign=e;for(var i,o=1,a=0;a<n;a++)o=(i=t.__digit(a)+o)>>>30,r.__setDigit(a,1073741823&i);return 0!==o&&r.__setDigitGrow(n,1),r}},{key:"__absoluteSubOne",value:function(t,e){for(var r,n=t.length,i=new u(e=e||n,!1),o=1,a=0;a<n;a++)o=1&(r=t.__digit(a)-o)>>>30,i.__setDigit(a,1073741823&r);if(0!==o)throw new Error("implementation bug");for(var s=n;s<e;s++)i.__setDigit(s,0);return i}},{key:"__absoluteAnd",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;if(n<i){o=n;var a=t,s=n;t=e,n=i,e=a,i=s}var c=o;null===r?r=new u(c,!1):c=r.length;for(var l=0;l<o;l++)r.__setDigit(l,t.__digit(l)&e.__digit(l));for(;l<c;l++)r.__setDigit(l,0);return r}},{key:"__absoluteAndNot",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;n<i&&(o=n);var a=n;null===r?r=new u(a,!1):a=r.length;for(var s=0;s<o;s++)r.__setDigit(s,t.__digit(s)&~e.__digit(s));for(;s<n;s++)r.__setDigit(s,t.__digit(s));for(;s<a;s++)r.__setDigit(s,0);return r}},{key:"__absoluteOr",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;if(n<i){o=n;var a=t,s=n;t=e,n=i,e=a,i=s}var c=n;null===r?r=new u(c,!1):c=r.length;for(var l=0;l<o;l++)r.__setDigit(l,t.__digit(l)|e.__digit(l));for(;l<n;l++)r.__setDigit(l,t.__digit(l));for(;l<c;l++)r.__setDigit(l,0);return r}},{key:"__absoluteXor",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.length,i=e.length,o=i;if(n<i){o=n;var a=t,s=n;t=e,n=i,e=a,i=s}var c=n;null===r?r=new u(c,!1):c=r.length;for(var l=0;l<o;l++)r.__setDigit(l,t.__digit(l)^e.__digit(l));for(;l<n;l++)r.__setDigit(l,t.__digit(l));for(;l<c;l++)r.__setDigit(l,0);return r}},{key:"__absoluteCompare",value:function(t,e){var r=t.length-e.length;if(0!=r)return r;for(var n=t.length-1;0<=n&&t.__digit(n)===e.__digit(n);)n--;return 0>n?0:t.__unsignedDigit(n)>e.__unsignedDigit(n)?1:-1}},{key:"__multiplyAccumulate",value:function(t,e,r,n){if(0!==e){for(var i=32767&e,o=e>>>15,a=0,s=0,c=0;c<t.length;c++,n++){var l=r.__digit(n),p=t.__digit(c),f=32767&p,d=p>>>15,h=u.__imul(f,i),g=u.__imul(f,o),y=u.__imul(d,i);a=(l+=s+h+a)>>>30,l&=1073741823,a+=(l+=((32767&g)<<15)+((32767&y)<<15))>>>30,s=u.__imul(d,o)+(g>>>15)+(y>>>15),r.__setDigit(n,1073741823&l)}for(;0!==a||0!==s;n++){var _=r.__digit(n);_+=a+s,s=0,a=_>>>30,r.__setDigit(n,1073741823&_)}}}},{key:"__internalMultiplyAdd",value:function(t,e,r,n,i){for(var o=r,a=0,s=0;s<n;s++){var c=t.__digit(s),l=u.__imul(32767&c,e),p=u.__imul(c>>>15,e),f=l+((32767&p)<<15)+a+o;o=f>>>30,a=p>>>15,i.__setDigit(s,1073741823&f)}if(i.length>n)for(i.__setDigit(n++,o+a);n<i.length;)i.__setDigit(n++,0);else if(0!==o+a)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r=new u(t.length,!1));for(var n=0,i=2*t.length-1;0<=i;i-=2){var o=(n<<15|t.__halfDigit(i))>>>0,a=0|o/e,s=0|(o=((n=0|o%e)<<15|t.__halfDigit(i-1))>>>0)/e;n=0|o%e,r.__setDigit(i>>>1,a<<15|s)}return r}},{key:"__absoluteModSmall",value:function(t,e){for(var r=0,n=2*t.length-1;0<=n;n--)r=0|((r<<15|t.__halfDigit(n))>>>0)%e;return r}},{key:"__absoluteDivLarge",value:function(t,e,r,n){var i=e.__halfDigitLength(),o=e.length,a=t.__halfDigitLength()-i,s=null;r&&(s=new u(a+2>>>1,!1)).__initializeDigits();var c=new u(i+2>>>1,!1);c.__initializeDigits();var l=u.__clz15(e.__halfDigit(i-1));0<l&&(e=u.__specialLeftShift(e,l,0));for(var p=u.__specialLeftShift(t,l,1),f=e.__halfDigit(i-1),d=0,h=a;0<=h;h--){var g=32767,y=p.__halfDigit(h+i);if(y!==f){var _=(y<<15|p.__halfDigit(h+i-1))>>>0;g=0|_/f;for(var m=0|_%f,b=e.__halfDigit(i-2),v=p.__halfDigit(h+i-2);u.__imul(g,b)>>>0>(m<<16|v)>>>0&&(g--,!(32767<(m+=f))););}u.__internalMultiplyAdd(e,g,0,o,c);var w=p.__inplaceSub(c,h,i+1);0!==w&&(w=p.__inplaceAdd(e,h,i),p.__setHalfDigit(h+i,32767&p.__halfDigit(h+i)+w),g--),r&&(1&h?d=g<<15:s.__setDigit(h>>>1,d|g))}if(n)return p.__inplaceRightShift(l),r?{quotient:s,remainder:p}:p;if(r)return s;throw new Error("unreachable")}},{key:"__clz15",value:function(t){return u.__clz30(t)-15}},{key:"__specialLeftShift",value:function(t,e,r){var n=t.length,i=new u(n+r,!1);if(0===e){for(var o=0;o<n;o++)i.__setDigit(o,t.__digit(o));return 0<r&&i.__setDigit(n,0),i}for(var a,s=0,c=0;c<n;c++)a=t.__digit(c),i.__setDigit(c,1073741823&a<<e|s),s=a>>>30-e;return 0<r&&i.__setDigit(n,s),i}},{key:"__leftShiftByAbsolute",value:function(t,e){var r=u.__toShiftAmount(e);if(0>r)throw new RangeError("BigInt too big");var n=0|r/30,i=r%30,o=t.length,a=0!==i&&0!=t.__digit(o-1)>>>30-i,s=o+n+(a?1:0),c=new u(s,t.sign);if(0===i){for(var l=0;l<n;l++)c.__setDigit(l,0);for(;l<s;l++)c.__setDigit(l,t.__digit(l-n))}else{for(var p=0,f=0;f<n;f++)c.__setDigit(f,0);for(var d,h=0;h<o;h++)d=t.__digit(h),c.__setDigit(h+n,1073741823&d<<i|p),p=d>>>30-i;if(a)c.__setDigit(o+n,p);else if(0!==p)throw new Error("implementation bug")}return c.__trim()}},{key:"__rightShiftByAbsolute",value:function(t,e){var r=t.length,n=t.sign,i=u.__toShiftAmount(e);if(0>i)return u.__rightShiftByMaximum(n);var o=0|i/30,a=i%30,s=r-o;if(0>=s)return u.__rightShiftByMaximum(n);var c=!1;if(n)if(0!=(t.__digit(o)&(1<<a)-1))c=!0;else for(var l=0;l<o;l++)if(0!==t.__digit(l)){c=!0;break}c&&0===a&&0==~t.__digit(r-1)&&s++;var p=new u(s,n);if(0===a){p.__setDigit(s-1,0);for(var f=o;f<r;f++)p.__setDigit(f-o,t.__digit(f))}else{for(var d,h=t.__digit(o)>>>a,g=r-o-1,y=0;y<g;y++)d=t.__digit(y+o+1),p.__setDigit(y,1073741823&d<<30-a|h),h=d>>>a;p.__setDigit(g,h)}return c&&(p=u.__absoluteAddOne(p,!0,p)),p.__trim()}},{key:"__rightShiftByMaximum",value:function(t){return t?u.__oneDigit(1,!0):u.__zero()}},{key:"__toShiftAmount",value:function(t){if(1<t.length)return-1;var e=t.__unsignedDigit(0);return e>u.__kMaxLengthBits?-1:e}},{key:"__toPrimitive",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==r(t))return t;if(t.constructor===u)return t;if("undefined"!=typeof Symbol&&"symbol"===r(Symbol.toPrimitive)){var n=t[Symbol.toPrimitive];if(n){var i=n(e);if("object"!==r(i))return i;throw new TypeError("Cannot convert object to primitive value")}}var o=t.valueOf;if(o){var a=o.call(t);if("object"!==r(a))return a}var s=t.toString;if(s){var c=s.call(t);if("object"!==r(c))return c}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(t){return u.__isBigInt(t)?t:+t}},{key:"__isBigInt",value:function(t){return"object"===r(t)&&null!==t&&t.constructor===u}},{key:"__truncateToNBits",value:function(t,e){for(var r=0|(t+29)/30,n=new u(r,e.sign),i=r-1,o=0;o<i;o++)n.__setDigit(o,e.__digit(o));var a=e.__digit(i);if(0!=t%30){var s=32-t%30;a=a<<s>>>s}return n.__setDigit(i,a),n.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(t,e,r){for(var n,i=Math.min,o=0|(t+29)/30,a=new u(o,r),s=0,c=o-1,l=0,p=i(c,e.length);s<p;s++)l=1&(n=0-e.__digit(s)-l)>>>30,a.__setDigit(s,1073741823&n);for(;s<c;s++)a.__setDigit(s,0|1073741823&-l);var f,d=c<e.length?e.__digit(c):0,h=t%30;if(0===h)f=0-d-l,f&=1073741823;else{var g=32-h,y=1<<32-g;f=y-(d=d<<g>>>g)-l,f&=y-1}return a.__setDigit(c,f),a.__trim()}},{key:"__digitPow",value:function(t,e){for(var r=1;0<e;)1&e&&(r*=t),e>>>=1,t*=t;return r}},{key:"__isOneDigitInt",value:function(t){return(1073741823&t)===t}}]),u}(f(Array));return k.__kMaxLength=33554432,k.__kMaxLengthBits=k.__kMaxLength<<5,k.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],k.__kBitsPerCharTableShift=5,k.__kBitsPerCharTableMultiplier=1<<k.__kBitsPerCharTableShift,k.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],k.__kBitConversionBuffer=new ArrayBuffer(8),k.__kBitConversionDouble=new Float64Array(k.__kBitConversionBuffer),k.__kBitConversionInts=new Int32Array(k.__kBitConversionBuffer),k.__clz30=e?function(t){return e(t)-2}:function(t){var e=Math.LN2,r=Math.log;return 0===t?30:0|29-(0|r(t>>>0)/e)},k.__imul=t||function(t,e){return 0|t*e},k}()}}]);